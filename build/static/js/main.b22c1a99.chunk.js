(window.webpackJsonpoflt=window.webpackJsonpoflt||[]).push([[0],{1050:function(e,t,n){},1051:function(e,t,n){},1053:function(e,t,n){},1054:function(e,t,n){},1082:function(e,t,n){},1083:function(e,t,n){},1085:function(e){e.exports=JSON.parse('{"type":"object","properties":{"name":{"title":"${strings.common.displayName}","type":"string","pattern":"^[^\\\\\\\\\\\\\\\\/:*?\\\\\\\\\\\\\\"<>|]*$"},"securityToken":{"title":"${strings.projectSettings.securityToken.title}","description":"${strings.projectSettings.securityToken.description}","type":"string"},"sourceConnection":{"title":"${strings.projectSettings.sourceConnection.title}","description":"${strings.projectSettings.sourceConnection.description}","type":"object"},"folderPath":{"title":"Folder path","description":"Subfolder path to your files","type":"string"},"apiUriBase":{"title":"Form recognizer service URI","description":"Form recognizer service URI","type":"string","format":"uri"},"apiKey":{"title":"API key","description":"API key","type":"string"},"description":{"title":"${strings.common.description}","type":"string"}},"required":["name","sourceConnection","apiUriBase"]}')},1086:function(e){e.exports=JSON.parse('{"type":"object","properties":{"name":{"title":"${strings.common.displayName}","type":"string","pattern":"^[^\\\\\\\\\\\\\\\\/:*?\\\\\\\\\\\\\\"<>|]*$"},"securityToken":{"title":"${strings.projectSettings.securityToken.title}","description":"${strings.projectSettings.securityToken.description}","type":"string"},"folderPath":{"title":"Folder path","description":"Subfolder path to your files","type":"string"},"apiUriBase":{"title":"Form recognizer service URI","description":"Form recognizer service URI","type":"string","format":"uri"},"apiKey":{"title":"API key","description":"API key","type":"string"},"description":{"title":"${strings.common.description}","type":"string"}},"required":["name","apiUriBase"]}')},1087:function(e){e.exports=JSON.parse('{"name":{"ui:autofocus":true},"securityToken":{"ui:field":"securityToken"},"description":{"ui:widget":"textarea"},"sourceConnection":{"ui:field":"sourceConnection"},"targetConnection":{"ui:field":"targetConnection"},"apiKey":{"ui:widget":"protectedInput"}}')},1088:function(e,t,n){},1089:function(e,t,n){},1090:function(e,t,n){},1099:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(55),i=n.n(o),s=n(77),c=(n(599),n(600),n(601),n(602),n(533));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(22),u=n(44),d=n(557),p=n(16),g=n(30),m=n(19),f=n(142),h=n(331),v=Object(u.c)({appSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.a.SAVE_APP_SETTINGS_SUCCESS:case g.a.ENSURE_SECURITY_TOKEN_SUCCESS:return Object(p.a)({},t.payload);default:return e}},connections:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(e||(e=[]),t.type){case g.a.SAVE_CONNECTION_SUCCESS:var n=Object(f.getStorageItem)(m.a.projectFormTempKey);if(n){var a=JSON.parse(n);a.sourceConnection=t.payload,Object(f.setStorageItem)(m.a.projectFormTempKey,JSON.stringify(a))}return[Object(p.a)({},t.payload)].concat(Object(l.a)(e.filter((function(e){return e.id!==t.payload.id}))));case g.a.DELETE_CONNECTION_SUCCESS:return Object(l.a)(e.filter((function(e){return e.id!==t.payload.id})));case g.a.LOAD_PROJECT_SUCCESS:return[Object(p.a)({},t.payload.sourceConnection)].concat(Object(l.a)(e.filter((function(e){return e.id!==t.payload.sourceConnection.id}))));default:return e}},recentProjects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;e||(e=[]);switch(t.type){case g.a.SAVE_PROJECT_SUCCESS:return[Object(p.a)({},t.payload)].concat(Object(l.a)(e.filter((function(e){return e.id!==t.payload.id}))));case g.a.DELETE_PROJECT_SUCCESS:return Object(l.a)(e.filter((function(e){return e.id!==t.payload.id})));case g.a.SAVE_CONNECTION_SUCCESS:return e.map((function(e){var n=Object(p.a)({},e);return e.sourceConnection.id===t.payload.id&&(n.sourceConnection=Object(p.a)({},t.payload)),n}));default:return e}},currentProject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.a.DELETE_PROJECT_SUCCESS:case g.a.CLOSE_PROJECT_SUCCESS:return null;case g.a.LOAD_PROJECT_SUCCESS:return Object(p.a)({},t.payload);case g.a.LOAD_ASSET_METADATA_SUCCESS:return e?Object(p.a)({},e,{lastVisitedAssetId:t.payload.asset.id}):e;case g.a.LOAD_PROJECT_ASSETS_SUCCESS:var n={};return t.payload.forEach((function(e){n[e.id]=e})),Object(p.a)({},e,{assets:n});case g.a.SAVE_ASSET_METADATA_SUCCESS:if(!e)return e;var a=Object(p.a)({},e.assets)||{};a[t.payload.asset.id]=Object(p.a)({},t.payload.asset);var r=new Set;t.payload.regions.forEach((function(e){return e.tags.forEach((function(e){return r.add(e)}))}));var o=e.tags?Object(l.a)(e.tags):[],i=!1;return r.forEach((function(t){e.tags&&0!==e.tags.length&&e.tags.find((function(e){return t===e.name}))||(o.push({name:t,color:h[o.length%h.length]}),i=!0)})),i?Object(p.a)({},e,{tags:o,assets:a}):Object(p.a)({},e,{assets:a});case g.a.SAVE_CONNECTION_SUCCESS:return e?Object(p.a)({},e,{sourceConnection:e.sourceConnection.id===t.payload.id?Object(p.a)({},t.payload):e.sourceConnection}):e;default:return e}},appError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.a.SHOW_ERROR:return Object(p.a)({},t.payload);case g.a.CLEAR_ERROR:return null;default:return e}},appTitle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.a.SET_TITLE:return t.payload;default:return e}}}),b=n(306);var y={appSettings:{securityTokens:[]},connections:[],recentProjects:[],currentProject:null,appError:null},E=n(58);var C,w=n(183),j=n(404),S=n(78),O=n(9),k=n(10),T=n(14),x=n(12),A=n(26),P=n(13),R=n(138),F=n(219),N=n(1154);!function(e){e[e.Action=0]="Action",e[e.State=1]="State"}(C||(C={}));var I=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(T.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).context=void 0,n.unregisterKeyboardHandler=void 0,n.getTitle=function(){return"".concat(n.props.tooltip).concat(n.getShortcut())},n.getShortcut=function(){return" (".concat(n.consolidateKeyCasings(n.props.accelerators).join(", "),")")},n.consolidateKeyCasings=function(e){var t=[];if(e){var n=!0,a=!1,r=void 0;try{for(var o,i=function(){var e=o.value;t.find((function(t){return t.toLowerCase()===e.toLowerCase()}))||t.push(e)},s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)i()}catch(c){a=!0,r=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}}return t},n.onClick=function(e){e.stopPropagation(),n.onItemClick&&n.onItemClick(),n.props.onClick(Object(A.a)(n))},n}return Object(P.a)(t,e),Object(k.a)(t,[{key:"componentWillUnmount",value:function(){this.unregisterKeyboardHandler&&this.unregisterKeyboardHandler()}},{key:"render",value:function(){var e=["toolbar-btn ".concat(this.props.name)];this.props.active&&e.push("active");var t=this.props.accelerators;return r.a.createElement(a.Fragment,null,t&&r.a.createElement(F.a,{displayName:this.props.tooltip,accelerators:t,handler:this.onClick,icon:this.props.icon,keyEventType:R.a.KeyDown}),r.a.createElement(N.a,{className:e.join(" "),title:this.getTitle(),iconProps:{iconName:this.props.icon},onClick:this.onClick}))}}]),t}(r.a.Component);I.contextType=R.b;var D=n(21),L=function(){function e(){Object(O.a)(this,e)}return Object(k.a)(e,null,[{key:"register",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I;D.a.null(n),D.a.null(t),e.componentRegistry.push({component:n,config:t})}},{key:"getToolbarItems",value:function(){return Object(l.a)(e.componentRegistry)}},{key:"reset",value:function(){e.componentRegistry=[]}}]),e}();L.componentRegistry=[];var B,M,U=n(5);!function(e){e.SelectCanvas="selectCanvas",e.DrawRectangle="drawRectangle",e.PreviousAsset="navigatePreviousAsset",e.NextAsset="navigateNextAsset"}(B||(B={})),function(e){e.Canvas="canvas",e.Regions="regions",e.Navigation="navigation",e.Project="project"}(M||(M={}));var V=n(4),_=n.n(V);function z(e){var t,n,a,r,o=arguments;return _.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:t=o.length>1&&void 0!==o[1]?o[1]:5,D.a.null(this),D.a.null(e),D.a.expression(t,(function(e){return e>0})),n=Object(l.a)(this);case 5:if(!(n.length>0)){i.next=13;break}for(a=[];n.length>0&&a.length<t;)a.push(n.pop());return r=a.map((function(t){return e(t)})),i.next=11,_.a.awrap(Promise.all(r));case 11:i.next=5;break;case 13:case"end":return i.stop()}}),null,this)}function K(e){var t,n,a,r,o,i,s=arguments;return _.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:t=s.length>1&&void 0!==s[1]?s[1]:5,D.a.null(this),D.a.null(e),D.a.expression(t,(function(e){return e>0})),n=[],a=Object(l.a)(this);case 6:if(!(a.length>0)){c.next=16;break}for(r=[];a.length>0&&r.length<t;)r.push(a.pop());return o=r.map((function(t){return e(t)})),c.next=12,_.a.awrap(Promise.all(o));case 12:i=c.sent,n=n.concat(i),c.next=6;break;case 16:return c.abrupt("return",n);case 17:case"end":return c.stop()}}),null,this)}function W(e,t){D.a.null(this),D.a.null(e),t=t||function(e){return e.trim().toLowerCase()};var n=new Set,a=!0,r=!1,o=void 0;try{for(var i,s=this[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var c=t(e(i.value));if(n.has(c))return!0;n.add(c)}}catch(l){r=!0,o=l}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return!1}function H(e){var t,n,a,r,o=arguments;return _.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:t=o.length>1&&void 0!==o[1]?o[1]:5,D.a.null(this),D.a.null(e),D.a.expression(t,(function(e){return e>0})),n=Object(l.a)(this.entries());case 5:if(!(n.length>0)){i.next=13;break}for(a=[];n.length>0&&a.length<t;)a.push(n.pop());return r=a.map((function(t){return e(t[1],t[0])})),i.next=11,_.a.awrap(Promise.all(r));case 11:i.next=5;break;case 13:case"end":return i.stop()}}),null,this)}Object(E.v)({fontFace:{fontFamily:"FabricMDL2Icons"},icons:{Insights:"\ue3af",MachineLearning:"\ue3b8",TagGroup:"\ue3f6",ChevronDown:"\ue70d",ChevronUp:"\ue70e",Edit:"\ue70f",Add:"\ue710",Settings:"\ue713",Link:"\ue71b",Search:"\ue721",CheckMark:"\ue73e",Up:"\ue74a",Down:"\ue74b",Delete:"\ue74d",Cloud:"\ue753",ChevronLeft:"\ue76b",ChevronRight:"\ue76c",Home:"\ue80f",View:"\ue890",Download:"\ue896",Help:"\ue897",Rename:"\ue8ac",Copy:"\ue8c8",Tag:"\ue8ec",Info:"\ue946",AddTo:"\uecc8",OpenFolderHorizontal:"\ued25",DocumentManagement:"\ueffc",TextDocument:"\uf029",BranchMerge:"\uf295",Plug:"\uf300",PlugConnected:"\uf302",Hide3:"\uf6ac",WarningSolid:"\uf736",ZoomIn:"\ue8a3",ZoomOut:"\ue71f",TextField:"\uedc3",Filter:"\ue71c",Table:"\ued86",MapLayers:"\ue81e"}}),Array.prototype.forEachAsync||(Array.prototype.forEachAsync=z),Array.prototype.mapAsync||(Array.prototype.mapAsync=K),Array.prototype.containsDuplicates||(Array.prototype.containsDuplicates=W),Map.prototype.forEachAsync||(Map.prototype.forEachAsync=H),S.a.register({name:"azureBlobStorage",displayName:U.c.connections.providers.azureBlob.title,factory:function(e){return new j.a(e)}}),w.a.register({name:"azureBlobStorage",displayName:U.c.connections.providers.azureBlob.title,factory:function(e){return new j.a(e)}}),L.register({name:B.SelectCanvas,tooltip:U.c.editorPage.toolbar.select,icon:"fa-mouse-pointer",group:M.Canvas,type:C.State,accelerators:["V","v"]}),L.register({name:B.DrawRectangle,tooltip:U.c.editorPage.toolbar.drawRectangle,icon:"fa-vector-square",group:M.Canvas,type:C.State,accelerators:["R","r"]}),L.register({name:B.PreviousAsset,tooltip:U.c.editorPage.toolbar.previousAsset,icon:"fas fa-arrow-circle-up",group:M.Navigation,type:C.Action,accelerators:["ArrowUp","W","w"]}),L.register({name:B.NextAsset,tooltip:U.c.editorPage.toolbar.nextAsset,icon:"fas fa-arrow-circle-down",group:M.Navigation,type:C.Action,accelerators:["ArrowDown","S","s"]});var q=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=["appSettings","connections","recentProjects"],r=[d.a];if(t){var o=n(142).createLocalStorage({paths:a});r=[].concat(Object(l.a)(r),[o])}if("development"===b.a.get()){var i=n(1092),s=n(1093);r=[].concat(Object(l.a)(r),[s.default(),i.createLogger()])}return Object(u.d)(v,t?Object(f.mergeInitialState)(e,a):e,u.a.apply(void 0,Object(l.a)(r)))}(y,!0),J=!0;document.body.classList.add("no-focus-outline"),document.body.addEventListener("mousedown",(function(){J||(J=!0,document.body.classList.add("no-focus-outline"))})),document.body.addEventListener("keydown",(function(e){9===e.keyCode&&J&&(J=!1,document.body.classList.remove("no-focus-outline"))})),i.a.render(r.a.createElement(s.a,{store:q},r.a.createElement(c.a,null)),document.getElementById("rootdiv")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},136:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(9),r=n(10),o=n(14),i=n(12),s=n(26),c=n(13),l=n(0),u=n.n(l),d=n(35),p=n(1108),g=n(1106),m=n(187),f=n(409),h=n(1105),v=function(e){function t(e,n){var r;return Object(a.a)(this,t),(r=Object(o.a)(this,Object(i.a)(t).call(this,e,n))).getMessage=function(e){return"function"===typeof e?e.apply(Object(s.a)(r),r.state.params):e},r.state={params:null},r.onCloseClick=r.onCloseClick.bind(Object(s.a)(r)),r}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e={settings:{theme:Object(d.b)()},scopedSettings:{}};this.props.confirmButtonTheme;return u.a.createElement(p.a,e,this.props.show&&u.a.createElement(g.a,{onDismiss:this.onCloseClick,hidden:!this.props.show,dialogContentProps:{type:m.a.normal,title:this.props.title,subText:this.getMessage(this.props.message)},modalProps:{isBlocking:!1}},u.a.createElement(f.a,null,u.a.createElement(h.a,{theme:Object(d.c)(),onClick:this.onCloseClick,text:this.props.closeButtonText||"OK"}))))}},{key:"onCloseClick",value:function(){this.props.onClose&&this.props.onClose.apply(null,this.state.params)}}]),t}(u.a.Component)},138:function(e,t,n){"use strict";var a,r=n(9),o=n(10),i=n(14),s=n(12),c=n(13),l=n(0),u=n.n(l),d=n(21),p=n(7),g=function(){function e(){var t=this;Object(r.a)(this,e),this.registrations={},this.registerBinding=function(e){var n=e.keyEventType,a=e.accelerators,r=e.handler,o=e.displayName;d.a.null(n),d.a.expression(a,(function(e){return e.length>0})),d.a.null(r);var i=t.registrations[n];return i||(i={},t.registrations[n]=i),a.forEach((function(a){var r=t.registrations[n][a];if(r){var i="Key code ".concat(a,' on key event "').concat(n,'" ');throw i+='already has binding registered: "'.concat(r.displayName,'." '),i+='Cannot register binding "'.concat(o,'" with the same key code and key event type'),new p.a(p.e.OverloadedKeyBinding,i)}t.registrations[n][a]=e})),function(){e.accelerators.forEach((function(n){delete t.registrations[e.keyEventType][n]}))}},this.getRegistrations=function(){return t.registrations}}return Object(o.a)(e,[{key:"getHandler",value:function(e,t){d.a.null(e),d.a.null(t);var n=this.registrations[e];return n&&n[t]?n[t].handler:null}},{key:"invokeHandler",value:function(e,t,n){d.a.null(t),d.a.null(n);var a=this.getHandler(e,t);null!==a&&a(n)}}]),e}();n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return f})),function(e){e.KeyDown="keydown",e.KeyUp="keyup",e.KeyPress="keypress"}(a||(a={}));var m=u.a.createContext(null),f=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={keyboard:new g},n.nonSupportedKeys=new Set(["Meta","Ctrl"," Control","Alt",void 0]),n.inputElementTypes=new Set(["input","select","textarea"]),n.onKeyboardEvent=function(e){n.isDisabled()||n.nonSupportedKeys.has(e.key)||n.state.keyboard.invokeHandler(e.type,n.getKeyParts(e),e)},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener(a.KeyDown,this.onKeyboardEvent),window.addEventListener(a.KeyUp,this.onKeyboardEvent),window.addEventListener(a.KeyPress,this.onKeyboardEvent)}},{key:"componentWillUnmount",value:function(){window.removeEventListener(a.KeyDown,this.onKeyboardEvent),window.removeEventListener(a.KeyUp,this.onKeyboardEvent),window.removeEventListener(a.KeyPress,this.onKeyboardEvent)}},{key:"render",value:function(){return u.a.createElement(m.Provider,{value:this.state},this.props.children)}},{key:"getKeyParts",value:function(e){var t=[];return(e.ctrlKey||e.metaKey)&&t.push("CmdOrCtrl+"),e.altKey&&t.push("Alt+"),t.push(e.key),t.join("")}},{key:"isDisabled",value:function(){return document.activeElement&&this.inputElementTypes.has(document.activeElement.tagName.toLowerCase())}}]),t}(u.a.Component);f.contextType=m},139:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return c}));var a,r,o=n(542),i=n.n(o);function s(){var e,t=i.a.release().toLowerCase();return e=t.indexOf("electron")>-1||"electron"===Object({NODE_ENV:"production",PUBLIC_URL:""}).HOST_TYPE?a.Electron:a.Browser,{release:t,type:e}}function c(){return s().type===a.Browser}!function(e){e[e.Electron=1]="Electron",e[e.Browser=2]="Browser",e[e.All=3]="All"}(a||(a={})),function(e){e.Web="web",e.Windows="win32",e.Linux="linux",e.MacOS="darwin"}(r||(r={})),t.c=s},140:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return p}));var a=n(4),r=n.n(a),o=n(21),i="AES-CBC";function s(){return m(crypto.getRandomValues(new Uint8Array(32)).buffer)}function c(e,t){var n,a,s,c,l,u,d;return r.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return o.a.empty(e),o.a.empty(t),p.prev=2,n=f(t),a=crypto.getRandomValues(new Uint8Array(16)),p.next=7,r.a.awrap(g(n));case 7:return s=p.sent,c=b(e),p.next=11,r.a.awrap(crypto.subtle.encrypt({name:i,iv:a},s,c));case 11:return l=p.sent,u={ciphertext:h(l),iv:h(a.buffer)},d=b(JSON.stringify(u)),p.abrupt("return",m(d));case 17:throw p.prev=17,p.t0=p.catch(2),new Error("Error encrypting data - ".concat(p.t0.message));case 20:case"end":return p.stop()}}),null,null,[[2,17]])}function l(e,t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return o.a.null(e),n.next=3,r.a.awrap(c(JSON.stringify(e),t));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}))}function u(e,t){var n,a,s,c,l,u,d;return r.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return o.a.empty(e),o.a.empty(t),p.prev=2,n=f(t),a=y(f(e)),s=JSON.parse(a),c=v(s.iv),l=v(s.ciphertext),p.next=10,r.a.awrap(g(n));case 10:return u=p.sent,p.next=13,r.a.awrap(crypto.subtle.decrypt({name:i,iv:c.slice(0,16)},u,l));case 13:return d=p.sent,p.abrupt("return",y(d));case 17:throw p.prev=17,p.t0=p.catch(2),new Error("Error decrypting data - ".concat(p.t0.message));case 20:case"end":return p.stop()}}),null,null,[[2,17]])}function d(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(u(e,t));case 2:return n=a.sent,a.abrupt("return",JSON.parse(n));case 4:case"end":return a.stop()}}))}function p(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(crypto.subtle.digest("SHA-256",b(e)));case 2:return t=n.sent,n.abrupt("return",h(t));case 4:case"end":return n.stop()}}))}function g(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(crypto.subtle.importKey("raw",e,i,!1,["encrypt","decrypt"]));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}function m(e){for(var t=[],n=new Uint8Array(e),a=n.byteLength,r=0;r<a;r++)t.push(String.fromCharCode(n[r]));return window.btoa(t.join(""))}function f(e){for(var t=window.atob(e),n=new Uint8Array(t.length),a=n.byteLength,r=0;r<a;r++)n[r]=t.charCodeAt(r);return n.buffer}function h(e){for(var t=[],n=new Uint8Array(e),a=n.byteLength,r=0;r<a;r++){var o=n[r].toString(16);1===o.length?t.push("0".concat(o)):t.push(o)}return t.join("")}function v(e){for(var t=e.length/2,n=new Uint8Array(t),a=0;a<t;a++)n[a]=parseInt(e.substr(2*a,2),16);return n.buffer}function b(e){if("undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e).buffer;for(var t=e.length,n=-1,a=new Uint8Array(3*t),r=0,o=0,i=0;i!==t;){if((r=e.charCodeAt(i++))>=55296&&r<=56319){if(i===t){a[++n]=239,a[++n]=191,a[++n]=189;break}if(!((o=e.charCodeAt(i))>=56320&&o<=57343)){a[++n]=239,a[++n]=191,a[++n]=189;continue}if(i+=1,(r=1024*(r-55296)+o-56320+65536)>65535){a[++n]=240|r>>>18,a[++n]=128|r>>>12&63,a[++n]=128|r>>>6&63,a[++n]=128|63&r;continue}}r<=127?a[++n]=0|r:r<=2047?(a[++n]=192|r>>>6,a[++n]=128|63&r):(a[++n]=224|r>>>12,a[++n]=128|r>>>6&63,a[++n]=128|63&r)}return a.subarray(0,n+1)}function y(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t=[],n=new Uint8Array(e),a=n.byteLength,r=0;r<a;){var o=n[r++];o<127?t.push(String.fromCharCode(o)):o<=223?t.push(String.fromCharCode((31&o)<<6|63&n[r++])):o<=239?t.push(String.fromCharCode((15&o)<<12|(63&n[r++])<<6|63&n[r++])):String.fromCodePoint?t.push(String.fromCodePoint((7&o)<<18|(63&n[r++])<<12|(63&n[r++])<<6|63&n[r++])):(t.push("?"),r+=3)}return t.join("")}},142:function(e,t,n){"use strict";n.r(t),n.d(t,"createLocalStorage",(function(){return o})),n.d(t,"mergeInitialState",(function(){return i})),n.d(t,"setStorageItem",(function(){return s})),n.d(t,"getStorageItem",(function(){return c})),n.d(t,"removeStorageItem",(function(){return l}));var a=n(16),r=n(19);function o(e){return function(t){return function(n){return function(a){var r=n(a),o=t.getState();return e.paths.forEach((function(e){o[e]&&s(e,JSON.stringify(o[e]))})),r}}}}function i(e,t){var n=Object(a.a)({},e);return t.forEach((function(e){var t=c(e);t&&(n[e]=JSON.parse(t))})),n}function s(e,t){localStorage.setItem("".concat(r.a.version,"_").concat(e),t)}function c(e){return localStorage.getItem("".concat(r.a.version,"_").concat(e))}function l(e){return localStorage.removeItem("".concat(r.a.version,"_").concat(e))}},155:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(4),r=n.n(a),o=n(9),i=n(10),s=n(257),c=n.n(s),l=n(7),u=n(21),d=n(401),p=n(543),g=function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,null,[{key:"readAsText",value:function(e){var t;return u.a.null(e),new Promise((function(n,a){var r=new FileReader;r.onerror=a,r.onload=function(){r.result?(t={content:r.result,file:e},n(t)):a()};try{r.readAsText(e)}catch(o){a(o)}}))}},{key:"readAssetAttributes",value:function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:u.a.null(e),t.t0=e.type,t.next=t.t0===l.c.Image?4:7;break;case 4:return t.next=6,r.a.awrap(this.readImageAttributes(e.path));case 6:return t.abrupt("return",t.sent);case 7:throw new Error("Asset not supported");case 8:case"end":return t.stop()}}),null,this)}},{key:"readAssetAttributesWithBuffer",value:function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return u.a.null(e),t.next=3,r.a.awrap(this.readImageAttributes("data:image;base64,"+e));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),null,this)}},{key:"getAssetBlob",value:function(e){var t,n,a;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return u.a.null(e),t={responseType:"blob"},o.next=4,r.a.awrap(c.a.get(e.path,t));case 4:if(200===(n=o.sent).status){o.next=7;break}throw new Error("Error downloading asset binary");case 7:return o.next=9,r.a.awrap(n.data);case 9:return a=o.sent,o.abrupt("return",a);case 11:case"end":return o.stop()}}))}},{key:"getAssetArray",value:function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(this.getAssetBlob(e));case 2:return t=n.sent,n.next=5,r.a.awrap(new Response(t).arrayBuffer());case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),null,this)}},{key:"getAssetFrameImage",value:function(e){var t=this;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,a){var r=!0,o=t.videoAssetFiles[e.parent.name];e.name.toLowerCase().endsWith(".jpg")||(e.name+=".jpg"),o||(o=document.createElement("video")),o.onloadedmetadata=function(){o.currentTime=e.timestamp},o.onseeked=function(){var e=document.createElement("canvas");e.height=o.videoHeight,e.width=o.videoWidth,e.getContext("2d").drawImage(o,0,0,e.width,e.height),e.toBlob(n)},o.onerror=a,r?o.src=e.parent.path:o.currentTime=e.timestamp})));case 1:case"end":return n.stop()}}))}},{key:"readImageAttributes",value:function(e){return new Promise((function(t,n){var a=document.createElement("img");a.onload=function(){t({width:a.naturalWidth,height:a.naturalHeight})},a.onerror=n,a.src=e}))}},{key:"readFileAsArrayBuffer",value:function(e){return new Promise((function(t,n){var a=new FileReader;try{a.onload=function(){t(a.result)},a.readAsArrayBuffer(e)}catch(r){n(r)}}))}},{key:"readImageOrientation",value:function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){try{d.getData(e,(function(){var n=d.getTag(e,"Orientation");t(Object(p.isNumber)(n)?n:1)}))}catch(a){n(a)}})));case 1:case"end":return t.stop()}}))}}]),e}();g.videoAssetFiles={}},183:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(16),r=n(9),o=n(10),i=n(21),s=n(139),c=function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,null,[{key:"register",value:function(t,n){i.a.null(t);var a=t;"string"===typeof t&&(i.a.null(n),a={name:t,displayName:t,factory:n}),a.platformSupport||(a.platformSupport=s.a.All),0!==(a.platformSupport&Object(s.c)().type)&&(e.providerRegistry[a.name]=a)}},{key:"createFromConnection",value:function(e){return this.create(e.providerType,e.providerOptions)}},{key:"create",value:function(t,n){i.a.empty(t);var a=e.providerRegistry[t];if(!a)throw new Error("No asset provider has been registered with name '".concat(t,"'"));return a.factory(n)}},{key:"providers",get:function(){return Object(a.a)({},e.providerRegistry)}}]),e}();c.providerRegistry={}},188:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var a=n(22),r=n(16),o=n(4),i=n.n(o),s=n(9),c=n(10),l=n(53),u=n.n(l),d=n(21),p=n(7),g=n(183),m=n(78),f=n(19),h=n(201),v=n(57),b=n(5),y=n(140),E=n(47),C=function(){function e(t){Object(s.a)(this,e),this.project=t,this.assetProviderInstance=void 0,this.storageProviderInstance=void 0,this.isInExactFolderPath=function(e,t){return""===t?-1===e.lastIndexOf("/"):0===e.indexOf("".concat(t,"/"))&&e.lastIndexOf("/")===t.length},d.a.null(t)}return Object(c.a)(e,null,[{key:"createAssetFromFilePath",value:function(e,t){var n,a,r,o,s,c,l;return i.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return d.a.empty(e),(n=e.toLowerCase()).startsWith("http://")||n.startsWith("https://")||n.startsWith("file:")||(e=Object(v.c)(e,!0)),u.next=5,i.a.awrap(Object(y.f)(e));case 5:return a=u.sent,r=e.split(/[\\\/]/),t=t||r[r.length-1],o=t.split("."),s=o[o.length-1].split(/[\?#]/),c=s[0],l=this.getAssetType(c),u.abrupt("return",{id:a,format:c,state:p.b.NotVisited,type:l,name:t,path:e,size:null});case 13:case"end":return u.stop()}}),null,this)}},{key:"getAssetType",value:function(e){switch(e.toLowerCase()){case"jpg":case"jpeg":case"png":case"bmp":return p.c.Image;case"tif":case"tiff":return p.c.TIFF;case"pdf":return p.c.PDF;default:return p.c.Unknown}}}]),Object(c.a)(e,[{key:"getAssets",value:function(){var e,t,n,a=this;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.project,r.next=3,i.a.awrap(this.assetProvider.getAssets());case 3:return t=r.sent,n=t.map((function(e){return e.name=decodeURIComponent(e.name),e})).filter((function(t){return a.isInExactFolderPath(t.name,e.folderPath)})),r.abrupt("return",n);case 6:case"end":return r.stop()}}),null,this)}},{key:"save",value:function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(d.a.null(e),t=decodeURIComponent("".concat(e.asset.name).concat(f.a.labelFileExtension)),!e.labelData){n.next=5;break}return n.next=5,i.a.awrap(this.storageProvider.writeText(t,JSON.stringify(e.labelData,null,4)));case 5:if(e.asset.state===p.b.Tagged){n.next=13;break}return n.prev=6,n.next=9,i.a.awrap(this.storageProvider.deleteFile(t,!0,!0));case 9:n.next=13;break;case 11:n.prev=11,n.t0=n.catch(6);case 13:return n.abrupt("return",e);case 14:case"end":return n.stop()}}),null,this,[[6,11]])}},{key:"getAssetMetadata",value:function(e){var t,n,o,s,c,l,u,p,g,m,v,y,C,w,j,S,O,k,T,x,A,P,R,F,N,I,D,L,B,M;return i.a.async((function(U){for(;;)switch(U.prev=U.next){case 0:return d.a.null(e),t=decodeURIComponent("".concat(e.name).concat(f.a.labelFileExtension)),U.prev=2,U.next=5,i.a.awrap(this.storageProvider.readText(t,!0));case 5:if(n=U.sent,(o=JSON.parse(n)).document&&o.labels){U.next=11;break}throw s=Object(b.b)(b.c.errors.missingRequiredFieldInLabelFile.message,{labelFileName:t}),E.b.error(s,{autoClose:!1}),new Error("Invalid label file");case 11:if(0!==o.labels.length){U.next=15;break}throw c=Object(b.b)(b.c.errors.noLabelInLabelFile.message,{labelFileName:t}),E.b.info(c),new Error("Empty label file");case 15:if(!o.labels.find((function(e){return 0===e.label.trim().length}))){U.next=18;break}throw E.b.error(b.c.tags.warnings.emptyName,{autoClose:!1}),new Error("Invalid label file");case 18:if(!o.labels.containsDuplicates((function(e){return e.label}))){U.next=22;break}throw l=Object(b.b)(b.c.errors.duplicateFieldKeyInLabelsFile.message,{labelFileName:t}),E.b.error(l,{autoClose:!1}),new Error("Invalid label file");case 22:u=new Set,p=!0,g=!1,m=void 0,U.prev=26,v=o.labels[Symbol.iterator]();case 28:if(p=(y=v.next()).done){U.next=93;break}C=y.value,w=new Set,j=!0,S=!1,O=void 0,U.prev=34,k=C.value[Symbol.iterator]();case 36:if(j=(T=k.next()).done){U.next=76;break}if(x=T.value,0===w.size||w.has(x.page)){U.next=42;break}throw A=Object(b.b)(b.c.errors.sameLabelInDifferentPageError.message,{tagName:C.label}),E.b.error(A,{autoClose:!1}),new Error("Invalid label file");case 42:w.add(x.page),P=!0,R=!1,F=void 0,U.prev=46,N=x.boundingBoxes[Symbol.iterator]();case 48:if(P=(I=N.next()).done){U.next=59;break}if(D=I.value,L=[x.page].concat(Object(a.a)(D)).join(),!u.has(L)){U.next=55;break}throw B=Object(b.b)(b.c.errors.duplicateBoxInLabelFile.message,{page:x.page}),E.b.error(B,{autoClose:!1}),new Error("Invalid label file");case 55:u.add(L);case 56:P=!0,U.next=48;break;case 59:U.next=65;break;case 61:U.prev=61,U.t0=U.catch(46),R=!0,F=U.t0;case 65:U.prev=65,U.prev=66,P||null==N.return||N.return();case 68:if(U.prev=68,!R){U.next=71;break}throw F;case 71:return U.finish(68);case 72:return U.finish(65);case 73:j=!0,U.next=36;break;case 76:U.next=82;break;case 78:U.prev=78,U.t1=U.catch(34),S=!0,O=U.t1;case 82:U.prev=82,U.prev=83,j||null==k.return||k.return();case 85:if(U.prev=85,!S){U.next=88;break}throw O;case 88:return U.finish(85);case 89:return U.finish(82);case 90:p=!0,U.next=28;break;case 93:U.next=99;break;case 95:U.prev=95,U.t2=U.catch(26),g=!0,m=U.t2;case 99:U.prev=99,U.prev=100,p||null==v.return||v.return();case 102:if(U.prev=102,!g){U.next=105;break}throw m;case 105:return U.finish(102);case 106:return U.finish(99);case 107:return E.b.dismiss(),U.abrupt("return",{asset:Object(r.a)({},e),regions:[],version:h.a.version,labelData:o});case 111:return U.prev=111,U.t3=U.catch(2),U.t3 instanceof SyntaxError&&(M=Object(b.b)(b.c.errors.invalidJSONFormat.message,{labelFileName:t}),E.b.error(M,{autoClose:!1})),U.abrupt("return",{asset:Object(r.a)({},e),regions:[],version:h.a.version,labelData:null});case 115:case"end":return U.stop()}}),null,this,[[2,111],[26,95,99,107],[34,78,82,90],[46,61,65,73],[66,,68,72],[83,,85,89],[100,,102,106]])}},{key:"deleteTag",value:function(e){var t,n;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=function(t){return t.filter((function(t){return t!==e}))},n=function(t){return t.labels=t.labels.filter((function(t){return t.label!==e})),t},a.next=4,i.a.awrap(this.getUpdatedAssets(e,t,n));case 4:return a.abrupt("return",a.sent);case 5:case"end":return a.stop()}}),null,this)}},{key:"renameTag",value:function(e,t){var n,a;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=function(n){return n.map((function(n){return n===e?t:n}))},a=function(n){var a=n.labels.find((function(t){return t.label===e}));return a&&(a.label=t),n},r.next=4,i.a.awrap(this.getUpdatedAssets(e,n,a));case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),null,this)}},{key:"getUpdatedAssets",value:function(e,t,n){var a,r=this;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i.a.awrap(u.a.values(this.project.assets).mapAsync((function(a){var o,s;return i.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,i.a.awrap(r.getAssetMetadata(a));case 2:return o=c.sent,s=r.updateTagInAssetMetadata(o,e,t,n),c.abrupt("return",s?o:null);case 5:case"end":return c.stop()}}))})));case 2:return a=o.sent,o.abrupt("return",a.filter((function(e){return!!e})));case 4:case"end":return o.stop()}}),null,this)}},{key:"updateTagInAssetMetadata",value:function(e,t,n,a){var r=!1,o=!0,i=!1,s=void 0;try{for(var c,l=e.regions[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var d=c.value;d.tags.find((function(e){return e===t}))&&(r=!0,d.tags=n(d.tags))}}catch(g){i=!0,s=g}finally{try{o||null==l.return||l.return()}finally{if(i)throw s}}e.labelData&&e.labelData.labels&&(e.labelData.labels.find((function(e){return e.label===t}))&&(r=!0,e.labelData=a(e.labelData)));return!!r&&(e.regions=e.regions.filter((function(e){return e.tags.length>0})),e.asset.state=u.a.get(e,"labelData.labels.length")?p.b.Tagged:p.b.Visited,!0)}},{key:"assetProvider",get:function(){return this.assetProviderInstance||(this.assetProviderInstance=g.a.create(this.project.sourceConnection.providerType,this.project.sourceConnection.providerOptions)),this.assetProviderInstance}},{key:"storageProvider",get:function(){return this.storageProviderInstance||(this.storageProviderInstance=m.a.create(this.project.sourceConnection.providerType,this.project.sourceConnection.providerOptions)),this.storageProviderInstance}}]),e}()},19:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={version:"pubpreview_1.0",projectFormTempKey:"projectForm",projectFileExtensionOld:".vott",projectFileExtension:".fott",labelFileExtension:".labels.json",ocrFileExtension:".ocr.json",fieldsFileName:"fields.json",maxConcurrentServiceRequests:3,statusCodeSucceeded:"succeeded",statusCodeFailed:"failed",apiKeyHeader:"Ocp-Apim-Subscription-Key",maxRetry:8,initialRetryInterval:500,convertedImageFormat:"image/jpeg",convertedImageQuality:.7,convertedThumbnailQuality:.2,apiModelsPath:"/formrecognizer/v2.0-preview/custom/models",pdfjsWorkerSrc:function(e){return"//fotts.azureedge.net/npm/pdfjs-dist/".concat(e,"/pdf.worker.js")},pdfjsCMapUrl:function(e){return"//fotts.azureedge.net/npm/pdfjs-dist/".concat(e,"/cmaps/")}}},201:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=n(396)},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(9),r=n(10),o=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,null,[{key:"empty",value:function(e,t,n){if(!1===!!e||0===e.trim().length)throw n=n||"'".concat(t||"value","' cannot be null or empty"),new Error(n)}},{key:"null",value:function(e,t,n){if(!1===!!e)throw n=n||"'".concat(t||"value","' cannot be null or undefined"),new Error(n)}},{key:"expression",value:function(e,t,n,a){if(!1===!!e||!t(e))throw a=a||"'".concat(n||"value","' is not a valid value"),new Error(a)}}]),e}()},219:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(9),r=n(10),o=n(14),i=n(12),s=n(13),c=n(138),l=n(0),u=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).context=void 0,n.deregisterBinding=void 0,n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.context&&this.context.keyboard?this.deregisterBinding=this.context.keyboard.registerBinding(this.props):console.warn("Keyboard Mananger context cannot be found - Keyboard binding has NOT been set.")}},{key:"componentWillUnmount",value:function(){this.deregisterBinding&&this.deregisterBinding()}},{key:"render",value:function(){return null}}]),t}(n.n(l).a.Component);u.contextType=c.b},294:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=294},30:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.SAVE_APP_SETTINGS_SUCCESS="SAVE_APP_SETTINGS_SUCCESS",e.ENSURE_SECURITY_TOKEN_SUCCESS="ENSURE_SECURITY_TOKEN_SUCCESS",e.LOAD_PROJECT_SUCCESS="LOAD_PROJECT_SUCCESS",e.SAVE_PROJECT_SUCCESS="SAVE_PROJECT_SUCCESS",e.DELETE_PROJECT_SUCCESS="DELETE_PROJECT_SUCCESS",e.CLOSE_PROJECT_SUCCESS="CLOSE_PROJECT_SUCCESS",e.LOAD_PROJECT_ASSETS_SUCCESS="LOAD_PROJECT_ASSETS_SUCCESS",e.UPDATE_PROJECT_TAG_SUCCESS="UPDATE_PROJECT_TAG_SUCCESS",e.DELETE_PROJECT_TAG_SUCCESS="DELETE_PROJECT_TAG_SUCCESS",e.LOAD_CONNECTION_SUCCESS="LOAD_CONNECTION_SUCCESS",e.SAVE_CONNECTION_SUCCESS="SAVE_CONNECTION_SUCCESS",e.DELETE_CONNECTION_SUCCESS="DELETE_CONNECTION_SUCCESS",e.SAVE_ASSET_METADATA_SUCCESS="SAVE_ASSET_METADATA_SUCCESS",e.LOAD_ASSET_METADATA_SUCCESS="LOAD_ASSET_METADATA_SUCCESS",e.ANY_OTHER_ACTION="ANY_OTHER_ACTION_SUCCESS",e.SHOW_ERROR="SHOW_ERROR",e.CLEAR_ERROR="CLEAR_ERROR",e.SET_TITLE="SET_TITLE"}(a||(a={}))},300:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return f}));var a=n(9),r=n(10),o=n(14),i=n(12),s=n(13),c=n(0),l=n.n(c),u=n(7),d=n(5),p=n(136),g=n(306);function m(e,t,n){if(!("onunhandledrejection"in window)){if(e instanceof u.a&&e.errorCode===u.e.BlobContainerIONotFound&&t)return;if(e instanceof u.a&&e.errorCode===u.e.BlobContainerIOForbidden&&n)return;window.dispatchEvent(new CustomEvent("unhandledrejectionForEdge",{detail:e}))}}var f=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).onWindowError=function(e){e.preventDefault(),n.handleError(e.error||e.message)},n.onUnhandledRejection=function(e){e.preventDefault(),n.handleError(e.reason)},n.onEdgeUnhandledRejection=function(e){e.preventDefault(),n.handleError(e.detail)},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("error",this.onWindowError),this.registerUnhandledRejectionHandler()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("error",this.onWindowError),this.unregisterUnhandledRejectionHandler()}},{key:"render",value:function(){var e=!!this.props.error,t=null;return e&&(t=this.getLocalizedError(this.props.error)),e?l.a.createElement(p.a,{title:t?t.title:"",message:t?t.message:"",show:e,onClose:this.props.onClearError}):null}},{key:"registerUnhandledRejectionHandler",value:function(){"onunhandledrejection"in window?window.addEventListener("unhandledrejection",this.onUnhandledRejection):window.addEventListener("unhandledrejectionForEdge",this.onEdgeUnhandledRejection)}},{key:"unregisterUnhandledRejectionHandler",value:function(){"onunhandledrejection"in window?window.removeEventListener("unhandledrejection",this.onUnhandledRejection):window.removeEventListener("unhandledrejectionForEdge",this.onEdgeUnhandledRejection)}},{key:"handleError",value:function(e){if(e&&!this.isReactDnDError(e)){var t=null;if("string"===typeof e)t={errorCode:u.e.Unknown,message:e||this.getUnknownErrorMessage(e)};else if(e instanceof u.a){var n=e;t={title:n.title||d.c.errors.unknown.title,errorCode:n.errorCode,message:n.message||this.getUnknownErrorMessage(e)}}else if(e instanceof Error){var a=e;t={title:a.name||d.c.errors.unknown.title,errorCode:u.e.Unknown,message:a.message||this.getUnknownErrorMessage(e)}}else t={title:d.c.errors.unknown.title,errorCode:u.e.Unknown,message:this.getUnknownErrorMessage(e)};this.props.onError(t)}}},{key:"getUnknownErrorMessage",value:function(e){return"production"!==g.a.get()?l.a.createElement("pre",null,JSON.stringify(e,null,2)):d.c.errors.unknown.message}},{key:"getLocalizedError",value:function(e){if(e.errorCode===u.e.Unknown)return e;var t=d.c.errors[e.errorCode];return t?{errorCode:e.errorCode,message:t.message,title:t.title}:e}},{key:"isReactDnDError",value:function(e){return e&&"Invariant Violation"===e.name&&"Expected to find a valid target."===e.message}}]),t}(l.a.Component)},306:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(9),r=n(10),o=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,null,[{key:"get",value:function(){return"production"}}]),e}()},331:function(e){e.exports=JSON.parse('["#CC543A","#7BA23F","#58B2DC","#FFB11B","#2E5C6E","#A96360","#D7C4BB","#8F77B5","#EEA9A9","#24936E","#994639","#BEC23F","#26453D","#FFBA84","#376B6D","#E3916E","#4F726C","#78C2C4","#616138","#2D6D4B","#DAC9A6","#884C3A","#336774","#373C38","#F9BF45","#4A593D","#6A4028","#DDD23B","#8D742A","#211E55","#EB7A77","#A5DEE4","#AF5F3C","#B47157","#B54434","#A8497A","#C73E3A","#0C4842","#BDC0BA","#CB1B45","#6F3381","#867835","#FB9966","#0089A7","#9B6E23","#91AD70","#E87A90","#533D5B","#ADA142","#7D532C","#0D5661","#787878","#828282","#ED784A","#F7C242","#D05A6E","#F8C3CD","#5E3D50","#D7B98E","#E98B2A","#EFBB24","#465D4C","#64363c","#876633","#4E4F97","#FB966E","#A0674B","#8B81C3","#D75455","#D19826","#D9AB42","#9E7A7A","#985F2A","#FFC408","#622954","#A28C37","#5DAC81","#E16B8C","#EBB471","#E8B647","#A35E47","#90B44B","#DDA52D","#CB4042","#6A4C9C","#B9887D","#734338","#227D51","#B17844","#BA9132","#554236","#566C73","#B07736","#B55D4C","#C1328E","#F6C555","#86C166","#563F2E","#0F4C3A","#C99833","#405B55","#96632E","#516E41","#6E75A4","#33A6B8","#66327C","#4B4E2A","#E83015","#6C6024","#9F353A","#C78550","#3A3226","#9A5034","#897D55","#F4A7B9","#6A8372","#C18A26","#F0A986","#60373E","#268785","#572A3F","#B68E55","#FAD689","#656765","#954A45","#0C0C0C","#D9CD90","#AB3B3A","#7DB9DE","#939650","#006284","#F596AA","#F17C67","#74673E","#00AA90","#2B5F75","#4D5139","#855B32","#89916B","#72636E","#1C1C1C","#724832","#77428D","#3F2B36","#43341B","#B35C37","#E2943B","#ECB88A","#F05E1C","#D0104C","#86473F","#A8D8B9","#81C7D4","#967249","#91B493","#F19483","#6C6A2D","#904840","#E79460","#6699A1","#787D7B","#096148","#20604F","#113285","#838A2D","#B481BB","#261E47","#C46243","#080808","#78552B","#F75C2F","#36563C","#7B90D2","#E1A679","#B5495B","#FEDFE1","#005CAF","#CA7A2C","#B19693","#42602D","#77969A","#BC9F77","#535953","#7D6C46","#FBE251","#592C63","#DCB879","#808F7C","#4F4F48","#562E37","#574C57","#00896C","#877F6C","#0B346E","#c1693c","#2EA9DF","#724938","#255359","#A5A051","#FC9F4D","#BF6766","#854836","#3A8FB7","#CA7853","#5B622E","#70649A","#CAAD5F","#577C8A","#8A6BBE","#8E354A","#52433D","#947A6D","#986DB2","#0B1013","#DC9F84","#51A8DD","#86A697","#9B90C2","#F7D94C","#A36336","#707C74","#3C2F41","#82663A","#B28FCE","#434343","#646A58","#B5CAA0","#E9CD4C","#1E88A8","#305A56","#6D2E5B","#B4A582","#DB8E71","#62592C","#91989F","#1B813E","#DB4D6D","#4A225D","#8F5A3C","#66BAB7","#08192D","#E9A368","#B1B479","#6E552F","#C7802D","#0F2540","#69B0AC","#E03C8A"]')},332:function(e,t,n){},35:function(e,t,n){"use strict";n.d(t,"g",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"f",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return v}));var a=n(58),r=Object(a.l)({palette:{themePrimary:"white",themeLighterAlt:"#767676",themeLighter:"#a6a6a6",themeLight:"#c8c8c8",themeTertiary:"#d0d0d0",themeSecondary:"#dadada",themeDarkAlt:"#eaeaea",themeDark:"#f4f4f4",themeDarker:"#f8f8f8",neutralLighterAlt:"#393e43",neutralLighter:"#40454b",neutralLight:"#4c5157",neutralQuaternaryAlt:"#53585f",neutralQuaternary:"#595f65",neutralTertiaryAlt:"#73787f",neutralTertiary:"#dfdfdf",neutralSecondary:"#e4e4e4",neutralPrimaryAlt:"#e9e9e9",neutralPrimary:"#cfcfcf",neutralDark:"#f4f4f4",black:"#f9f9f9",white:"#32363B"}}),o=Object(a.l)({palette:{themePrimary:"#f2635e",themeLighterAlt:"#0a0404",themeLighter:"#27100f",themeLight:"#491e1c",themeTertiary:"#913c39",themeSecondary:"#d55753",themeDarkAlt:"#f4726e",themeDark:"#f58784",themeDarker:"#f8a6a3",neutralLighterAlt:"#262a2f",neutralLighter:"#262a2e",neutralLight:"#24282c",neutralQuaternaryAlt:"#222529",neutralQuaternary:"#202328",neutralTertiaryAlt:"#1f2226",neutralTertiary:"#f0f2f5",neutralSecondary:"#f2f4f6",neutralPrimaryAlt:"#f5f6f8",neutralPrimary:"#e9ecef ",neutralDark:"#fafbfb",black:"#fcfdfd",white:"#272B30"}}),i=Object(a.l)({palette:{themePrimary:"#78ad0e",themeLighterAlt:"#050701",themeLighter:"#131c02",themeLight:"#243404",themeTertiary:"#486808",themeSecondary:"#6a990c",themeDarkAlt:"#83b61f",themeDark:"#94c13a",themeDarker:"#add165",neutralLighterAlt:"#393e43",neutralLighter:"#40454b",neutralLight:"#4c5157",neutralQuaternaryAlt:"#53585f",neutralQuaternary:"#595f65",neutralTertiaryAlt:"#73787f",neutralTertiary:"#dfdfdf",neutralSecondary:"#e4e4e4",neutralPrimaryAlt:"#e9e9e9",neutralPrimary:"#cfcfcf",neutralDark:"#f4f4f4",black:"#f9f9f9",white:"#32363B"}}),s=Object(a.l)({palette:{themePrimary:"#949799",themeLighterAlt:"#060606",themeLighter:"#181818",themeLight:"#2d2d2e",themeTertiary:"#595b5c",themeSecondary:"#838587",themeDarkAlt:"#9fa1a3",themeDark:"#adb0b1",themeDarker:"#c3c4c6",neutralLighterAlt:"#262a2f",neutralLighter:"#262a2e",neutralLight:"#24282c",neutralQuaternaryAlt:"#222529",neutralQuaternary:"#202328",neutralTertiaryAlt:"#1f2226",neutralTertiary:"#f0f2f5",neutralSecondary:"#f2f4f6",neutralPrimaryAlt:"#f5f6f8",neutralPrimary:"#e9ecef",neutralDark:"#fafbfb",black:"#fcfdfd",white:"#272B30"}}),c=Object(a.l)({palette:{themePrimary:"#5bc0de",themeLighterAlt:"#040809",themeLighter:"#0f1f23",themeLight:"#1b3943",themeTertiary:"#377385",themeSecondary:"#50a8c3",themeDarkAlt:"#6ac5e1",themeDark:"#7fcee6",themeDarker:"#9edaec",neutralLighterAlt:"#262a2f",neutralLighter:"#262a2e",neutralLight:"#24282c",neutralQuaternaryAlt:"#222529",neutralQuaternary:"#202328",neutralTertiaryAlt:"#1f2226",neutralTertiary:"#f0f2f5",neutralSecondary:"#f2f4f6",neutralPrimaryAlt:"#f5f6f8",neutralPrimary:"#e9ecef",neutralDark:"#fafbfb",black:"#fcfdfd",white:"#272b30"}}),l=Object(a.l)({palette:{neutralLighterAlt:"#282828",neutralLighter:"#313131",neutralLight:"#3f3f3f",neutralQuaternaryAlt:"#484848",neutralQuaternary:"#4f4f4f",neutralTertiaryAlt:"#6d6d6d",neutralTertiary:"#c8c8c8",neutralSecondary:"#d0d0d0",neutralPrimaryAlt:"#dadada",neutralPrimary:"#ffffff",neutralDark:"#f4f4f4",black:"#f8f8f8",white:"#1f1f1f",themePrimary:"#ffffff",themeLighterAlt:"#020609",themeLighter:"#091823",themeLight:"#112d43",themeTertiary:"#235a85",themeSecondary:"#3385c3",themeDarkAlt:"#4ba0e1",themeDark:"#65aee6",themeDarker:"#8ac2ec",accent:"#3a96dd"}}),u=Object(a.l)({palette:{themePrimary:"#E5E6E6",themeLighterAlt:"#e8e8e8",themeLighter:"#ebebeb",themeLight:"#eeeeee",themeTertiary:"#f1f1f1",themeSecondary:"#f4f4f4",themeDarkAlt:"#f6f6f6",themeDark:"#f9f9f9",themeDarker:"#fcfcfc",neutralLighterAlt:"#26282d",neutralLighter:"#2d3036",neutralLight:"#3a3d43",neutralQuaternaryAlt:"#42454c",neutralQuaternary:"#484c53",neutralTertiaryAlt:"#646870",neutralTertiary:"#eeeeee",neutralSecondary:"#f1f1f1",neutralPrimaryAlt:"#f4f4f4",neutralPrimary:"#E5E6E6",neutralDark:"#f9f9f9",black:"#fcfcfc",white:"#1E2024"}});function d(){return r}function p(){return u}function g(){return o}function m(){return i}function f(){return s}function h(){return c}function v(){return l}},396:function(e){e.exports=JSON.parse('{"name":"oflt","version":"0.1.0","author":{"name":"Microsoft","url":"https://github.com/microsoft/OCR-Form-Tools"},"description":"OCR Form Labeling Tool - an labeling tool for forms.","repository":{"type":"git","url":"https://github.com/microsoft/OCR-Form-Tools"},"license":"MIT","private":true,"main":"build/main.js","dependencies":{"@azure/storage-blob":"10.3.0","axios":"^0.19.0","bootstrap":"^4.4.1","chart.js":"^2.9.3","exif-js":"^2.3.0","lodash":"^4.17.15","office-ui-fabric-react":"^7.86.1","ol":"^5.3.3","rc-align":"^2.4.5","rc-checkbox":"^2.1.8","react":"^16.12.0","react-color":"^2.17.3","react-dom":"^16.12.0","react-jsonschema-form":"^1.3.0","react-localization":"^1.0.15","react-redux":"^7.1.3","react-router-dom":"^5.1.2","react-split-pane":"^0.1.89","react-toastify":"^5.4.1","react-virtualized":"^9.21.2","reactstrap":"^8.2.0","redux":"^4.0.4","redux-thunk":"^2.3.0","serialize-javascript":"^3.0.0","shortid":"^2.2.15","utif":"^3.1.0","vott-react":"^0.2.12"},"scripts":{"start":"nf start -p 3000","compile":"tsc","build":"react-scripts build","react-start":"react-scripts start","test":"react-scripts test --env=jsdom --silent","eject":"react-scripts eject","tslint":"./node_modules/.bin/tslint \'src/**/*.ts*\'","tslintfix":"./node_modules/.bin/tslint \'src/**/*.ts*\' --fix"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not ie <= 11","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@fortawesome/fontawesome-free":"^5.12.0","@types/axios":"^0.14.0","@types/enzyme":"^3.10.4","@types/history":"^4.7.3","@types/jest":"23.3.9","@types/react":"^16.9.15","@types/react-dom":"^16.9.4","@types/react-jsonschema-form":"^1.6.6","@types/react-router-dom":"^5.1.3","@types/react-split-pane":"^0.1.67","@types/react-toastify":"^4.1.0","@types/reactstrap":"^8.2.0","@types/redux-logger":"^3.0.7","acorn":"^7.1.1","enzyme":"^3.10.0","enzyme-adapter-react-16":"^1.15.1","eslint-utils":"^1.4.3","jquery":"^3.4.1","minimist":"^1.2.2","node-sass":"^4.13.0","pdfjs-dist":"2.3.200","react-scripts":"3.1.2","redux-immutable-state-invariant":"^2.1.0","redux-logger":"^3.0.6","redux-mock-store":"^1.5.4","ts-loader":"^6.2.1","tslint":"^5.20.1","typescript":"^3.8.2"},"engines":{"node":">=10.14.2","npm":">=6.4.1"}}')},404:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));var a=n(4),r=n.n(a),o=n(9),i=n(10),s=n(558),c=n(7),l=n(188),u=n(228),d=n(263),p=n(169),g=n(575),m=n(1109),f=n(1110),h=n(19),v=n(5),b=n(300),y=function(){function t(e){var n=this;Object(o.a)(this,t),this.options=e,this.storageType=c.i.Cloud,this.azureBlobStorageErrorHandler=function(e,t,a){var r=n.toAppError(e);throw Object(b.b)(r,t,a),r}}return Object(i.a)(t,[{key:"initialize",value:function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}},{key:"readText",value:function(e,t){var n,a;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,n=this.getBlockBlobURL(e),o.next=4,r.a.awrap(n.download(u.a.none,0));case 4:return a=o.sent,o.next=7,r.a.awrap(this.bodyToString(a));case 7:return o.abrupt("return",o.sent);case 10:o.prev=10,o.t0=o.catch(0),this.azureBlobStorageErrorHandler(o.t0,t);case 13:case"end":return o.stop()}}),null,this,[[0,10]])}},{key:"readBinary",value:function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.a.awrap(this.readText(t));case 3:return n=a.sent,a.abrupt("return",e.from(n));case 7:a.prev=7,a.t0=a.catch(0),this.azureBlobStorageErrorHandler(a.t0);case 10:case"end":return a.stop()}}),null,this,[[0,7]])}},{key:"writeText",value:function(e,t){var n,a;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,n=new d.a(this.options.sas,p.a.newPipeline(this.getCredential())),a=g.a.fromContainerURL(n,e),o.next=5,r.a.awrap(a.upload(u.a.none,t,t.length));case 5:o.next=10;break;case 7:o.prev=7,o.t0=o.catch(0),this.azureBlobStorageErrorHandler(o.t0);case 10:case"end":return o.stop()}}),null,this,[[0,7]])}},{key:"writeBinary",value:function(e,t){try{return this.writeText(e,t)}catch(n){this.azureBlobStorageErrorHandler(n)}}},{key:"deleteFile",value:function(e,t,n){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.a.awrap(this.getBlockBlobURL(e).delete(u.a.none));case 3:a.next=8;break;case 5:a.prev=5,a.t0=a.catch(0),this.azureBlobStorageErrorHandler(a.t0,t,n);case 8:case"end":return a.stop()}}),null,this,[[0,5]])}},{key:"listFiles",value:function(e,t){var n,a,o,i,c,l,g,m,f,h;return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=[],o=new d.a(this.options.sas,p.a.newPipeline(this.getCredential()));case 3:return e.next=5,r.a.awrap(o.listBlobFlatSegment(u.a.none,a));case 5:if((i=e.sent).segment&&i.containerName){e.next=8;break}throw new s.a(404);case 8:for(a=i.nextMarker,c=!0,l=!1,g=void 0,e.prev=12,m=i.segment.blobItems[Symbol.iterator]();!(c=(f=m.next()).done);c=!0)h=f.value,(t&&h.name.endsWith(t)||!t)&&n.push(h.name);e.next=20;break;case 16:e.prev=16,e.t0=e.catch(12),l=!0,g=e.t0;case 20:e.prev=20,e.prev=21,c||null==m.return||m.return();case 23:if(e.prev=23,!l){e.next=26;break}throw g;case 26:return e.finish(23);case 27:return e.finish(20);case 28:if(a){e.next=3;break}case 29:return e.abrupt("return",n);case 32:e.prev=32,e.t1=e.catch(0),this.azureBlobStorageErrorHandler(e.t1);case 35:case"end":return e.stop()}}),null,this,[[0,32],[12,16,20,28],[21,,23,27]])}},{key:"listContainers",value:function(e){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.reject("Not implemented"));case 1:case"end":return e.stop()}}))}},{key:"createContainer",value:function(e){var t;return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new d.a(this.options.sas,p.a.newPipeline(this.getCredential())),e.prev=1,e.next=4,r.a.awrap(t.create(u.a.none));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),409!==e.t0.statusCode){e.next=10;break}return e.abrupt("return");case 10:throw e.t0;case 11:case"end":return e.stop()}}),null,this,[[1,6]])}},{key:"deleteContainer",value:function(e){var t;return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new d.a(this.options.sas,p.a.newPipeline(this.getCredential())),e.next=4,r.a.awrap(t.delete(u.a.none));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.azureBlobStorageErrorHandler(e.t0);case 9:case"end":return e.stop()}}),null,this,[[0,6]])}},{key:"getAssets",value:function(){var e,t,n,a,o,i,s,u,d,p;return r.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,r.a.awrap(this.listFiles(null));case 2:e=g.sent,t=[],n=!0,a=!1,o=void 0,g.prev=7,i=e[Symbol.iterator]();case 9:if(n=(s=i.next()).done){g.next=19;break}return u=s.value,d=this.getUrl(u),g.next=14,r.a.awrap(l.a.createAssetFromFilePath(d,this.getFileName(d)));case 14:p=g.sent,this.isSupportedAssetType(p.type)&&function(){var n=decodeURIComponent("".concat(p.name).concat(h.a.labelFileExtension)),a=decodeURIComponent("".concat(p.name).concat(h.a.ocrFileExtension));e.find((function(e){return e===n}))?p.state=c.b.Tagged:e.find((function(e){return e===a}))?p.state=c.b.Visited:p.state=c.b.NotVisited,t.push(p)}();case 16:n=!0,g.next=9;break;case 19:g.next=25;break;case 21:g.prev=21,g.t0=g.catch(7),a=!0,o=g.t0;case 25:g.prev=25,g.prev=26,n||null==i.return||i.return();case 28:if(g.prev=28,!a){g.next=31;break}throw o;case 31:return g.finish(28);case 32:return g.finish(25);case 33:return g.abrupt("return",t);case 34:case"end":return g.stop()}}),null,this,[[7,21,25,33],[26,,28,32]])}},{key:"getFileName",value:function(e){var t=e.split("/");return t[t.length-1].split("?")[0]}},{key:"isSupportedAssetType",value:function(e){return e===c.c.Image||e===c.c.TIFF||e===c.c.PDF}},{key:"getCredential",value:function(){return this.options.oauthToken?new m.a(this.options.oauthToken):new f.a}},{key:"getBlockBlobURL",value:function(e){var t=new d.a(this.options.sas,p.a.newPipeline(this.getCredential()));return g.a.fromContainerURL(t,e)}},{key:"getUrl",value:function(e){return this.getBlockBlobURL(e).url}},{key:"bodyToString",value:function(e,t){var n;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(e.blobBody);case 2:return n=t.sent,t.abrupt("return",this.blobToString(n));case 4:case"end":return t.stop()}}),null,this)}},{key:"blobToString",value:function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=new FileReader,n.abrupt("return",new Promise((function(n,a){t.onloadend=function(e){n(e.target.result)},t.onerror=a,t.readAsText(e)})));case 2:case"end":return n.stop()}}))}},{key:"toAppError",value:function(e){return 404===e.statusCode?new c.a(c.e.BlobContainerIONotFound,v.c.errors.blobContainerIONotFound.message,v.c.errors.blobContainerIONotFound.title):403===e.statusCode?new c.a(c.e.BlobContainerIOForbidden,v.c.errors.blobContainerIOForbidden.message,v.c.errors.blobContainerIOForbidden.title):e}}]),t}()}).call(this,n(293).Buffer)},406:function(e,t){},428:function(e,t,n){},498:function(e){e.exports=JSON.parse('{"sas":{"ui:widget":"protectedInput"}}')},5:function(e,t,n){"use strict";var a=n(299),r=n(22),o=n(534),i=n.n(o);n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var s=new i.a({en:{appName:"OCR Form Labeling Tool",common:{displayName:"Display name",description:"Description",submit:"Submit",cancel:"Cancel",save:"Save",delete:"Delete",provider:"Provider",homePage:"Home Page",reload:"Reload",skipToMainContent:"Skip to main content",skipToSidebar:"Skip to sidebar"},projectService:{existingLabelFiles:"existing label files"},titleBar:{help:"Help",minimize:"Minimize",maximize:"Maximize",restore:"Restore",close:"Close"},homePage:{title:"Home",newProject:"New Project",openLocalProject:{title:"Open Local Project"},openCloudProject:{title:"Open Cloud Project",selectConnection:"Select a Connection"},recentProjects:"Recent Projects",deleteProject:{title:"Delete Project",confirmation:"Are you sure you want to delete project"},importProject:{title:"Import Project",confirmation:"Are you sure you want to convert project ${project.file.name} project settings to v2 format? We recommend you backup the project file first."},messages:{deleteSuccess:"Successfully deleted ${project.name}"}},appSettings:{title:"Application Settings",storageTitle:"Storage Settings",uiHelp:"Where your settings are stored",save:"Save Settings",securityToken:{name:{title:"Name"},key:{title:"Key"}},securityTokens:{title:"Security Tokens",description:"Security tokens are used to encrypt sensitive data within your project configuration"},version:{description:"Version:"},commit:"Commit SHA",devTools:{description:"Open application developer tools to help diagnose issues",button:"Toggle Developer Tools"},reload:{description:"Reload the app discarding all current changes",button:"Refresh Application"},messages:{saveSuccess:"Successfully saved application settings"}},projectSettings:{title:"Project Settings",securityToken:{title:"Security token",description:"Used to encrypt sensitive data within project files"},save:"Save Project",sourceConnection:{title:"Source connection",description:"Where to load assets from"},targetConnection:{title:"Target Connection",description:"Where to save the project and exported data"},videoSettings:{title:"Video Settings",description:"The rate at which frames are extracted for tagging.",frameExtractionRate:"Frame Extraction Rate (frames per a video second)"},addConnection:"Add Connection",messages:{saveSuccess:"Successfully saved ${project.name} project settings",projectExisted:"A project with name ${project.name} already exists, please use another name."}},train:{title:"Train",training:"Training",pleaseWait:"Please wait",notTrainedYet:"Not trained yet"},predict:{title:"Predict",uploadFile:"Upload file",inProgress:"Prediction in progress..."},projectMetrics:{title:"Project Metrics",assetsSectionTitle:"Assets",totalAssetCount:"Total Assets",visitedAssets:"Visited Assets (${count})",taggedAssets:"Tagged Assets (${count})",nonTaggedAssets:"Not Tagged Assets (${count})",nonVisitedAssets:"Not Visited Assets (${count})",tagsSectionTitle:"Tags & Labels",totalRegionCount:"Total Tagged Regions",totalTagCount:"Total Tags",avgTagCountPerAsset:"Average tags per asset"},tags:{title:"Tags",placeholder:"Add new tag",editor:"Tags Editor",modal:{name:"Tag Name",color:"Tag Color"},colors:{white:"White",gray:"Gray",red:"Red",maroon:"Maroon",yellow:"Yellow",olive:"Olive",lime:"Lime",green:"Green",aqua:"Aqua",teal:"Teal",blue:"Blue",navy:"Navy",fuschia:"Fuschia",purple:"Purple"},warnings:{existingName:"Tag name already exists. Choose another name",emptyName:"Cannot have an empty tag name",unknownTagName:"Unknown"},toolbar:{add:"Add new tag",contextualMenu:"Contextual Menu",delete:"Delete tag",edit:"Edit tag",format:"Select format",moveDown:"Move tag down",moveUp:"Move tag up",lock:"Lock tag",rename:"Rename tag",search:"Search tags",type:"Select type",vertiline:"Vertical line"}},connections:{title:"Connections",details:"Connection Details",settings:"Connection Settings",instructions:"Please select a connection to edit",new:"New Connection",save:"Save Connection",messages:{saveSuccess:"Successfully saved ${connection.name}",deleteSuccess:"Successfully deleted ${connection.name}"},imageCorsWarning:"Warning: When using VoTT in a Web browser, some assets from Bing Image                           Search may not export correctly due to CORS (Cross Origin Resource Sharing) restrictions.",blobCorsWarning:"Warning: CORS (Cross Domain Resource Sharing) must be enabled on the Azure Blob Storage                           account, in order to use it as a source or target connection. More information on                           enabling CORS can be found in the {0}",azDocLinkText:"Azure Documentation.",providers:{azureBlob:{title:"Azure blob container",description:"",accountName:{title:"Account Name",description:""},containerName:{title:"Container Name",description:""},sas:{title:"SAS URI",description:"Shared access signature URI to the blob container"},createContainer:{title:"Create Container",description:"Creates the blob container if it does not already exist"}},bing:{title:"Bing Image Search",options:"Bing Image Search Options",apiKey:"API Key",query:"Query",aspectRatio:{title:"Aspect Ratio",all:"All",square:"Square",wide:"Wide",tall:"Tall"}},local:{title:"Local File System",folderPath:"Folder Path",selectFolder:"Select Folder",chooseFolder:"Choose Folder"}}},editorPage:{title:"Editor",width:"Width",height:"Height",tagged:"Tagged",visited:"Visited",toolbar:{select:"Select (V)",pan:"Pan",drawRectangle:"Draw Rectangle",drawPolygon:"Draw Polygon",copyRectangle:"Copy Rectangle",copy:"Copy Regions",cut:"Cut Regions",paste:"Paste Regions",removeAllRegions:"Remove All Regions",previousAsset:"Previous Asset",nextAsset:"Next Asset",saveProject:"Save Project",exportProject:"Export Project",activeLearning:"Active Learning"},videoPlayer:{previousTaggedFrame:{tooltip:"Previous Tagged Frame"},nextTaggedFrame:{tooltip:"Next Tagged Frame"},previousExpectedFrame:{tooltip:"Previous Frame"},nextExpectedFrame:{tooltip:"Next Frame"}},help:{title:"Toggle Help Menu",escape:"Escape Help Menu"},assetError:"Unable to load asset",tags:{hotKey:{apply:"Apply Tag with Hot Key",lock:"Lock Tag with Hot Key"},rename:{title:"Rename Tag",confirmation:"Are you sure you want to rename this tag? It will be renamed throughout all assets"},delete:{title:"Delete Tag",confirmation:"Are you sure you want to delete this tag? It will be deleted throughout all assets                 and any regions where this is the only tag will also be deleted"}},canvas:{removeAllRegions:{title:"Remove All Regions",confirmation:"Are you sure you want to remove all regions?"}},messages:{enforceTaggedRegions:{title:"Invalid region(s) detected",description:"1 or more regions have not been tagged.  Ensure all regions are tagged before                     continuing to next asset."}}},profile:{settings:"Profile Settings"},errors:{unknown:{title:"Unknown Error",message:"The app encountered an unknown error. Please try again."},projectUploadError:{title:"Error Uploading File",message:"There was an error uploading the file.\n                Please verify the file is of the correct format and try again."},genericRenderError:{title:"Error Loading Application",message:"An error occured while rendering the application. Please try again"},projectInvalidSecurityToken:{title:"Error loading project file",message:"The security token referenced by the project is invalid.\n                Verify that the security token for the project has been set correctly within your application settings"},projectInvalidJson:{title:"Error parsing project file",message:"The selected project files does not contain valid JSON. Please check the file any try again."},projectDeleteError:{title:"Error deleting project",message:"An error occured while deleting the project.\n                Validate the project file and security token exist and try again"},projectNotFound:{title:"Error loading project",message:"We couldn't find the project file ${file} at the target blob container ${container}.             The project file might have been removed from the container,              or the connection settings associated with this project might have changed to a new container where this project doesn't exist."},securityTokenNotFound:{title:"Error loading project file",message:"The security token referenced by the project cannot be found in your current application settings.\n                Verify the security token exists and try to reload the project."},canvasError:{title:"Error loading canvas",message:"There was an error loading the canvas, check the project's assets and try again."},importError:{title:"Error importing V1 project",message:"There was an error importing the V1 project. Check the project file and try again"},pasteRegionTooBigError:{title:"Error pasting region",message:"Region too big for this asset. Try copying another region"},exportFormatNotFound:{title:"Error exporting project",message:"Project is missing export format.  Please select an export format in the export setting page."},activeLearningPredictionError:{title:"Active Learning Error",message:"An error occurred while predicting regions in the current asset.                 Please verify your active learning configuration and try again"},blobContainerIONotFound:{title:"Cannot find blob container/blob",message:"Check if blob container/blob exists in storage account."},blobContainerIOForbidden:{title:"Cannot access blob container/blob",message:"Check if you have unexpired read/write/list/delete permission to blob container/blob."},projectDeleteForbidden:{title:"Error deleting project",message:"Cannot remove ${file} from your Azure storage blob container due to missing delete permission in SAS URI."},projectDeleteNotFound:{title:"Error deleting project",message:"Cannot find ${file} in your Azure storage blob container. Please check if it's already removed."},predictWithoutTrainForbidden:{title:"Prediction Error",message:'We couldn\'t find a trained model. Please go to the "Train" tab and ensure a model is trained.'},missingRequiredFieldInLabelFile:{title:"Error loading label file",message:"Label visualization disabled. Please ensure that both 'document' and 'labels' fields exist and are not empty in label file ${labelFileName}."},noLabelInLabelFile:{title:"Error loading label file",message:"Label visualization disabled. There are no labels in label file ${labelFileName}. This label file cannot be used for training. Consider adding labels for this document."},duplicateFieldKeyInLabelsFile:{title:"Error loading label file",message:"Label visualization disabled. There are duplicate label names in ${labelFileName}. Please correct your label file in Azure storage and ensure all names are unique when trimmed and converted to lower case."},invalidJSONFormat:{title:"Error loading label file",message:"Label visualization disabled. Invalid JSON format in ${labelFileName}. Please correct your label file in Azure storage."},sameLabelInDifferentPageError:{title:"Error loading label file",message:"Label visualization disabled. There are cross-page regions with the same tag ${tagName}. Please correct your label file in Azure storage."},duplicateBoxInLabelFile:{title:"Error loading label file",message:"Label visualization disabled. There are duplicate bounding boxes on page ${page}. Please correct your label file in Azure storage."},endpointConnectionError:{title:"Error connecting to endpoint",message:"Cannot connect to ${endpoint}. Please make sure the network connection is good and specified endpoint is correct."},tooManyRequests:{title:"Too many requests",message:"We've got too many requests in a short period of time. Please try again later."},modelCountLimitExceeded:{title:"Too many models",message:"The number of models associated with the given API key has exceeded the maximum allowed value."}}},es:{appName:"Herramienta de etiquetado de formularios OCR",projectService:{existingLabelFiles:""},common:{displayName:"Nombre para Mostrar",description:"Descripci\xf3n",submit:"Enviar",cancel:"Cancelar",save:"Guardar",delete:"Borrar",provider:"Proveedor",homePage:"P\xe1gina de Inicio",reload:"Recargar",skipToMainContent:"Saltar al contenido principal",skipToSidebar:"Saltar a la barra lateral"},titleBar:{help:"Ayuda",minimize:"Minimizar",maximize:"Maximizar",restore:"Restaurar",close:"Cerrar"},homePage:{title:"P\xe1gina de Inicio",newProject:"Nuevo Proyecto",recentProjects:"Proyectos Recientes",openLocalProject:{title:"Abrir Proyecto Local"},openCloudProject:{title:"Abrir Proyecto de la Nube",selectConnection:"Select a Connection"},deleteProject:{title:"Borrar Proyecto",confirmation:"\xbfEst\xe1 seguro que quiere borrar el proyecto"},importProject:{title:"Importar Proyecto",confirmation:"\xbfEst\xe1 seguro que quiere convertir el proyecto ${project.file.name} a formato v2? Le recomendamos que haga una copia de seguridad de su archivo de proyecto."},messages:{deleteSuccess:"${project.name} eliminado correctamente"}},appSettings:{title:"Configuraci\xf3n de Aplicaci\xf3n",storageTitle:"Configuraci\xf3n de Almacenamiento",uiHelp:"Donde se guardan sus configuraciones",save:"Guardar configuraci\xf3n",securityToken:{name:{title:"Nombre"},key:{title:"Clave"}},securityTokens:{title:"Tokens de seguridad",description:"Los tokens de seguridad se utilizan para cifrar datos confidenciales                 dentro de la configuraci\xf3n del proyecto"},version:{description:"Versi\xf3n:"},commit:"Cometer SHA",devTools:{description:"Abrir herramientas de desarrollo de aplicaciones para ayudar a diagnosticar problemas.",button:"Alternar Herramientas de Desarrollo"},reload:{description:"Recargar la aplicaci\xf3n descartando todos los cambios actuales",button:"Recargar la aplicaci\xf3n"},messages:{saveSuccess:"Configuraci\xf3n de la aplicaci\xf3n guardada correctamente"}},projectSettings:{title:"Configuraci\xf3n de Proyecto",securityToken:{title:"Token de seguridad",description:"Se utiliza para cifrar datos confidenciales dentro de archivos de proyecto"},save:"Guardar el Proyecto",sourceConnection:{title:"Conexi\xf3n de Origen",description:"De donde se gargan sus activos"},targetConnection:{title:"Conexi\xf3n de Destino",description:"Donde se guarda su proyecto y sus datos exportados"},videoSettings:{title:"Ajustes de video",description:"La velocidad a la que se extraen los marcos para el etiquetado.",frameExtractionRate:"Tasa de extracci\xf3n de cuadros (cuadros por segundo de video)"},addConnection:"Agregar Conexi\xf3n",messages:{saveSuccess:"Guardado correctamente ${project.name} configuraci\xf3n del proyecto",projectExisted:"Un proyecto con el nombre ${project.name} ya existe, por favor utilice otro nombre."}},train:{title:"Entrenar",training:"Entrenamiento",pleaseWait:"Por favor espera",notTrainedYet:"A\xfan no entrenado"},predict:{title:"Predecir",uploadFile:"Subir archivo",inProgress:"Predicci\xf3n en progreso ..."},projectMetrics:{title:"M\xe9tricas del proyecto",assetsSectionTitle:"Activos",totalAssetCount:"Total de activos",visitedAssets:"Activos visitados (${count})",taggedAssets:"Activos etiquetados (${count})",nonTaggedAssets:"Activos no etiquetados (${count})",nonVisitedAssets:"Activos no visitados (${count})",tagsSectionTitle:"Etiquetas & etiquetas",totalRegionCount:"Total de regiones",totalTagCount:"Total de etiquetas",avgTagCountPerAsset:"Recuento promedio de etiquetas por activo"},tags:{title:"Etiquetas",placeholder:"Agregar nuevo etiqueta",editor:"Editor de Etiquetas",modal:{name:"Nombre de Etiqueta",color:"Color de Etiqueta"},colors:{white:"Blanco",gray:"Gris",red:"Rojo",maroon:"Granate",yellow:"Amarillo",olive:"Olivo",lime:"Lima",green:"Verde",aqua:"Aqua",teal:"Trullo",blue:"Azul",navy:"Azul Marino",fuschia:"Fuschia",purple:"P\xfarpura"},warnings:{existingName:"Nombre de etiqueta ya existe. Elige otro nombre",emptyName:"El nombre de etiqueta no puede ser vac\xedo",unknownTagName:"Desconocido"},toolbar:{add:"Agregar nueva etiqueta",contextualMenu:"Men\xfa contextual",delete:"Borrar etiqueta",edit:"Editar etiqueta",format:"Seleccionar formato",lock:"Bloquear etiqueta",moveDown:"Mover etiqueta hacia abajo",moveUp:"Mover etiqueta hacia arriba",rename:"Renombrar etiqueta",search:"Buscar entre etiquetas",type:"Seleccione tipo",vertiline:"Linea vertical"}},connections:{title:"Conexiones",new:"Nueva conexi\xf3n",save:"Guardar Conexi\xf3n",details:"Detalles de Conexi\xf3n",settings:"Configuraci\xf3n de Conexi\xf3n",instructions:"Por favor seleccione una conexi\xf3n para editar",messages:{saveSuccess:"${connection.name} guardado correctamente",deleteSuccess:"${connection.name} eliminado correctamente"},imageCorsWarning:"Advertencia: Cuando se usa VoTT en un navegador web, es posible que algunos activos de este                           B\xfasqueda de Im\xe1genes Bing no se exporten correctamente debido a las restricciones de CORS                           (Recursos de Origen Cruzado).",blobCorsWarning:"Advertencia: CORS (Recursos de Origen Cruzado) debe estar habilitado en la                           cuenta de Azure Blob Storage para poder usarlo como una conexi\xf3n de origen o destino. Puede                           encontrar m\xe1s informaci\xf3n sobre c\xf3mo habilitar CORS en la {0}.",azDocLinkText:"documentaci\xf3n de Azure.",providers:{azureBlob:{title:"Azure blob container",description:"",accountName:{title:"Nombre de cuenta",description:""},containerName:{title:"Nombre del contenedor",description:""},sas:{title:"SAS",description:"Firma de acceso compartido utilizada para autenticarse en la cuenta de BLOB Storage"},createContainer:{title:"Crear contenedor",description:"Crea el contenedor de blobs si a\xfan no existe"}},bing:{title:"B\xfasqueda de Im\xe1genes Bing",options:"Opciones de B\xfasqueda de Im\xe1genes Bing",apiKey:"Clave API",query:"Consulta",aspectRatio:{title:"Relaci\xf3n de Aspecto",all:"Todos",square:"Cuadrado",wide:"Ancho",tall:"Alto"}},local:{title:"Sistema de Archivos Local",folderPath:"Ruta de la carpeta",selectFolder:"Seleccionar la carpeta",chooseFolder:"Elijir la carpeta"}}},editorPage:{title:"Editora",width:"Anchura",height:"Altura",tagged:"Etiquetado",visited:"Visitado",toolbar:{select:"Seleccionar",pan:"Pan",drawRectangle:"Dibujar Rect\xe1ngulo",drawPolygon:"Dibujar Pol\xedgono",copyRectangle:"Copia rect\xe1ngulo",copy:"Copiar regiones",cut:"Cortar regiones",paste:"Pegar regiones",removeAllRegions:"Eliminar Todas Las Regiones",previousAsset:"Activo anterior",nextAsset:"Siguiente activo",saveProject:"Guardar Proyecto",exportProject:"Exprtar Proyecto",activeLearning:"Aprendizaje Activo"},videoPlayer:{previousTaggedFrame:{tooltip:"Fotograma etiquetado anterior"},nextTaggedFrame:{tooltip:"Siguiente marco etiquetado"},previousExpectedFrame:{tooltip:"Fotograma anterior"},nextExpectedFrame:{tooltip:"Siguiente marco"}},help:{title:"Abrir/cerrar el men\xfa de ayuda",escape:"Escapar el men\xfa de ayuda"},assetError:"No se puede mostrar el activo",tags:{hotKey:{apply:"Aplicar etiqueta con tecla de acceso r\xe1pido",lock:"Bloquear etiqueta con tecla de acceso r\xe1pido"},rename:{title:"Cambiar el nombre de la etiqueta",confirmation:"\xbfEst\xe1 seguro que quiere cambiar el nombre de esta etiqueta?                 Ser\xe1 cambiada en todos los activos"},delete:{title:"Delete Tag",confirmation:"\xbfEst\xe1 seguro que quiere borrar esta etiqueta? Ser\xe1 borrada en todos                 los activos y en las regiones donde esta etiqueta sea la \xfanica, la region tambi\xe9n ser\xe1 borrada"}},canvas:{removeAllRegions:{title:"Borrar Regiones",confirmation:"\xbfEst\xe1 seguro que quiere borrar todas las regiones?"}},messages:{enforceTaggedRegions:{title:"Las regiones no v\xe1lidas detectadas",description:"1 o m\xe1s regiones no se han etiquetado.                      Por favor, etiquete todas las regiones antes de continuar con el siguiente activo."}}},profile:{settings:"Configuraci\xf3n de Perf\xedl"},errors:{unknown:{title:"Error desconocido",message:"La aplicaci\xf3n cont\xf3 un error desconocido.  Por favor int\xe9ntalo de nuevo."},projectUploadError:{title:"Error al cargar el archivo",message:"Se ha cargado un error al cargar el archivo.\n                Compruebe que el archivo es del tipo correcto e int\xe9ntelo de nuevo."},genericRenderError:{title:"Error desconocido",message:"La aplicaci\xf3n cont\xf3 un error desconocido.  Por favor int\xe9ntalo de nuevo."},projectInvalidSecurityToken:{title:"Error al cargar el archivo de proyecto",message:"Aseg\xfarese de que el token de seguridad del proyecto existe"},projectInvalidJson:{title:"Error al analizar el archivo de proyecto",message:"El archivo de proyecto no es v\xe1lido JSON"},projectDeleteError:{title:"Error al eliminar el proyecto",message:"Se ha producido un error al eliminar el proyecto.\n                Validar el archivo de proyecto y el token de seguridad existen e int\xe9ntelo de nuevo"},projectNotFound:{title:"",message:""},securityTokenNotFound:{title:"Error al cargar el archivo del proyecto",message:"El token de seguridad al que hace referencia el proyecto no se encuentra en la\n                configuraci\xf3n de la aplicaci\xf3n actual. Compruebe que existe el token de seguridad e intente\n                volver a cargar el proyecto."},canvasError:{title:"Error al cargar el lienzo",message:"Se produjo un error al cargar el lienzo, verifique los activos del\n                proyecto y vuelva a intentarlo."},importError:{title:"Error al importar el proyecto V1",message:"Hubo un error al importar el proyecto V1. Revisa el archivo del proyecto y vuelve a intentarlo"},pasteRegionTooBigError:{title:"Error al pegar region al activo",message:"Hubo un error al pagar el region al activo. Intenta copiar otra region"},exportFormatNotFound:{title:"Error exportando proyecto",message:"Proyecto falta el formato de exportaci\xf3n. Seleccione un formato de exportaci\xf3n en la p\xe1gina\n            de configuraci\xf3n de exportaci\xf3n."},activeLearningPredictionError:{title:"Error de aprendizaje",message:"Se ha producido un error al predecir regiones en el activo actual.                 Compruebe la configuraci\xf3n de aprendizaje activa y vuelva a intentarlo"},blobContainerIONotFound:{title:"",message:""},blobContainerIOForbidden:{title:"",message:""},projectDeleteForbidden:{title:"",message:""},projectDeleteNotFound:{title:"",message:""},predictWithoutTrainForbidden:{title:"",message:""},missingRequiredFieldInLabelFile:{title:"",message:""},noLabelInLabelFile:{title:"",message:""},duplicateFieldKeyInLabelsFile:{title:"",message:""},invalidJSONFormat:{title:"",message:""},sameLabelInDifferentPageError:{title:"",message:""},duplicateBoxInLabelFile:{title:"",message:""},endpointConnectionError:{title:"",message:""},tooManyRequests:{title:"",message:""},modelCountLimitExceeded:{title:"",message:""}}}});function c(e){return function(e,t){var n=l(JSON.stringify(e),t);return JSON.parse(n)}(e,{strings:s})}function l(e,t){var n=Object.keys(t),o=Object.values(t);return Object(a.a)(Function,Object(r.a)(n).concat(["return `".concat(e,"`;")])).apply(void 0,Object(r.a)(o))}},500:function(e,t,n){},533:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return T}));var a,r=n(9),o=n(10),i=n(14),s=n(12),c=n(13),l=n(0),u=n.n(l),d=n(44),p=n(77),g=n(91),m=n(47),f=n(7),h=n(5),v=n(535),b=n(300),y=n(138),E=n(541),C=n(563),w=n(574),j=n(554),S=n(555),O=n(556),k=n(92);n(332),n(1091);var T=Object(p.b)((function(e){return{currentProject:e.currentProject,appError:e.appError}}),(function(e){return{actions:Object(d.b)(v,e)}}))(a=function(t){function n(e,t){var a;return Object(r.a)(this,n),(a=Object(i.a)(this,Object(s.a)(n).call(this,e,t))).state={currentProject:a.props.currentProject},a}return Object(c.a)(n,t),Object(o.a)(n,[{key:"componentDidCatch",value:function(e){this.props.actions.showError({errorCode:f.e.GenericRenderError,title:e.name,message:e.message})}},{key:"render",value:function(){var t=e&&e.process?e.process.platform:"web";return u.a.createElement(l.Fragment,null,u.a.createElement(b.a,{error:this.props.appError,onError:this.props.actions.showError,onClearError:this.props.actions.clearError}),(!this.props.appError||this.props.appError.errorCode!==f.e.GenericRenderError)&&u.a.createElement(y.c,null,u.a.createElement(g.a,null,u.a.createElement("div",{className:"app-shell platform-".concat(t)},u.a.createElement(O.a,{icon:"TagGroup"},u.a.createElement("div",{className:"app-help-menu-icon"},u.a.createElement(E.a,null))),u.a.createElement("div",{className:"app-main"},u.a.createElement(w.a,{project:this.props.currentProject}),u.a.createElement(C.a,null)),u.a.createElement(j.a,null,u.a.createElement(S.a,{project:this.props.currentProject})),u.a.createElement(m.a,{className:"frtt-toast-container",role:"alert"}))),u.a.createElement(k.a,{skipTo:"appSidebar"},h.c.common.skipToSidebar)))}}]),n}(u.a.Component))||a}).call(this,n(122))},535:function(e,t,n){"use strict";n.r(t),n.d(t,"showError",(function(){return o})),n.d(t,"clearError",(function(){return i})),n.d(t,"showErrorAction",(function(){return s})),n.d(t,"clearErrorAction",(function(){return c}));var a=n(72),r=n(30);function o(e){return function(t){t(s(e))}}function i(){return function(e){e(c())}}var s=Object(a.b)(r.a.SHOW_ERROR),c=Object(a.a)(r.a.CLEAR_ERROR)},541:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(9),r=n(10),o=n(14),i=n(12),s=n(13),c=n(0),l=n.n(c),u=n(171),d=n(5),p=(n(605),function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).akaMsLink="https://aka.ms/form-recognizer/docs/label",n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("a",{className:"help-menu-button",title:d.c.titleBar.help,href:this.akaMsLink,role:"button",target:"_blank",rel:"noopener noreferrer"},l.a.createElement(u.a,{iconName:"Help"}))}}]),t}(l.a.Component))},554:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(9),r=n(10),o=n(14),i=n(12),s=n(13),c=n(0),l=n.n(c),u=n(171),d=n(201),p=(n(1089),function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"status-bar"},l.a.createElement("div",{className:"status-bar-main"},this.props.children),l.a.createElement("div",{className:"status-bar-version"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(u.a,{iconName:"BranchMerge"}),l.a.createElement("span",null,d.a.version)))))}}]),t}(l.a.Component))},555:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(9),r=n(10),o=n(14),i=n(12),s=n(13),c=n(0),l=n.n(c),u=n(53),d=n.n(u),p=n(171),g=n(7),m=n(5),f=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.project;if(!e)return null;var t=d.a.values(e.assets),n=t.filter((function(e){return e.state===g.b.Visited||e.state===g.b.Tagged})),a=t.filter((function(e){return e.state===g.b.Tagged}));return l.a.createElement("ul",null,l.a.createElement("li",{title:m.c.projectSettings.sourceConnection.title},l.a.createElement(p.a,{iconName:"PlugConnected"}),l.a.createElement("span",{className:"metric-source-connection-name"},e.sourceConnection.name)),l.a.createElement("li",{title:Object(m.b)(m.c.projectMetrics.taggedAssets,{count:a.length})},l.a.createElement(p.a,{iconName:"Tag"}),l.a.createElement("span",{className:"metric-tagged-asset-count"},a.length)),l.a.createElement("li",{title:Object(m.b)(m.c.projectMetrics.visitedAssets,{count:n.length})},l.a.createElement(p.a,{iconName:"View"}),l.a.createElement("span",{className:"metric-visited-asset-count"},n.length)),l.a.createElement("li",{title:"Total Assets (".concat(t.length,")")},l.a.createElement(p.a,{iconName:"TextDocument"}),l.a.createElement("span",{className:"metric-asset-count"},t.length)))}}]),t}(l.a.Component)},556:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var a,r=n(9),o=n(10),i=n(14),s=n(12),c=n(13),l=n(0),u=n.n(l),d=n(77),p=n(171),g=n(139);n(1090);var m=Object(d.b)((function(e){return{title:e.appTitle}}),null)(a=function(t){function n(){var t,a;Object(r.a)(this,n);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(t=Object(s.a)(n)).call.apply(t,[this].concat(c)))).state={platform:e&&e.process&&e.process.platform?e.process.platform:g.b.Web,maximized:!1,fullscreen:!1},a}return Object(c.a)(n,t),Object(o.a)(n,[{key:"render",value:function(){return this.state.fullscreen?null:u.a.createElement("div",{className:"title-bar bg-lighter-3"},this.state.platform===g.b.Web&&u.a.createElement("div",{className:"title-bar-icon"},"string"===typeof this.props.icon&&u.a.createElement(p.a,{iconName:this.props.icon}),"string"!==typeof this.props.icon&&this.props.icon),u.a.createElement("div",{className:"title-bar-main"},this.props.title||"Welcome"),u.a.createElement("div",{className:"title-bar-controls"},this.props.children))}}]),n}(u.a.Component))||a}).call(this,n(122))},558:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(9),r=n(14),o=n(12),i=n(13),s=n(321),c=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(o.a)(t).call(this))).statusCode=void 0,n.statusCode=e,n}return Object(i.a)(t,e),t}(Object(s.a)(Error))},563:function(e,t,n){"use strict";var a={};n.r(a),n.d(a,"loadProject",(function(){return M})),n.d(a,"saveProject",(function(){return U})),n.d(a,"deleteProject",(function(){return V})),n.d(a,"closeProject",(function(){return _})),n.d(a,"loadAssets",(function(){return z})),n.d(a,"loadAssetMetadata",(function(){return K})),n.d(a,"saveAssetMetadata",(function(){return W})),n.d(a,"updateProjectTag",(function(){return H})),n.d(a,"deleteProjectTag",(function(){return q})),n.d(a,"loadProjectAction",(function(){return J})),n.d(a,"closeProjectAction",(function(){return Q})),n.d(a,"saveProjectAction",(function(){return G})),n.d(a,"deleteProjectAction",(function(){return Y})),n.d(a,"loadProjectAssetsAction",(function(){return $})),n.d(a,"loadAssetMetadataAction",(function(){return Z})),n.d(a,"saveAssetMetadataAction",(function(){return X})),n.d(a,"updateProjectTagAction",(function(){return ee})),n.d(a,"deleteProjectTagAction",(function(){return te}));var r={};n.r(r),n.d(r,"saveAppSettings",(function(){return re})),n.d(r,"ensureSecurityToken",(function(){return oe})),n.d(r,"saveAppSettingsAction",(function(){return ie})),n.d(r,"ensureSecurityTokenAction",(function(){return se}));var o={};n.r(o),n.d(o,"setTitle",(function(){return ce})),n.d(o,"setTitleAction",(function(){return le}));var i={};n.r(i),n.d(i,"loadConnection",(function(){return mt})),n.d(i,"saveConnection",(function(){return ft})),n.d(i,"deleteConnection",(function(){return ht})),n.d(i,"loadConnectionAction",(function(){return vt})),n.d(i,"saveConnectionAction",(function(){return bt})),n.d(i,"deleteConnectionAction",(function(){return yt}));var s=n(0),c=n.n(s),l=n(158),u=n(16),d=n(4),p=n.n(d),g=n(9),m=n(10),f=n(14),h=n(12),v=n(13),b=n(77),y=n(44),E=n(171),C=n(5),w=n(35),j=n(253),S=n.n(j),O=n(78),k=n(7),T=n(21),x=n(19),A=n(57),P=n(396),R=n(47),F=n(331),N=function(){function e(){Object(g.a)(this,e)}return Object(m.a)(e,[{key:"load",value:function(e,t){var n,a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return T.a.null(e),r.prev=1,r.next=4,p.a.awrap(Object(A.a)(e,t));case 4:return(n=r.sent).tags||(n.tags=[]),r.abrupt("return",Promise.resolve(Object(u.a)({},n)));case 9:return r.prev=9,r.t0=r.catch(1),a=new k.a(k.e.ProjectInvalidSecurityToken,"Error decrypting project settings"),r.abrupt("return",Promise.reject(a));case 13:case"end":return r.stop()}}),null,null,[[1,9]])}},{key:"save",value:function(e,t){var n;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(T.a.null(e),e.version=P.version,e.id||(e.id=S.a.generate()),n=O.a.createFromConnection(e.sourceConnection),e.tags){a.next=9;break}return a.next=7,p.a.awrap(this.getTagsFromPreExistingLabelFiles(e,n));case 7:return a.next=9,p.a.awrap(this.getTagsFromPreExistingFieldFile(e,n));case 9:if(!e.tags){a.next=12;break}return a.next=12,p.a.awrap(this.saveFieldsFile(e,n));case 12:return e.tags||(e.tags=[]),a.next=15,p.a.awrap(Object(A.d)(e,t));case 15:return e=a.sent,a.next=18,p.a.awrap(n.writeText("".concat(e.name).concat(x.a.projectFileExtension),JSON.stringify(e,null,4)));case 18:return a.abrupt("return",e);case 19:case"end":return a.stop()}}),null,this)}},{key:"delete",value:function(e){var t,n;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return T.a.null(e),t=O.a.createFromConnection(e.sourceConnection),a.prev=2,a.next=5,p.a.awrap(t.deleteFile("".concat(e.name).concat(x.a.projectFileExtension)));case 5:R.b.info(Object(C.b)(C.c.homePage.messages.deleteSuccess,{project:e})),a.next=13;break;case 8:a.prev=8,a.t0=a.catch(2),n="",n=a.t0.errorCode===k.e.BlobContainerIOForbidden?Object(C.b)(C.c.errors.projectDeleteForbidden.message,{file:"".concat(e.name).concat(x.a.projectFileExtension)}):a.t0.errorCode===k.e.BlobContainerIONotFound?Object(C.b)(C.c.errors.projectDeleteNotFound.message,{file:"".concat(e.name).concat(x.a.projectFileExtension)}):C.c.errors.projectDeleteError.message,R.b.error(n,{autoClose:!1});case 13:case"end":return a.stop()}}),null,null,[[2,8]])}},{key:"isDuplicate",value:function(e,t){return void 0!==t.find((function(t){return t.id!==e.id&&t.name===e.name&&JSON.stringify(t.sourceConnection.providerOptions)===JSON.stringify(e.sourceConnection.providerOptions)}))}},{key:"isProjectNameAlreadyUsed",value:function(e){var t,n,a,r,o,i,s;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=O.a.createFromConnection(e.sourceConnection),c.next=3,p.a.awrap(t.listFiles(null,x.a.projectFileExtension));case 3:n=c.sent,a=!0,r=!1,o=void 0,c.prev=7,i=n[Symbol.iterator]();case 9:if(a=(s=i.next()).done){c.next=16;break}if(s.value!=="".concat(e.name).concat(x.a.projectFileExtension)){c.next=13;break}return c.abrupt("return",!0);case 13:a=!0,c.next=9;break;case 16:c.next=22;break;case 18:c.prev=18,c.t0=c.catch(7),r=!0,o=c.t0;case 22:c.prev=22,c.prev=23,a||null==i.return||i.return();case 25:if(c.prev=25,!r){c.next=28;break}throw o;case 28:return c.finish(25);case 29:return c.finish(22);case 30:return c.abrupt("return",!1);case 31:case"end":return c.stop()}}),null,null,[[7,18,22,30],[23,,25,29]])}},{key:"getTagsFromPreExistingLabelFiles",value:function(e,t){var n,a,r,o,i,s,c,l,u,d,g;return p.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return n=[],a=new Set,m.prev=2,m.t0=Set,m.next=6,p.a.awrap(t.listFiles());case 6:m.t1=m.sent,r=new m.t0(m.t1),o=!0,i=!1,s=void 0,m.prev=11,c=r[Symbol.iterator]();case 13:if(o=(l=c.next()).done){m.next=31;break}if(u=l.value,u.substr(0,u.lastIndexOf("/"))!==e.folderPath||!u.endsWith(x.a.labelFileExtension)||!r.has(u.substr(0,u.length-x.a.labelFileExtension.length))){m.next=28;break}return m.prev=17,m.t2=JSON,m.next=21,p.a.awrap(t.readText(u));case 21:m.t3=m.sent,m.t2.parse.call(m.t2,m.t3).labels.forEach((function(e){return a.add(e.label)})),m.next=28;break;case 26:m.prev=26,m.t4=m.catch(17);case 28:o=!0,m.next=13;break;case 31:m.next=37;break;case 33:m.prev=33,m.t5=m.catch(11),i=!0,s=m.t5;case 37:m.prev=37,m.prev=38,o||null==c.return||c.return();case 40:if(m.prev=40,!i){m.next=43;break}throw s;case 43:return m.finish(40);case 44:return m.finish(37);case 45:if(!(d=Array.from(a)).containsDuplicates((function(e){return e}))){m.next=50;break}throw g=Object(C.b)(C.c.errors.duplicateFieldKeyInLabelsFile.message,{labelFileName:C.c.projectService.existingLabelFiles}),R.b.error(g,{autoClose:!1}),new Error("Invalid label file");case 50:d.forEach((function(e,t){n.push({name:e,color:F[t],type:k.g.String,format:k.f.NotSpecified})})),e.tags?e.tags=Object(A.h)(n,e.tags,"name",["color"]):e.tags=n,m.next=56;break;case 54:m.prev=54,m.t6=m.catch(2);case 56:case"end":return m.stop()}}),null,null,[[2,54],[11,33,37,45],[17,26],[38,,40,44]])}},{key:"getTagsFromPreExistingFieldFile",value:function(e,t){var n,a,r,o,i;return p.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n=Object(A.e)("/",e.folderPath,x.a.fieldsFileName),s.prev=1,s.next=4,p.a.awrap(t.readText(n,!0));case 4:a=s.sent,r=JSON.parse(a),o=[],r.fields.forEach((function(e,t){o.push({name:e.fieldKey,color:F[t],type:e.fieldType,format:e.fieldFormat})})),e.tags?e.tags=Object(A.h)(e.tags,o,"name",["type","format"]):e.tags=o,R.b.dismiss(),s.next=15;break;case 12:s.prev=12,s.t0=s.catch(1),s.t0 instanceof SyntaxError&&(i=Object(C.b)(C.c.errors.invalidJSONFormat.message,{fieldFilePath:n}),R.b.error(i,{autoClose:!1}));case 15:case"end":return s.stop()}}),null,null,[[1,12]])}},{key:"saveFieldsFile",value:function(e,t){var n,a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return T.a.null(e),T.a.null(e.tags),n={fields:e.tags.map((function(e){return{fieldKey:e.name,fieldType:e.type?e.type:k.g.String,fieldFormat:e.format?e.format:k.f.NotSpecified}}))},a=Object(A.e)("/",e.folderPath,x.a.fieldsFileName),r.next=6,p.a.awrap(t.writeText(a,JSON.stringify(n,null,4)));case 6:case"end":return r.stop()}}))}}]),e}(),I=n(30),D=n(188),L=n(72),B=n(201);function M(e){return function(t,n){var a,r,o,i;return p.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=n(),r=new N,o=a.appSettings.securityTokens.find((function(t){return t.name===e.securityToken}))){s.next=5;break}throw new k.a(k.e.SecurityTokenNotFound,"Security Token Not Found");case 5:return s.next=7,p.a.awrap(r.load(e,o));case 7:return i=s.sent,t(J(i)),s.abrupt("return",i);case 10:case"end":return s.stop()}}))}}function U(e){return function(t,n){var a,r,o,i;return p.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=n(),!(r=new N).isDuplicate(e,a.recentProjects)){s.next=4;break}throw new k.a(k.e.ProjectDuplicateName,"Project with name '".concat(e.name,"\n                already exists with the same target connection '").concat(e.sourceConnection.name,"'"));case 4:if(o=a.appSettings.securityTokens.find((function(t){return t.name===e.securityToken}))){s.next=7;break}throw new k.a(k.e.SecurityTokenNotFound,"Security Token Not Found");case 7:return s.next=9,p.a.awrap(r.save(e,o));case 9:return i=s.sent,t(G(i)),s.next=13,p.a.awrap(M(i)(t,n));case 13:return s.abrupt("return",i);case 14:case"end":return s.stop()}}))}}function V(e){return function(t,n){var a,r,o,i;return p.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=n(),r=new N,o=a.appSettings.securityTokens.find((function(t){return t.name===e.securityToken}))){s.next=5;break}throw new k.a(k.e.SecurityTokenNotFound,"Security Token Not Found");case 5:return s.next=7,p.a.awrap(r.load(e,o));case 7:return i=s.sent,s.next=10,p.a.awrap(r.delete(i));case 10:t(Y(i));case 11:case"end":return s.stop()}}))}}function _(){return function(e){e({type:I.a.CLOSE_PROJECT_SUCCESS})}}function z(e){return function(t){var n,a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=new D.a(e),r.next=3,p.a.awrap(n.getAssets());case 3:return a=r.sent,t($(a)),r.abrupt("return",a);case 6:case"end":return r.stop()}}))}}function K(e,t){return function(n){var a,r;return p.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a=new D.a(e),o.next=3,p.a.awrap(a.getAssetMetadata(t));case 3:return r=o.sent,n(Z(r)),o.abrupt("return",Object(u.a)({},r));case 6:case"end":return o.stop()}}))}}function W(e,t){var n=Object(u.a)({},t,{version:B.a.version});return function(t){var a,r;return p.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a=new D.a(e),o.next=3,p.a.awrap(a.save(n));case 3:return r=o.sent,t(X(r)),o.abrupt("return",Object(u.a)({},r));case 6:case"end":return o.stop()}}))}}function H(e,t,n){return function(a,r){var o,i,s,c;return p.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(o=[],t.name===n.name){l.next=8;break}return i=new D.a(e),l.next=5,p.a.awrap(i.renameTag(t.name,n.name));case 5:return o=l.sent,l.next=8,p.a.awrap(o.forEachAsync((function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.a.awrap(W(e,t)(a));case 2:case"end":return n.stop()}}))})));case 8:return s=r().currentProject,c=Object(u.a)({},s,{tags:e.tags.map((function(e){return e.name===t.name?Object(u.a)({},n):e}))}),l.next=12,p.a.awrap(U(c)(a,r));case 12:return a(ee(c)),l.abrupt("return",o);case 14:case"end":return l.stop()}}))}}function q(e,t){return function(n,a){var r,o,i,s;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return r=new D.a(e),c.next=3,p.a.awrap(r.deleteTag(t));case 3:return o=c.sent,c.next=6,p.a.awrap(o.forEachAsync((function(t){return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(W(e,t)(n));case 2:case"end":return a.stop()}}))})));case 6:return i=a().currentProject,s=Object(u.a)({},i,{tags:e.tags.filter((function(e){return e.name!==t}))}),c.next=10,p.a.awrap(U(s)(n,a));case 10:return n(te(s)),c.abrupt("return",o);case 12:case"end":return c.stop()}}))}}var J=Object(L.b)(I.a.LOAD_PROJECT_SUCCESS),Q=Object(L.a)(I.a.CLOSE_PROJECT_SUCCESS),G=Object(L.b)(I.a.SAVE_PROJECT_SUCCESS),Y=Object(L.b)(I.a.DELETE_PROJECT_SUCCESS),$=Object(L.b)(I.a.LOAD_PROJECT_ASSETS_SUCCESS),Z=Object(L.b)(I.a.LOAD_ASSET_METADATA_SUCCESS),X=Object(L.b)(I.a.SAVE_ASSET_METADATA_SUCCESS),ee=Object(L.b)(I.a.UPDATE_PROJECT_TAG_SUCCESS),te=Object(L.b)(I.a.DELETE_PROJECT_TAG_SUCCESS),ne=n(22),ae=n(140);function re(e){return function(t){return t(ie(e)),Promise.resolve(e)}}function oe(e){var t=this;return function(n,a){var r,o,i,s,c,l;return p.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(r=a(),!(o=r.appSettings.securityTokens.find((function(t){return t.name===e.securityToken})))){u.next=4;break}return u.abrupt("return",r.appSettings);case 4:return i="".concat(e.name," Token"),s=r.appSettings.securityTokens.filter((function(e){return e.name.startsWith(i)})).length,c=0===s?"":" [".concat(s,"]"),o={name:"".concat(i).concat(c),key:Object(ae.e)()},l={securityTokens:[].concat(Object(ne.a)(r.appSettings.securityTokens),[o])},u.next=11,p.a.awrap(t.saveAppSettings(l));case 11:return e.securityToken=o.name,n(se(l)),u.abrupt("return",l);case 14:case"end":return u.stop()}}))}}var ie=Object(L.b)(I.a.SAVE_APP_SETTINGS_SUCCESS),se=Object(L.b)(I.a.ENSURE_SECURITY_TOKEN_SUCCESS);function ce(e){return function(t){t(le(e))}}var le=Object(L.b)(I.a.SET_TITLE),ue=n(26),de=n(1149),pe=n(1139),ge=n(1140),me=n(1141),fe=n(1142),he=n(91),ve=n(1150),be=n(162),ye=(n(428),function(e){function t(e,n){var a;return Object(g.a)(this,t),(a=Object(f.a)(this,Object(h.a)(t).call(this,e,n))).onItemClick=function(e,t){a.props.onClick&&a.props.onClick(t)},a.onItemDelete=function(e,t){e.stopPropagation(),e.preventDefault(),a.props.onDelete&&a.props.onDelete(t)},a.onItemClick=a.onItemClick.bind(Object(ue.a)(a)),a.onItemDelete=a.onItemDelete.bind(Object(ue.a)(a)),a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,a=t.items,r=t.newLinkTo,o=t.newLinkToTitle,i=t.Component;return c.a.createElement("div",{className:"condensed-list"},c.a.createElement("div",{className:"condensed-list-header bg-darker-2"},c.a.createElement("span",null,n),r&&c.a.createElement(he.b,{to:r,className:"float-right add-button",role:"button",title:o,id:"addConnection"},c.a.createElement(E.a,{iconName:"Add"}))),c.a.createElement("div",{className:"condensed-list-body"},!a&&c.a.createElement("div",{className:"p-3 text-center"},c.a.createElement(ve.a,{size:be.a.small})),a&&0===a.length&&c.a.createElement("div",{className:"p-3 text-center"},"No items found"),a&&a.length>0&&c.a.createElement("ul",{className:"condensed-list-items"},a.map((function(t){return c.a.createElement(i,{key:t.id,item:t,onClick:function(n){return e.onItemClick(n,t)},onDelete:function(n){return e.onItemDelete(n,t)}})})))))}}]),t}(c.a.Component));function Ee(e){var t=e.item,n=e.onClick;return c.a.createElement("li",null,c.a.createElement("a",{className:"condensed-list-item",onClick:n},c.a.createElement("span",{className:"px-2"},t.name)))}var Ce=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).open=n.open.bind(Object(ue.a)(n)),n.close=n.close.bind(Object(ue.a)(n)),n.getInitialState=n.getInitialState.bind(Object(ue.a)(n)),n.ok=n.ok.bind(Object(ue.a)(n)),n.back=n.back.bind(Object(ue.a)(n)),n.connectionList=n.connectionList.bind(Object(ue.a)(n)),n.onClickConnection=n.onClickConnection.bind(Object(ue.a)(n)),n.fileList=n.fileList.bind(Object(ue.a)(n)),n.onClickFile=n.onClickFile.bind(Object(ue.a)(n)),n.state=n.getInitialState(),n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=c.a.createElement("button",{className:"close",onClick:this.close},"\xd7");return c.a.createElement(de.a,{isOpen:this.state.isOpen,centered:!0},c.a.createElement(pe.a,{toggle:this.close,close:e},this.state.modalHeader),c.a.createElement(ge.a,null,this.state.condensedList),c.a.createElement(me.a,null,this.state.selectedFile||"",c.a.createElement(fe.a,{className:"btn btn-success mr-1",onClick:this.ok,disabled:this.state.okDisabled},"Ok"),this.state.backDisabled?c.a.createElement(fe.a,{onClick:this.close},"Close"):c.a.createElement(fe.a,{onClick:this.back},"Go Back")))}},{key:"open",value:function(){this.setState({isOpen:!0})}},{key:"close",value:function(){var e=this;this.setState(this.getInitialState(),(function(){e.props.onCancel&&e.props.onCancel()}))}},{key:"getInitialState",value:function(){return{isOpen:!1,modalHeader:C.c.homePage.openCloudProject.selectConnection,condensedList:this.connectionList(),selectedConnection:null,selectedFile:null,okDisabled:!0,backDisabled:!0}}},{key:"ok",value:function(){var e,t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.state.selectedConnection||!this.state.selectedFile){n.next=6;break}return e=O.a.createFromConnection(this.state.selectedConnection),n.next=4,p.a.awrap(e.readText(this.state.selectedFile));case 4:t=n.sent,this.props.onSubmit(t);case 6:case"end":return n.stop()}}),null,this)}},{key:"back",value:function(){this.setState(Object(u.a)({},this.getInitialState(),{isOpen:!0}))}},{key:"getCondensedList",value:function(e,t,n){return c.a.createElement(ye,{title:e,items:t,Component:Ee,onClick:n})}},{key:"isCloudConnection",value:function(e){try{return O.a.createFromConnection(e).storageType===k.i.Cloud}catch(t){return!1}}},{key:"getCloudConnections",value:function(e){return e.filter(this.isCloudConnection)}},{key:"connectionList",value:function(){var e=this,t=this.getCloudConnections(this.props.connections);return this.getCondensedList("Cloud Connections",t,(function(t){return e.onClickConnection(t)}))}},{key:"onClickConnection",value:function(e){var t,n,a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=Object(u.a)({},e),r.prev=1,r.next=4,p.a.awrap(this.fileList(t));case 4:n=r.sent,this.setState({selectedConnection:t,modalHeader:'Select a file from "'.concat(t.name,'"'),condensedList:n,backDisabled:!1}),r.next=15;break;case 8:if(r.prev=8,r.t0=r.catch(1),!(r.t0 instanceof k.a&&r.t0.errorCode===k.e.BlobContainerIONotFound)){r.next=14;break}return a=Object(C.b)(C.c.errors.blobContainerIONotFound.message,{}),R.b.error(a,{autoClose:!1}),r.abrupt("return");case 14:throw r.t0;case 15:case"end":return r.stop()}}),null,this,[[1,8]])}},{key:"fileList",value:function(e){var t,n,a,r;return p.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=O.a.createFromConnection(e),o.next=3,p.a.awrap(t.listFiles(e.providerOptions.containerName,this.props.fileExtension));case 3:for(n=o.sent,a=[],r=0;r<n.length;r++)a.push({id:"file-".concat(r+1),name:n[r]});return o.abrupt("return",this.getCondensedList("".concat(this.props.fileExtension||"All",' Files in "').concat(e.name,'"'),a,this.onClickFile));case 7:case"end":return o.stop()}}),null,this)}},{key:"onClickFile",value:function(e){var t=e.name;this.setState({selectedFile:t,okDisabled:!1})}}]),t}(c.a.Component),we=n(1108),je=n(1106),Se=n(187),Oe=n(409),ke=n(1105),Te=n(569),xe=function(e){function t(e,n){var a;return Object(g.a)(this,t),(a=Object(f.a)(this,Object(h.a)(t).call(this,e,n))).getMessage=function(e){return"function"===typeof e?e.apply(Object(ue.a)(a),a.state.params):e},a.state={params:null,hideDialog:!0},a.open=a.open.bind(Object(ue.a)(a)),a.close=a.close.bind(Object(ue.a)(a)),a.onConfirmClick=a.onConfirmClick.bind(Object(ue.a)(a)),a.onCancelClick=a.onCancelClick.bind(Object(ue.a)(a)),a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e={settings:{theme:Object(w.b)()},scopedSettings:{}},t=this.props.confirmButtonTheme,n=this.state.hideDialog;return c.a.createElement(we.a,e,!n&&c.a.createElement(je.a,{hidden:n,onDismiss:this.close,dialogContentProps:{type:Se.a.normal,title:this.props.title,subText:this.getMessage(this.props.message)},modalProps:{isBlocking:!0}},c.a.createElement(Oe.a,null,c.a.createElement(ke.a,{theme:t,onClick:this.onConfirmClick,text:this.props.confirmButtonText||"Yes"}),c.a.createElement(Te.a,{onClick:this.onCancelClick,text:this.props.cancelButtonText||"No"}))))}},{key:"open",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.setState({params:t,hideDialog:!1})}},{key:"close",value:function(){this.setState({hideDialog:!0})}},{key:"onConfirmClick",value:function(){this.props.onConfirm.apply(null,this.state.params),this.close()}},{key:"onCancelClick",value:function(){this.props.onCancel&&this.props.onCancel.apply(null,this.state.params),this.close()}}]),t}(c.a.Component),Ae=(n(651),n(1154));n(332);function Pe(e){var t=e.item,n=e.onClick,a=e.onDelete;return c.a.createElement("li",{className:"recent-project-item"},c.a.createElement("a",{className:"condensed-list-item",href:"#",onClick:n,"aria-label":"".concat(t.name," project")},c.a.createElement(E.a,{iconName:"OpenFolderHorizontal"}),c.a.createElement("span",{className:"px-2 ms-Fabric",style:{color:"inherit"}},t.name),c.a.createElement(Ae.a,{className:"float-right app-delete-button",title:C.c.common.delete,onClick:a},c.a.createElement(E.a,{iconName:"Delete",className:"app-delete-icon"}))))}var Re,Fe=n(92);var Ne=Object(b.b)((function(e){return{recentProjects:e.recentProjects,connections:e.connections,appSettings:e.appSettings,project:e.currentProject}}),(function(e){return{actions:Object(y.b)(a,e),applicationActions:Object(y.b)(r,e),appTitleActions:Object(y.b)(o,e)}}))(Re=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={cloudPickerOpen:!1},n.newProjectRef=c.a.createRef(),n.deleteConfirmRef=c.a.createRef(),n.cloudFilePickerRef=c.a.createRef(),n.createNewProject=function(e){n.props.actions.closeProject(),n.props.history.push("/projects/create"),e.preventDefault()},n.handleOpenCloudProjectClick=function(){n.cloudFilePickerRef.current.open()},n.loadSelectedProject=function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(n.props.actions.loadProject(e));case 2:n.props.history.push("/projects/".concat(e.id,"/edit"));case 3:case"end":return t.stop()}}))},n.freshLoadSelectedProject=function(e){var t,a,r,o,i,s;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=n.props.appSettings.securityTokens.find((function(t){return t.name===e.securityToken}))){c.next=3;break}throw new k.a(k.e.SecurityTokenNotFound,"Security Token Not Found");case 3:return c.next=5,p.a.awrap(Object(A.a)(e,t));case 5:return a=c.sent,r=O.a.createFromConnection(a.sourceConnection),c.prev=7,c.prev=8,c.next=11,p.a.awrap(r.readText("".concat(a.name).concat(x.a.projectFileExtension)));case 11:o=c.sent,c.next=23;break;case 14:if(c.prev=14,c.t0=c.catch(8),!(c.t0 instanceof k.a&&c.t0.errorCode===k.e.BlobContainerIONotFound)){c.next=22;break}return c.next=19,p.a.awrap(r.readText("".concat(a.name).concat(x.a.projectFileExtensionOld)));case 19:o=c.sent,c.next=23;break;case 22:throw c.t0;case 23:return i=Object(u.a)({},JSON.parse(o),{sourceConnection:e.sourceConnection}),c.next=26,p.a.awrap(n.loadSelectedProject(i));case 26:c.next=35;break;case 28:if(c.prev=28,c.t1=c.catch(7),!(c.t1 instanceof k.a&&c.t1.errorCode===k.e.BlobContainerIONotFound)){c.next=34;break}return s=Object(C.b)(C.c.errors.projectNotFound.message,{file:"".concat(e.name).concat(x.a.projectFileExtension),container:e.sourceConnection.name}),R.b.error(s,{autoClose:!1}),c.abrupt("return");case 34:throw c.t1;case 35:case"end":return c.stop()}}),null,null,[[7,28],[8,14]])},n.deleteProject=function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(n.props.actions.deleteProject(e));case 2:case"end":return t.stop()}}))},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.appTitleActions.setTitle("Welcome"),this.newProjectRef.current.focus(),document.title=C.c.homePage.title+" - "+C.c.appName;case 3:case"end":return e.stop()}}),null,this)}},{key:"componentDidUpdate",value:function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.newProjectRef.current.focus();case 1:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"app-homepage",id:"pageHome"},c.a.createElement("div",{className:"app-homepage-main"},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("a",{ref:this.newProjectRef,id:"home_newProject",href:"#",onClick:this.createNewProject,className:"p-5 new-project",role:"button"},c.a.createElement(E.a,{iconName:"AddTo",className:"icon-9x"}),c.a.createElement("div",null,C.c.homePage.newProject))),c.a.createElement("li",null,c.a.createElement("a",{href:"#",onClick:this.handleOpenCloudProjectClick,className:"p-5 cloud-open-project",role:"button"},c.a.createElement(E.a,{iconName:"Cloud",className:"icon-9x"}),c.a.createElement("div",null,C.c.homePage.openCloudProject.title)),c.a.createElement(Ce,{ref:this.cloudFilePickerRef,connections:this.props.connections,onSubmit:function(t){return e.loadSelectedProject(JSON.parse(t))},fileExtension:x.a.projectFileExtension})))),this.props.recentProjects&&this.props.recentProjects.length>0&&c.a.createElement("div",{className:"app-homepage-recent bg-lighter-1"},c.a.createElement(ye,{title:C.c.homePage.recentProjects,Component:Pe,items:this.props.recentProjects,onClick:this.freshLoadSelectedProject,onDelete:function(t){return e.deleteConfirmRef.current.open(t)}})),c.a.createElement(xe,{title:"Delete Project",ref:this.deleteConfirmRef,message:function(e){return"".concat(C.c.homePage.deleteProject.confirmation," ").concat(e.name,"?")},confirmButtonTheme:Object(w.f)(),onConfirm:this.deleteProject}),c.a.createElement(Fe.a,{skipTo:"pageHome"},C.c.common.skipToMainContent))}}]),t}(c.a.Component))||Re,Ie=(n(652),n(199)),De=n.n(Ie);function Le(e){return c.a.createElement(s.Fragment,null,e.title,e.description,e.properties.map((function(e){return e.content})))}function Be(e){var t=document.getElementById(e);if(t&&!t.hasAttribute("aria-labelledby")){var n="".concat(e,"_errors");if(document.getElementById(n)){var a=document.createAttribute("aria-labelledby");a.value=n,t.setAttributeNode(a)}}}function Me(e){var t=e.id,n=e.label,a=e.required,r=e.description,o=e.rawErrors,i=e.schema,l=e.uiSchema,u=e.children;Object(s.useEffect)((function(){Be(t)}));var d=[];return"object"===e.schema.type?d.push("object-wrapper"):d.push("form-group"),o&&o.length>0?d.push("is-invalid"):d.push("is-valid"),c.a.createElement("div",{className:d.join(" ")},"array"!==i.type&&("object"!==i.type||"object"===i.type&&l["ui:field"])&&c.a.createElement("label",{htmlFor:t},n,a?"*":null),"array"===i.type&&c.a.createElement(s.Fragment,null,c.a.createElement("h4",null,n),r&&c.a.createElement("small",null,r)),u,"array"!==i.type&&r&&c.a.createElement("small",{className:"text-muted"},r),o&&o.length>0&&c.a.createElement("div",{className:"invalid-feedback",id:t+"_errors"},o.map((function(e,t){return c.a.createElement("p",{key:t},n," ",e)}))))}var Ue=n(568);function Ve(e){var t=Object(s.useState)(!1),n=Object(Ue.a)(t,2),a=n[0],r=n[1];return Object(s.useEffect)((function(){a&&(document.getElementById("addSecurityToken").focus(),r(!1))})),c.a.createElement("div",null,e.canAdd&&c.a.createElement("div",{className:"array-field-toolbar my-3"},c.a.createElement(ke.a,{theme:Object(w.c)(),type:"button",className:"",id:"addSecurityToken",autoFocus:!0,onClick:e.onAddClick},c.a.createElement(E.a,{iconName:"AddTo",className:"mr-2"}),"Add ",e.schema.title)),e.items.map((function(e){return c.a.createElement("div",{className:"form-row",key:e.index},e.children,e.hasRemove&&c.a.createElement("div",{className:"array-item-toolbar"},c.a.createElement("label",{className:"labelClose"},"Delete"),c.a.createElement(ke.a,{theme:Object(w.d)(),type:"button",className:"flex-center",onClick:e.onDropIndexClick(e.index),onClickCapture:function(){return r(!0)}},c.a.createElement(E.a,{iconName:"Delete",className:"mr-2"}),C.c.common.delete)))})))}var _e=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).state={showKey:!1,value:n.props.value||""},n.toggleKeyVisibility=n.toggleKeyVisibility.bind(Object(ue.a)(n)),n.copyKey=n.copyKey.bind(Object(ue.a)(n)),n.onChange=n.onChange.bind(Object(ue.a)(n)),n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.onChange(this.props.value)}},{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&this.setState({value:this.props.value||""})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.readOnly,a=this.state,r=a.showKey,o=a.value;return c.a.createElement("div",{className:"input-group"},c.a.createElement("input",{id:t,type:r?"text":"password",readOnly:n,required:!0,autoComplete:"new-password",className:"form-control",value:o,onChange:this.onChange}),c.a.createElement("div",{className:"input-group-append"},c.a.createElement(Te.a,{className:"portected-input-margin",theme:Object(w.e)(),type:"button",title:r?"Hide":"Show",onClick:this.toggleKeyVisibility},c.a.createElement(E.a,{iconName:r?"Hide3":"View"})),c.a.createElement(Te.a,{theme:Object(w.e)(),type:"button",title:"Copy",onClick:this.copyKey},c.a.createElement(E.a,{iconName:"Copy"}))))}},{key:"onChange",value:function(e){var t=this;this.setState({value:e.target.value},(function(){return t.props.onChange(t.state.value)}))}},{key:"toggleKeyVisibility",value:function(){this.setState({showKey:!this.state.showKey})}},{key:"copyKey",value:function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=navigator.clipboard)||!e.writeText||"function"!==typeof e.writeText){t.next=4;break}return t.next=4,p.a.awrap(e.writeText(this.state.value));case 4:case"end":return t.stop()}}),null,this)}}]),t}(c.a.Component);function ze(e,t){return T.a.null(e),function(n){var a=t?t(n):n;return c.a.createElement(e,a)}}var Ke,We=Object(C.a)(n(874)),He=Object(C.a)(n(875)),qe=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).fields={securityToken:ze(_e,(function(e){return{id:e.idSchema.$id,value:e.formData||Object(ae.e)(),onChange:e.onChange}}))},n.state={formSchema:Object(u.a)({},We),uiSchema:Object(u.a)({},He),appSettings:Object(u.a)({},n.props.appSettings),classNames:["needs-validation"]},n.onFormValidate=n.onFormValidate.bind(Object(ue.a)(n)),n.onFormCancel=n.onFormCancel.bind(Object(ue.a)(n)),n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){e.appSettings!==this.props.appSettings&&this.setState({appSettings:Object(u.a)({},this.props.appSettings)})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"app-settings-page-form p-3"},c.a.createElement("h3",{className:"mb-3 flex-center"},c.a.createElement(E.a,{iconName:"Settings"}),c.a.createElement("span",{className:"px-2"},C.c.appSettings.title)),c.a.createElement("div",{className:"m-3"},c.a.createElement(De.a,{className:this.state.classNames.join(" "),showErrorList:!1,liveValidate:!0,noHtml5Validate:!0,fields:this.fields,ObjectFieldTemplate:Le,FieldTemplate:Me,ArrayFieldTemplate:Ve,validate:this.onFormValidate,schema:this.state.formSchema,uiSchema:this.state.uiSchema,formData:this.state.appSettings,onSubmit:function(t){return e.props.onSubmit(t.formData)}},c.a.createElement("div",null,c.a.createElement(ke.a,{theme:Object(w.d)(),className:"mr-2",type:"submit"},C.c.appSettings.save),c.a.createElement(ke.a,{theme:Object(w.e)(),type:"button",onClick:this.onFormCancel},C.c.common.cancel)))))}},{key:"onFormValidate",value:function(e,t){return-1===this.state.classNames.indexOf("was-validated")&&this.setState({classNames:[].concat(Object(ne.a)(this.state.classNames),["was-validated"])}),t}},{key:"onFormCancel",value:function(){this.props.onCancel&&this.props.onCancel()}}]),t}(c.a.Component);var Je,Qe=Object(b.b)((function(e){return{appSettings:e.appSettings}}),(function(e){return{actions:Object(y.b)(r,e),appTitleActions:Object(y.b)(o,e)}}))(Ke=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).onFormSubmit=n.onFormSubmit.bind(Object(ue.a)(n)),n.onFormCancel=n.onFormCancel.bind(Object(ue.a)(n)),n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.appTitleActions.setTitle(C.c.appSettings.title),document.title=C.c.appSettings.title+" - "+C.c.appName;case 2:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){return c.a.createElement("div",{className:"app-settings-page",id:"pageAppSettings"},c.a.createElement(qe,{appSettings:this.props.appSettings,onSubmit:this.onFormSubmit,onCancel:this.onFormCancel}),c.a.createElement(Fe.a,{skipTo:"pageAppSettings"},C.c.common.skipToMainContent))}},{key:"onFormSubmit",value:function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(this.props.actions.saveAppSettings(e));case 2:R.b.success(C.c.appSettings.messages.saveSuccess),this.props.history.goBack();case 4:case"end":return t.stop()}}),null,this)}},{key:"onFormCancel",value:function(){this.props.history.goBack()}}]),t}(c.a.Component))||Ke,Ge=n(545),Ye=n.n(Ge),$e=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).chartRef=c.a.createRef(),n.chart=void 0,n.componentDidMount=function(){n.chart=n.newChart()},n.componentDidUpdate=function(){n.chart=n.newChart()},n.newChart=function(){return new Ye.a(n.chartRef.current,{type:"horizontalBar",data:n.chartData(),options:n.chartOptions()})},n.chartData=function(){return{labels:n.getLabels(),datasets:[{data:n.getData(),backgroundColor:n.getColor()}]}},n.getLabels=function(){return Object.entries(n.props.accuracies).map((function(e){return e[0]+" ("+n.toPercent(e[1])+"%)"}))},n.getData=function(){return Object.values(n.props.accuracies).map((function(e){return(100*e).toFixed(2)}))},n.getColor=function(){return Object.keys(n.props.accuracies).map((function(e){var t=n.props.projectTags.find((function(t){return e===t.name}));return t?t.color:"#eeeeee"}))},n.chartOptions=function(){return{maintainAspectRatio:!1,legend:{display:!1},title:{display:!0,text:"Accuracy (%)"},scales:{xAxes:[{ticks:{beginAtZero:!0}}],yAxes:[{barThickness:6}]},animation:{easing:"easeInOutCubic"},layout:{padding:20}}},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"train-chart-container"},c.a.createElement("canvas",{ref:this.chartRef,id:"chart-canvas",className:"train-chart"}))}},{key:"toPercent",value:function(e){return(100*e).toFixed(2)}}]),t}(c.a.PureComponent),Ze=function(e){function t(){return Object(g.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement("aside",{className:"mt-3"},c.a.createElement("h5",null," Model information "),c.a.createElement("div",null,c.a.createElement("h6",null," Model ID "),c.a.createElement("p",null,this.props.modelInfo.modelId),c.a.createElement("h6",null," Created date and time"),c.a.createElement("p",null,new Date(this.props.modelInfo.createdDateTime).toLocaleString()),c.a.createElement("h6",null," Average accuracy "),c.a.createElement("p",null,(100*this.props.averageAccuracy).toFixed(2)+"%"),c.a.createElement("div",{className:"accuracy-info"},c.a.createElement("a",{href:"https://aka.ms/form-recognizer/docs/train",target:"_blank",rel:"noopener noreferrer"},c.a.createElement(E.a,{iconName:"Info"}),c.a.createElement("span",null,"Learn more about improving model accuracy.")))))}}]),t}(c.a.Component),Xe=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).renderButton=function(e,t){var a=n.props.viewType===e;return c.a.createElement("button",{className:"btn btn-light "+(a?"active":""),"aria-pressed":a,onClick:function(){return n.props.updateViewTypeCallback(e)}},c.a.createElement("i",{className:"fas "+t}))},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.currTrainRecord;return c.a.createElement("div",{className:"m-3"},c.a.createElement("h4",null," Training record "),c.a.createElement(ke.a,{theme:Object(w.e)(),className:"mt-3 d-none"},c.a.createElement(E.a,{iconName:"Download",className:"mr-2"}),"Download model zip"),e&&c.a.createElement(Ze,{averageAccuracy:e.averageAccuracy,modelInfo:e.modelInfo}))}}]),t}(c.a.Component),et=function(e){function t(){return Object(g.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"train-accuracytable-container"},!this.props.accuracies&&c.a.createElement("table",{className:"accuracytable"},c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("th",null," Train Message "),c.a.createElement("td",null," ",this.props.trainMessage," ")))),this.props.accuracies&&c.a.createElement("table",{className:"accuracytable table-sm"},c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Tag"),c.a.createElement("th",{className:"text-right"},"Estimated Accuracy")),Object.entries(this.props.accuracies).map((function(e){return c.a.createElement("tr",{key:e[0]},c.a.createElement("td",null,e[0]),c.a.createElement("td",{className:"text-right"},(100*e[1]).toFixed(2)+"%"))})))))}}]),t}(c.a.Component),tt=(n(877),n(53)),nt=n.n(tt),at=n(136),rt=n(254),ot=n.n(rt),it=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).onBeforeUnload=function(e){if(n.props.when){var t=n.props.message||"Are you sure you want to leave this page?";return e.returnValue=t,t}},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:window.addEventListener("beforeunload",this.onBeforeUnload);case 1:case"end":return e.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.onBeforeUnload)}},{key:"render",value:function(){return c.a.createElement(l.a,{when:!!this.props.when,message:this.props.message})}}]),t}(c.a.Component),st=n(307),ct=n(257),lt=n.n(ct),ut=function e(){Object(g.a)(this,e)};ut.handleServiceError=function(e){if(e&&e.response){if(401===e.response.status){var t=e.response.data&&e.response.data.error&&e.response.data.error.message||"Please make sure the API key is correct.";throw new k.a(k.e.HttpStatusUnauthorized,t,"Permission Denied")}if(404===e.response.status)throw new k.a(k.e.HttpStatusNotFound,"Please make sure the service endpoint is correct.","Endpoint not found");if(429===e.response.status){var n=e.response,a=k.e.Unknown,r="",o="";throw n.data&&n.data.error&&"1014"===n.data.error.code?(a=k.e.ModelCountLimitExceeded,r=C.c.errors.modelCountLimitExceeded.message,o=C.c.errors.modelCountLimitExceeded.title):(a=k.e.HttpStatusTooManyRequests,r=C.c.errors.tooManyRequests.message,o=C.c.errors.tooManyRequests.title),new k.a(a,r,o)}throw e.response.data&&e.response.data.error&&"1001"===e.response.data.error.code?new k.a(k.e.ModelNotFound,e.response.data.error.message):e.response.data&&e.response.data.error&&e.response.data.error.message?new k.a(k.e.Unknown,e.response.data.error.message):new k.a(k.e.Unknown,"An error occurred in the service. Please try again later.","Error")}throw new k.a(k.e.HttpStatusNotFound,"Cannot resolve the host name. Please make sure the service endpoint is correct.","Endpoint not found")},ut.postWithAutoRetry=function(e,t,n,a){return ut.sendRequestWithAutoRetry((function(){return lt.a.post(e,t,ut.applyApiKey(n,a))}))},ut.getWithAutoRetry=function(e,t,n){return ut.sendRequestWithAutoRetry((function(){return lt.a.get(e,ut.applyApiKey(t,n))}))},ut.applyApiKey=function(e,t){return Object(u.a)({},e,{headers:Object(u.a)({},e.headers,{},t?Object(st.a)({},x.a.apiKeyHeader,t):{})})},ut.sendRequestWithAutoRetry=function(e){var t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:t=0;case 1:return n.prev=2,n.next=5,p.a.awrap(e());case 5:return n.abrupt("return",n.sent);case 8:if(n.prev=8,n.t0=n.catch(2),!(++t>x.a.maxRetry)&&ut.isTransient(n.t0)){n.next=13;break}throw n.t0;case 13:return n.next=15,p.a.awrap(Object(A.b)(x.a.initialRetryInterval*Math.pow(2,t-1)));case 15:n.next=1;break;case 17:case"end":return n.stop()}}),null,null,[[2,8]])},ut.isTransient=function(e){if(e&&e.response){var t=e.response;return(429!==t.status||!t.data||!t.data.error||"1014"!==t.data.error.code)&&[408,429,444,500,503,504].includes(e.response.status)}return!1};var dt=Object(b.b)((function(e){return{appSettings:e.appSettings,project:e.currentProject,connections:e.connections,recentProjects:e.recentProjects}}),(function(e){return{actions:Object(y.b)(a,e),applicationActions:Object(y.b)(r,e),appTitleActions:Object(y.b)(o,e)}}))(Je=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).handleTrainClick=function(){n.setState({isTraining:!0,trainMessage:C.c.train.training}),n.trainProcess().then((function(e){n.setState((function(t,a){return{isTraining:!1,trainMessage:n.getTrainMessage(e),currTrainRecord:n.getProjectTrainRecord()}}))})).catch((function(e){n.setState({isTraining:!1,trainMessage:e.message})}))},n.handleViewTypeClick=function(e){n.setState({viewType:e})},n.buildUpdatedProject=function(e){return Object(u.a)({},n.props.project,{trainRecord:e})},n.getTrainMessage=function(e){return void 0!==e&&void 0!==e.modelInfo&&"ready"===e.modelInfo.status?"Trained successfully":"Training failed"},n.getProjectTrainRecord=function(){return nt.a.get(Object(ue.a)(n),"props.project.trainRecord",null)},n.updateCurrTrainRecord=function(e){n.setState({currTrainRecord:e})},n.parseTrainResult=function(e){return{modelInfo:{modelId:e.modelInfo.modelId,createdDateTime:e.modelInfo.createdDateTime},averageAccuracy:e.trainResult.averageModelAccuracy,accuracies:n.buildAccuracies(e.trainResult.fields)}},n.buildAccuracies=function(e){var t={},n=!0,a=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;t[s.fieldName]=s.accuracy}}catch(c){a=!0,r=c}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return t},n.poll=function(e,t,n){var a=Number(new Date)+(t||1e4);n=n||100;return new Promise((function t(r,o){e().then((function(e){if(e.data.modelInfo&&"ready"===e.data.modelInfo.status)r(e.data);else if(e.data.modelInfo&&"invalid"===e.data.modelInfo.status){var i=nt.a.get(e,"data.trainResult.errors[0].message","Sorry, we got errors while training the model.");o(i)}else Number(new Date)<a?setTimeout(t,n,r,o):o(new Error("Timed out, sorry, it seems the training process took too long."))}))}))},n.state={trainMessage:C.c.train.notTrainedYet,isTraining:!1,currTrainRecord:null,viewType:"tableView",showTrainingFailedWarning:!1,trainingFailedMessage:""},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e,t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e=this.props.match.params.projectId)){n.next=7;break}return t=this.props.recentProjects.find((function(t){return t.id===e})),n.next=5,p.a.awrap(this.props.actions.loadProject(t));case 5:this.props.appTitleActions.setTitle(t.name),this.updateCurrTrainRecord(this.getProjectTrainRecord());case 7:document.title=C.c.train.title+" - "+C.c.appName;case 8:case"end":return n.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.state.currTrainRecord;return c.a.createElement("div",{className:"train-page",id:"pageTrain"},c.a.createElement("main",{className:"train-page-main"},t&&c.a.createElement("div",null,c.a.createElement("h3",null," Train Result "),c.a.createElement("span",null," Model ID: ",t.modelInfo.modelId," ")),"tableView"===this.state.viewType&&c.a.createElement(et,{trainMessage:this.state.trainMessage,accuracies:t&&t.accuracies}),"chartView"===this.state.viewType&&t&&c.a.createElement($e,{accuracies:t.accuracies,modelId:t.modelInfo.modelId,projectTags:this.props.project.tags})),c.a.createElement("div",{className:"train-page-menu bg-lighter-1"},c.a.createElement("div",{className:"condensed-list"},c.a.createElement("div",{className:"condensed-list-body"},c.a.createElement("div",{className:"m-3"},c.a.createElement("h4",{className:"text-shadow-none"}," Train a new model "),this.state.isTraining?c.a.createElement("div",{className:"loading-container"},c.a.createElement(ve.a,{label:"Training in progress...",ariaLive:"assertive",labelPosition:"right",size:be.a.large})):c.a.createElement(ke.a,{id:"train_trainButton",theme:Object(w.d)(),autoFocus:!0,className:"flex-center",onClick:this.handleTrainClick},c.a.createElement(E.a,{iconName:"MachineLearning"}),c.a.createElement("h6",{className:"d-inline text-shadow-none ml-2 mb-0"}," ",C.c.train.title," "))),c.a.createElement("div",{className:this.state.isTraining?"greyOut":""},t&&c.a.createElement(Xe,{currTrainRecord:t,viewType:this.state.viewType,updateViewTypeCallback:this.handleViewTypeClick}))))),c.a.createElement(at.a,{show:this.state.showTrainingFailedWarning,title:"Training Failed",message:this.state.trainingFailedMessage,onClose:function(){return e.setState({showTrainingFailedWarning:!1})}}),c.a.createElement(it,{when:this.state.isTraining,message:"A training operation is currently in progress, are you sure you want to leave?"}),c.a.createElement(Fe.a,{skipTo:"pageTrain"},C.c.common.skipToMainContent))}},{key:"trainProcess",value:function(){var e,t,n;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,p.a.awrap(this.train());case 3:return e=a.sent,a.next=6,p.a.awrap(this.getTrainStatus(e.headers.location));case 6:return t=a.sent,n=this.buildUpdatedProject(this.parseTrainResult(t)),a.next=10,p.a.awrap(this.props.actions.saveProject(n));case 10:return a.abrupt("return",t);case 13:a.prev=13,a.t0=a.catch(0),this.setState({showTrainingFailedWarning:!0,trainingFailedMessage:void 0!==a.t0&&void 0!==a.t0.message?a.t0.message:a.t0});case 16:case"end":return a.stop()}}),null,this,[[0,13]])}},{key:"train",value:function(){var e,t,n,a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=ot.a.resolve(this.props.project.apiUriBase,x.a.apiModelsPath),t=this.props.project.sourceConnection.providerOptions,n=t.sas,a={source:n,sourceFilter:{prefix:this.props.project.folderPath?this.props.project.folderPath:"",includeSubFolders:!1},useLabelFile:!0},r.prev=4,r.next=7,p.a.awrap(ut.postWithAutoRetry(e,a,{},this.props.project.apiKey));case 7:return r.abrupt("return",r.sent);case 10:r.prev=10,r.t0=r.catch(4),ut.handleServiceError(r.t0);case 13:case"end":return r.stop()}}),null,this,[[4,10]])}},{key:"getTrainStatus",value:function(e){var t,n,a=this;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return 1e4,3e5,t=1e4*Object.keys(this.props.project.assets||[]).length,n=this.poll((function(){return ut.getWithAutoRetry(e,{headers:{"cache-control":"no-cache"}},a.props.project.apiKey)}),Math.max(t,3e5),1e3),r.abrupt("return",n);case 5:case"end":return r.stop()}}),null,this)}}]),t}(c.a.Component))||Je,pt=n(183),gt=function(){function e(){Object(g.a)(this,e)}return Object(m.a)(e,[{key:"save",value:function(e){return T.a.null(e),new Promise((function(t,n){var a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,e.id||(e.id=S.a.generate()),!(a=pt.a.createFromConnection(e)).initialize){r.next=6;break}return r.next=6,p.a.awrap(a.initialize());case 6:t(e),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),n(r.t0);case 12:case"end":return r.stop()}}),null,null,[[0,9]])}))}}]),e}();function mt(e){return function(t){return t(vt(e)),Promise.resolve(e)}}function ft(e){return function(t){var n;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=new gt,a.next=3,p.a.awrap(n.save(e));case 3:return t(bt(e)),a.abrupt("return",Promise.resolve(e));case 5:case"end":return a.stop()}}))}}function ht(e){return function(t){return t(yt(e)),Promise.resolve()}}var vt=Object(L.b)(I.a.LOAD_CONNECTION_SUCCESS),bt=Object(L.b)(I.a.SAVE_CONNECTION_SUCCESS),yt=Object(L.b)(I.a.DELETE_CONNECTION_SUCCESS);function Et(e){var t=nt.a.values(O.a.providers),n=nt.a.values(pt.a.providers),a=nt()([]).concat(n).concat(t).uniqBy("name").orderBy("displayName").value();return c.a.createElement("select",{id:e.id,className:"form-control",value:e.value,onChange:function(t){e.onChange(t.target.value)}},c.a.createElement("option",{value:""},"Select Provider"),a.map((function(e){return c.a.createElement("option",{key:e.name,value:e.name},e.displayName)})))}var Ct=n(573),wt=(n(914),n(139)),jt=Object(C.a)(n(915)),St=Object(C.a)(n(916)),Ot=function(e){function t(e,n){var a,r,o;return Object(g.a)(this,t),(a=Object(f.a)(this,Object(h.a)(t).call(this,e,n))).widgets={connectionProviderPicker:Et,protectedInput:_e,checkbox:(r=Ct.a,o=function(e){return{checked:e.value,onChange:function(t){return e.onChange(t.target.checked)},disabled:e.disabled}},T.a.null(r),function(e){var t=o?o(e):e;return c.a.createElement(r,t)})},a.onFormChange=function(e){e.formData.providerType!==a.state.providerName?a.bindForm(e.formData,!0):a.setState({formData:e.formData})},a.state={classNames:["needs-validation"],formSchema:Object(u.a)({},jt),uiSchema:Object(u.a)({},St),providerName:"azureBlobStorage",formData:a.props.connection},a.onFormCancel=a.onFormCancel.bind(Object(ue.a)(a)),a.onFormValidate=a.onFormValidate.bind(Object(ue.a)(a)),a.onFormChange=a.onFormChange.bind(Object(ue.a)(a)),a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.connection&&this.bindForm(this.props.connection),function(e){var t=[];return Object.keys(e).map((function(e){return t.push("root_".concat(e))})),t}(this.state.formSchema.properties).forEach((function(e){Be(e)}))}},{key:"componentDidUpdate",value:function(e){e.connection!==this.props.connection&&this.bindForm(this.props.connection)}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"app-connections-page-detail m-3"},c.a.createElement("h3",null,c.a.createElement(E.a,{iconName:"Plug"}),c.a.createElement("span",{className:"px-2"},C.c.connections.settings)),c.a.createElement("div",{className:"m-3"},Object(wt.d)()&&c.a.createElement("div",{className:"alert alert-warning warning",role:"alert"},c.a.createElement(E.a,{iconName:"WarningSolid",className:"mr-1"}),C.c.formatString(C.c.connections.blobCorsWarning,c.a.createElement("a",{href:"https://aka.ms/blob-cors",target:"_blank",rel:"noopener noreferrer"},C.c.connections.azDocLinkText))),c.a.createElement(De.a,{className:this.state.classNames.join(" "),showErrorList:!1,liveValidate:!0,noHtml5Validate:!0,FieldTemplate:Me,validate:this.onFormValidate,widgets:this.widgets,schema:this.state.formSchema,uiSchema:this.state.uiSchema,formData:this.state.formData,onChange:this.onFormChange,onSubmit:function(t){return e.props.onSubmit(t.formData)}},c.a.createElement("div",null,c.a.createElement(ke.a,{theme:Object(w.d)(),className:"mr-2",type:"submit"},C.c.connections.save),c.a.createElement(ke.a,{theme:Object(w.e)(),type:"button",onClick:this.onFormCancel},C.c.common.cancel)))))}},{key:"onFormValidate",value:function(e,t){return""===e.providerType&&t.providerType.addError("is a required property"),-1===this.state.classNames.indexOf("was-validated")&&this.setState({classNames:[].concat(Object(ne.a)(this.state.classNames),["was-validated"])}),t}},{key:"onFormCancel",value:function(){this.props.onCancel&&this.props.onCancel()}},{key:"bindForm",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e?e.providerType:"",r=this.state.formSchema,o=this.state.uiSchema;if(a){var i=Object(C.a)(n(917)("./".concat(a,".json"))),s=Object(C.a)(n(919)("./".concat(a,".ui.json")));(r=Object(u.a)({},jt)).properties.providerOptions=i,(o=Object(u.a)({},St)).providerOptions=s}else delete(r=Object(u.a)({},jt)).properties.providerOptions,delete(o=Object(u.a)({},St)).providerOptions,t=!0;var c=Object(u.a)({},e);c.providerType=a,t&&(c.providerOptions={}),this.setState({providerName:a,formSchema:r,uiSchema:o,formData:c})}}]),t}(c.a.Component);function kt(e){var t=e.item,n=e.onClick,a=e.onDelete;return c.a.createElement("li",{onClick:n},c.a.createElement(he.c,{className:"condensed-list-item",to:"/connections/".concat(t.id),"aria-label":"".concat(t.name," connection")},c.a.createElement(E.a,{iconName:"Edit"}),c.a.createElement("span",{className:"px-2"},t.name),c.a.createElement(Ae.a,{className:"float-right app-delete-button",title:C.c.common.delete,onClick:a},c.a.createElement(E.a,{iconName:"Delete",className:"app-delete-icon"}))))}var Tt;n(920);var xt=Object(b.b)((function(e){return{connections:e.connections}}),(function(e){return{actions:Object(y.b)(i,e),appTitleActions:Object(y.b)(o,e)}}))(Tt=function(e){function t(e,n){var a;return Object(g.a)(this,t),(a=Object(f.a)(this,Object(h.a)(t).call(this,e,n))).confirmDelete=void 0,a.componentDidUpdate=function(e){var t=e.match.params.connectionId,n=a.props.match.params.connectionId;t!==n&&a.loadConnection(n),document.getElementById("addConnection").focus()},a.onConnectionDelete=function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(a.props.actions.deleteConnection(e));case 2:R.b.info(Object(C.b)(C.c.connections.messages.deleteSuccess,{connection:e})),a.state.connection===e&&(a.props.history.push("/connections"),a.setState({connection:null}));case 4:case"end":return t.stop()}}))},a.onFormSubmit=function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.providerOptions.sas=e.providerOptions.sas.trim(),t.next=4,p.a.awrap(a.props.actions.saveConnection(e));case 4:R.b.success(Object(C.b)(C.c.connections.messages.saveSuccess,{connection:e})),a.props.history.push("/connections"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),alert(t.t0);case 11:case"end":return t.stop()}}),null,null,[[0,8]])},a.state={connection:{id:null,name:null,providerType:"azureBlobStorage",providerOptions:{}}},a.confirmDelete=c.a.createRef(),a.onFormSubmit=a.onFormSubmit.bind(Object(ue.a)(a)),a.onFormCancel=a.onFormCancel.bind(Object(ue.a)(a)),a.onConnectionDelete=a.onConnectionDelete.bind(Object(ue.a)(a)),a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:(e=this.props.match.params.connectionId)&&this.loadConnection(e),this.props.appTitleActions.setTitle(C.c.connections.title),document.title=C.c.connections.title+" - "+C.c.appName,document.getElementById("addConnection").focus();case 5:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"app-connections-page",id:"pageConnections"},c.a.createElement("div",{className:"app-connections-page-list bg-lighter-1"},c.a.createElement(ye,{title:C.c.connections.title,newLinkTo:"/connections/create",newLinkToTitle:C.c.connections.new,onDelete:function(t){return e.confirmDelete.current.open(t)},Component:kt,items:this.props.connections})),c.a.createElement(xe,{ref:this.confirmDelete,title:"Delete Connection",message:function(e){return"Are you sure you want to delete the connection '".concat(e.name,"'?")},confirmButtonTheme:Object(w.f)(),onConfirm:function(t){return e.onConnectionDelete(t)}}),c.a.createElement(l.c,{exact:!0,path:"/connections",render:function(e){return c.a.createElement("div",{className:"app-connections-page-detail m-3"},c.a.createElement("h6",null,C.c.connections.instructions))}}),c.a.createElement(l.c,{exact:!0,path:"/connections/:connectionId",render:function(t){return c.a.createElement(Ot,{connection:e.state.connection,onSubmit:e.onFormSubmit,onCancel:e.onFormCancel})}}),c.a.createElement(Fe.a,{skipTo:"pageConnections"},C.c.common.skipToMainContent))}},{key:"loadConnection",value:function(e){var t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:(t=this.props.connections.find((function(t){return t.id===e})))||(t={id:null,name:null,providerType:"azureBlobStorage",providerOptions:{}}),this.setState({connection:t});case 3:case"end":return n.stop()}}),null,this)}},{key:"onFormCancel",value:function(){this.props.history.push("/connections")}}]),t}(c.a.Component))||Tt,At=n(546),Pt=n(155),Rt=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).image=c.a.createRef(),n.onLoad=function(){n.props.onLoaded&&n.props.onLoaded(n.image.current),n.props.onActivated&&n.props.onActivated(n.image.current),n.props.onDeactivated&&n.props.onDeactivated(n.image.current)},n.state={imageUri:null},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==this.props.asset){t.next=5;break}return t.next=3,p.a.awrap(Object(A.f)(this.props.asset.path));case 3:e=t.sent,this.setState({imageUri:e.toDataURL(x.a.convertedImageFormat,x.a.convertedThumbnailQuality)});case 5:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return c.a.createElement("img",{ref:this.image,src:this.state.imageUri,alt:this.props.asset.name,onLoad:this.onLoad,onError:function(t){e.props.onError(t)},crossOrigin:"anonymous"})}}]),t}(c.a.Component),Ft=n(128),Nt=n.n(Ft);Ft.GlobalWorkerOptions.workerSrc=x.a.pdfjsWorkerSrc(Ft.version);var It=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).image=c.a.createRef(),n.loadPdfFile=function(e){Ft.getDocument(e).promise.then((function(e){n.loadPdfPage(e,1)}),(function(e){n.props.onError&&n.props.onError(e)}))},n.loadPdfPage=function(e,t){e.getPage(t).then((function(e){var t=e.getViewport({scale:1}),a=document.createElement("canvas"),r=a.getContext("2d");a.height=t.height,a.width=t.width;var o={canvasContext:r,viewport:t};e.render(o).promise.then((function(){n.setState({imageUri:a.toDataURL(x.a.convertedImageFormat,x.a.convertedThumbnailQuality)})}))}))},n.onLoad=function(){n.props.onLoaded&&n.props.onLoaded(n.image.current),n.props.onActivated&&n.props.onActivated(n.image.current),n.props.onDeactivated&&n.props.onDeactivated(n.image.current)},n.state={imageUri:""},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){null!=this.props.asset&&this.loadPdfFile(this.props.asset.path)}},{key:"render",value:function(){return c.a.createElement("img",{ref:this.image,src:this.state.imageUri,alt:this.props.asset.name,onLoad:this.onLoad,style:{display:this.state.imageUri?"block":"none"},crossOrigin:"anonymous"})}}]),t}(c.a.Component),Dt=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).image=c.a.createRef(),n.loadTiffFile=function(e){var t,a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.a.awrap(Pt.a.getAssetArray(e));case 2:t=r.sent,a=Object(A.g)(t),n.loadTiffPage(a,1);case 5:case"end":return r.stop()}}))},n.loadTiffPage=function(e,t){var a=e[t-1],r=Object(A.j)(a);n.setState({imageUri:r.toDataURL(x.a.convertedImageFormat,x.a.convertedThumbnailQuality)})},n.onLoad=function(){n.props.onLoaded&&n.props.onLoaded(n.image.current),n.props.onActivated&&n.props.onActivated(n.image.current),n.props.onDeactivated&&n.props.onDeactivated(n.image.current)},n.state={imageUri:""},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){null!=this.props.asset&&this.loadTiffFile(this.props.asset)}},{key:"render",value:function(){return c.a.createElement("img",{ref:this.image,src:this.state.imageUri,alt:this.props.asset.name,onLoad:this.onLoad,style:{display:this.state.imageUri?"block":"none"},crossOrigin:"anonymous"})}}]),t}(c.a.Component),Lt=n(1151),Bt=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).renderAsset=function(){var e=n.props.asset,t=e.parent||e;switch(e.type){case k.c.Image:return c.a.createElement(Rt,{asset:t,onLoaded:n.onAssetLoad,onError:n.onError,onActivated:n.props.onActivated,onDeactivated:n.props.onDeactivated});case k.c.TIFF:return c.a.createElement(Dt,{asset:t,onLoaded:n.onAssetLoad,onError:n.onError,onActivated:n.props.onActivated,onDeactivated:n.props.onDeactivated});case k.c.PDF:return c.a.createElement(It,{asset:t,onLoaded:n.onAssetLoad,onError:n.onError,onActivated:n.props.onActivated,onDeactivated:n.props.onDeactivated});default:return c.a.createElement("div",{className:"asset-error"},C.c.editorPage.assetError)}},n.onAssetLoad=function(e){n.setState({loaded:!0},(function(){n.props.onLoaded&&n.props.onLoaded(e)}))},n.onError=function(e){n.setState({hasError:!0,loaded:!0},(function(){n.props.onError&&n.props.onError(e)}))},n.state={loaded:!1,hasError:!1},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.asset.id!==e.asset.id&&(this.setState({loaded:!1,hasError:!1}),this.props.onAssetChanged&&this.props.onAssetChanged(this.props.asset))}},{key:"render",value:function(){var e=this.state,t=e.loaded,n=e.hasError,a=this.props.asset.size,r=["asset-preview"];return a&&(a.width>a.height?r.push("landscape"):r.push("portrait")),c.a.createElement("div",{className:r.join(" ")},c.a.createElement("div",{className:"asset-preview-container"},!t&&c.a.createElement("div",{className:"asset-loading"},c.a.createElement("div",{className:"asset-loading-spinner"},c.a.createElement(ve.a,{size:be.a.small}))),this.props.asset.isRunningOCR&&c.a.createElement("div",{className:"asset-loading"},c.a.createElement("div",{className:"asset-loading-ocr-spinner"},c.a.createElement(Lt.a,{className:"p-0"}),c.a.createElement(ve.a,{size:be.a.small,label:"Running OCR...",ariaLive:"off",labelPosition:"right"}))),n&&c.a.createElement("div",{className:"asset-error text-danger"},c.a.createElement("i",{className:"fas fa-2x fa-exclamation-circle"}),c.a.createElement("p",{className:"m-2"},C.c.editorPage.assetError)),!n&&this.renderAsset()))}}]),t}(c.a.Component);Bt.defaultProps={asset:null,controlsEnabled:!0};var Mt=n(219),Ut=n(138),Vt=n(120),_t=n(1144),zt=n(55),Kt=n.n(zt),Wt=n(565);n(500);function Ht(e){var t=e.children;return t&&c.a.createElement(Wt.a,e,c.a.createElement("div",{className:"align-portal"},t))}var qt,Jt=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).portalElement=void 0,n.portalElement=document.createElement("div"),n.portalElement.classList.add("align-portal-sticky"),n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){document.body.appendChild(this.portalElement)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.portalElement)}},{key:"render",value:function(){return Kt.a.createPortal(c.a.createElement(Ht,this.props),this.portalElement)}}]),t}(c.a.Component),Qt=n(548),Gt=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).pickerBackground="#252526",n.onChange=function(e){n.props.onEditColor(e.hex)},n.GithubPicker=function(){return c.a.createElement("div",{className:"color-picker-container"},c.a.createElement(Qt.GithubPicker,{color:{hex:n.props.color},onChangeComplete:n.onChange,colors:n.props.colors,width:160,styles:{default:{card:{background:n.pickerBackground}}},triangle:"hide"}))},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.props.show&&this.GithubPicker()}}]),t}(c.a.Component),Yt=(n(1050),function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleMouseEnter=function(){n.props.onLabelEnter(n.props.label)},n.handleMouseLeave=function(){n.props.onLabelLeave(n.props.label)},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"tag-item-label px-2",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this.props.label.value.map((function(e){return e.text})).join(" "))}}]),t}(c.a.Component)),$t=["1","2","3","4","5","6","7","8","9","0","q","w","e","r","t","y","u","i","o","p","a","s","d","f","g","h","j","k","l","z","x","c","v","b","n","m"],Zt=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={isRenaming:!1,isLocked:!1},n.itemRef=c.a.createRef(),n.inputElement=void 0,n.onDropdownClick=function(e){e.stopPropagation();n.props.onClick(n.props.tag,{clickedDropDown:!0})},n.onColorClick=function(e){e.stopPropagation();var t=e.ctrlKey||e.metaKey,a=e.altKey;n.props.onClick(n.props.tag,{ctrlKey:t,altKey:a,clickedColor:!0})},n.onNameClick=function(e){e.stopPropagation();var t=e.ctrlKey||e.metaKey,a=e.altKey;n.props.onClick(n.props.tag,{ctrlKey:t,altKey:a})},n.getItemClassName=function(){var e=["tag-item"];return n.props.isSelected&&e.push("tag-item-selected"),n.props.appliedToSelectedRegions&&e.push("tag-item-applied"),e.join(" ")},n.getTagContent=function(){var e=n.getDisplayIndex();return c.a.createElement("div",{className:"tag-name-container",onMouseEnter:n.handleMouseEnter,onMouseLeave:n.handleMouseLeave},n.isTypeOrFormatSpecified()&&c.a.createElement(E.a,{iconName:"Link",className:"pl-1"}),c.a.createElement("div",{className:"tag-name-body"},n.state.isRenaming?c.a.createElement("input",{ref:n.onInputRef,className:"tag-name-editor ".concat(n.getContentClassName()),type:"text",defaultValue:n.props.tag.name,onKeyDown:function(e){return n.onInputKeyDown(e)},onBlur:n.onInputBlur,autoFocus:!0}):c.a.createElement("span",{title:n.props.tag.name,className:n.getContentClassName()},n.props.tag.name)),c.a.createElement("div",{className:"tag-icons-container"},null!==e?c.a.createElement("span",{className:"tag-index-span border border-white rounded-sm "},e):c.a.createElement("span",{className:"tag-index-span"}),c.a.createElement(Ae.a,{title:C.c.tags.toolbar.contextualMenu,ariaLabel:C.c.tags.toolbar.contextualMenu,className:"tag-input-toolbar-iconbutton ml-2",iconProps:{iconName:"ChevronDown"},onClick:n.onDropdownClick})))},n.renderTagDetail=function(){return n.props.labels.map((function(e,t){return c.a.createElement(Yt,{key:t,label:e,onLabelEnter:n.props.onLabelEnter,onLabelLeave:n.props.onLabelLeave})}))},n.onInputRef=function(e){n.inputElement=e,e&&e.select()},n.onInputBlur=function(e){n.onRenameTag()},n.onInputKeyDown=function(e){"Enter"===e.key?n.inputElement.blur():"Escape"===e.key&&n.setState({isRenaming:!1})},n.getContentClassName=function(){var e=["tag-name-text px-2 pb-1"];return n.isTypeOrFormatSpecified()&&e.push("tag-name-text-typed"),e.join(" ")},n.getDisplayIndex=function(){var e=n.props.index;return e>=0&&e<$t.length?$t[e]:null},n.isTypeOrFormatSpecified=function(){var e=n.props.tag;return e.type&&e.type!==k.g.String||e.format&&e.format!==k.f.NotSpecified},n.handleMouseEnter=function(){var e=n.props.labels;e.length>0&&n.props.onLabelEnter(e[0])},n.handleMouseLeave=function(){var e=n.props.labels;e.length>0&&n.props.onLabelLeave(e[0])},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){e.isRenaming!==this.props.isRenaming&&this.setState({isRenaming:this.props.isRenaming}),e.isLocked!==this.props.isLocked&&this.setState({isLocked:this.props.isLocked})}},{key:"render",value:function(){var e={background:this.props.tag.color};return c.a.createElement("div",{className:"tag-item-block"},c.a.createElement("div",{className:"tag-color",style:e,onClick:this.onColorClick}),c.a.createElement("div",{className:"tag-item-block-2"},this.props.tag&&c.a.createElement("div",{ref:this.itemRef,className:this.getItemClassName(),style:e},c.a.createElement("div",{className:"tag-content pr-2",onClick:this.onNameClick},this.getTagContent()),this.state.isLocked&&c.a.createElement("div",null)),this.renderTagDetail()))}},{key:"getTagNameRef",value:function(){return this.itemRef}},{key:"onRenameTag",value:function(){var e=this;if(this.inputElement){var t=this.props.tag,n=this.inputElement.value.trim();this.props.onRename(t,n,(function(){e.setState({isRenaming:!1})}))}}}]),t}(c.a.Component);!function(e){e[e.General=0]="General",e[e.Separator=1]="Separator",e[e.Modifier=2]="Modifier"}(qt||(qt={}));var Xt,en,tn=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).getToolbarItems=function(){return[{displayName:C.c.tags.toolbar.add,icon:"Add",category:qt.General,handler:n.handleAdd},{displayName:C.c.tags.toolbar.search,icon:"Search",category:qt.General,handler:n.handleSearch},{displayName:C.c.tags.toolbar.vertiline,category:qt.Separator},{displayName:C.c.tags.toolbar.rename,icon:"Rename",category:qt.Modifier,handler:n.handleRename},{displayName:C.c.tags.toolbar.moveUp,icon:"Up",category:qt.Modifier,handler:n.handleMoveUp},{displayName:C.c.tags.toolbar.moveDown,icon:"Down",category:qt.Modifier,handler:n.handleMoveDown},{displayName:C.c.tags.toolbar.delete,icon:"Delete",category:qt.Modifier,handler:n.handleDelete}]},n.renderItems=function(){var e=!n.props.selectedTag,t=["tag-input-toolbar-iconbutton"];e&&t.push("tag-input-toolbar-iconbutton-disabled");var a=t.join(" ");return n.getToolbarItems().map((function(t,r){if(t.category===qt.General)return c.a.createElement(Ae.a,{key:t.displayName,title:t.displayName,ariaLabel:t.displayName,className:"tag-input-toolbar-iconbutton",iconProps:{iconName:t.icon},autoFocus:!r,onClick:function(e){return n.onToolbarItemClick(e,t)}});if(t.category===qt.Separator)return c.a.createElement("div",{className:"tag-input-toolbar-separator",key:t.displayName});if(t.category===qt.Modifier)return c.a.createElement(Ae.a,{key:t.displayName,disabled:e,title:t.displayName,ariaLabel:t.displayName,className:a,iconProps:{iconName:t.icon},onClick:function(e){return n.onToolbarItemClick(e,t)}});throw new Error("Unsupported item category ".concat(t.category))}))},n.onToolbarItemClick=function(e,t){e.stopPropagation(),t.handler()},n.handleAdd=function(){n.props.onAddTags()},n.handleSearch=function(){n.props.onSearchTags()},n.handleRename=function(){n.props.selectedTag&&n.props.onRenameTag(n.props.selectedTag)},n.handleMoveUp=function(){n.props.selectedTag&&n.props.onReorder(n.props.selectedTag,-1)},n.handleMoveDown=function(){n.props.selectedTag&&n.props.onReorder(n.props.selectedTag,1)},n.handleDelete=function(){n.props.selectedTag&&n.props.onDelete(n.props.selectedTag)},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"tag-input-toolbar"},this.renderItems())}}]),t}(c.a.Component),nn=n(331);function an(e,t){return e.trim().toLocaleLowerCase()===t.trim().toLocaleLowerCase()}!function(e){e.Delete="delete",e.MoveUp="moveup",e.MoveDown="movedown",e.Rename="rename"}(Xt||(Xt={})),function(e){e[e.None=0]="None",e[e.ColorPicker=1]="ColorPicker",e[e.ContextualMenu=2]="ContextualMenu",e[e.Rename=3]="Rename"}(en||(en={}));var rn,on=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={tags:n.props.tags||[],tagOperation:en.None,addTags:n.props.showTagInputBox,searchTags:n.props.showSearchBox,searchQuery:"",selectedTag:null},n.tagItemRefs=new Map,n.headerRef=c.a.createRef(),n.inputRef=c.a.createRef(),n.onRenameTag=function(e){var t=n.state.tagOperation===en.Rename?en.None:en.Rename;n.setState({tagOperation:t})},n.onLockTag=function(e){if(e){var t=Object(ne.a)(n.props.lockedTags);t.find((function(t){return an(e.name,t)}))?t=t.filter((function(t){return!an(e.name,t)})):t.push(e.name),n.props.onLockedTagsChange(t)}},n.onReOrder=function(e,t){if(e){var a=Object(ne.a)(n.state.tags),r=a.indexOf(e),o=r+t;o<0||o>=a.length||(a.splice(r,1),a.splice(o,0,e),n.setState({tags:a},(function(){return n.props.onChange(a)})))}},n.handleColorChange=function(e){var t=n.state.selectedTag,a=n.state.tags.map((function(n){return an(n.name,t.name)?Object(u.a)({},t,{color:e}):n}));n.setState({tags:a,tagOperation:en.None},(function(){return n.props.onChange(a)}))},n.addTag=function(e){try{n.validateTagLength(e),n.validateTagUniqness(e,n.state.tags)}catch(a){return void R.b.warn(a.toString())}var t=[].concat(Object(ne.a)(n.state.tags),[e]);n.setState({tags:t},(function(){return n.props.onChange(t)}))},n.onTagRename=function(e,t,a){var r=function(){a(),n.setState({tagOperation:en.None})};if(an(e.name,t))r();else{var o=Object(u.a)({},e,{name:t});try{var i=n.state.tags.filter((function(t){return!an(t.name,e.name)}));n.validateTagLength(o),n.validateTagUniqness(o,i)}catch(s){return void R.b.warn(s.toString())}n.props.onTagRename&&n.props.onTagRename(e,o,r)}},n.onDeleteTag=function(e){e&&n.props.onTagDeleted(e.name)},n.getColorPickerPortal=function(){var e=n.state.selectedTag,t=n.state.tagOperation===en.ColorPicker;return c.a.createElement(Jt,{align:{points:["tr","tl"]},target:function(){return n.headerRef.current}},c.a.createElement("div",{className:"tag-input-colorpicker-container"},t&&c.a.createElement(Gt,{color:e&&e.color,colors:nn,onEditColor:n.handleColorChange,show:t})))},n.renderTagItems=function(){var e=n.createTagItemProps(),t=n.state.searchQuery;return n.tagItemRefs.clear(),t.length&&(e=e.filter((function(e){return e.tag.name.toLowerCase().includes(t.toLowerCase())}))),e.map((function(e){return c.a.createElement(Zt,Object.assign({},e,{key:e.tag.name,labels:n.setTagLabels(e.tag.name),ref:function(t){return n.setTagItemRef(t,e.tag)},onLabelEnter:n.props.onLabelEnter,onLabelLeave:n.props.onLabelLeave,onTagChanged:n.props.onTagChanged}))}))},n.setTagItemRef=function(e,t){return n.tagItemRefs.set(t.name,e),e},n.setTagLabels=function(e){return n.props.labels.filter((function(t){return t.label===e}))},n.createTagItemProps=function(){var e=n.state,t=e.tags,a=e.selectedTag,r=e.tagOperation,o=n.getSelectedRegionTagSet();return t.map((function(e){return{tag:e,index:t.findIndex((function(t){return an(t.name,e.name)})),isLocked:n.props.lockedTags&&n.props.lockedTags.findIndex((function(t){return an(e.name,t)}))>-1,isRenaming:a&&an(a.name,e.name)&&r===en.Rename,isSelected:a&&an(a.name,e.name),appliedToSelectedRegions:o.has(e.name),onClick:n.onTagItemClick,onRename:n.onTagRename}}))},n.getSelectedRegionTagSet=function(){var e=new Set;if(n.props.selectedRegions){var t=!0,a=!1,r=void 0;try{for(var o,i=n.props.selectedRegions[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value,c=!0,l=!1,u=void 0;try{for(var d,p=s.tags[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var g=d.value;e.add(g)}}catch(m){l=!0,u=m}finally{try{c||null==p.return||p.return()}finally{if(l)throw u}}}}catch(m){a=!0,r=m}finally{try{t||null==i.return||i.return()}finally{if(a)throw r}}}return e},n.onTagItemClick=function(e,t){if(t.ctrlKey&&n.props.onCtrlTagClick)n.props.onCtrlTagClick(e);else if(t.altKey)n.setState({selectedTag:e,tagOperation:en.Rename});else if(t.clickedDropDown){var a=n.state.selectedTag,r=!a||!an(a.name,e.name)||n.state.tagOperation!==en.ContextualMenu?en.ContextualMenu:en.None;n.setState({selectedTag:e,tagOperation:r})}else if(t.clickedColor){var o=n.state,i=o.selectedTag,s=o.tagOperation!==en.ColorPicker,c=s?en.ColorPicker:en.None;n.setState({selectedTag:s?e:i,tagOperation:c})}else{var l=n.state,u=l.selectedTag,d=l.tagOperation,p=u&&an(u.name,e.name),g=p?d:en.None,m=p&&d===en.None;n.props.selectedRegions&&n.props.selectedRegions.length>0&&n.props.onTagClick&&(m=!1,n.props.onTagClick(e)),n.setState({selectedTag:m?null:e,tagOperation:g})}},n.onSearchKeyDown=function(e){"Escape"===e.key&&n.setState({searchTags:!1})},n.onAddTagKeyDown=function(e){"Enter"===e.key&&(n.creatTagInput(e.target.value.trim()),e.target.value=""),"Escape"===e.key&&n.setState({addTags:!1})},n.onAddTagWithBlur=function(e){e.target.value&&(n.creatTagInput(e.target.value.trim()),e.target.value="")},n.creatTagInput=function(e){var t={name:e,color:n.getNextColor(),type:k.g.String,format:k.f.NotSpecified};t.name.length&&![].concat(Object(ne.a)(n.state.tags),[t]).containsDuplicates((function(e){return e.name}))?n.addTag(t):t.name.length?R.b.warn(C.c.tags.warnings.existingName):R.b.warn(C.c.tags.warnings.emptyName)},n.getNextColor=function(){var e=n.state.tags,t=!0,a=!1,r=void 0;try{for(var o,i=nn[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value,c=!0,l=!0,u=!1,d=void 0;try{for(var p,g=e[Symbol.iterator]();!(l=(p=g.next()).done);l=!0){var m=p.value;if(s.toLowerCase()===m.color.toLowerCase()){c=!1;break}}}catch(f){u=!0,d=f}finally{try{l||null==g.return||g.return()}finally{if(u)throw d}}if(c)return s}}catch(f){a=!0,r=f}finally{try{t||null==i.return||i.return()}finally{if(a)throw r}}return nn[Object(A.i)(0,nn.length-1)]},n.validateTagLength=function(e){if(!e.name.trim().length)throw new Error(C.c.tags.warnings.emptyName);if(e.name.length>=128)throw new Error("Tag name is too long (>= 128).")},n.validateTagUniqness=function(e,t){if(t.some((function(t){return an(t.name,e.name)})))throw new Error(C.c.tags.warnings.existingName)},n.onHideContextualMenu=function(){n.setState({tagOperation:en.None})},n.getContextualMenuItems=function(){var e=n.state.selectedTag;return e?[{key:"type",iconProps:{iconName:"Link"},text:e.type?e.type:C.c.tags.toolbar.type,subMenuProps:{items:n.getTypeSubMenuItems()}},{key:"format",iconProps:{iconName:"Link"},text:e.format?e.format:C.c.tags.toolbar.format,subMenuProps:{items:n.getFormatSubMenuItems()}},{key:"divider_1",itemType:Vt.a.Divider},{key:Xt.Rename,iconProps:{iconName:"Rename"},text:C.c.tags.toolbar.rename,onClick:n.onMenuItemClick},{key:Xt.MoveUp,iconProps:{iconName:"Up"},text:C.c.tags.toolbar.moveUp,onClick:n.onMenuItemClick},{key:Xt.MoveDown,iconProps:{iconName:"Down"},text:C.c.tags.toolbar.moveDown,onClick:n.onMenuItemClick},{key:Xt.Delete,iconProps:{iconName:"Delete"},text:C.c.tags.toolbar.delete,onClick:n.onMenuItemClick}]:[]},n.getTypeSubMenuItems=function(){var e=n.state.selectedTag;return Object.values(k.g).map((function(t){return{key:t,text:t,canCheck:!0,isChecked:t===e.type,onClick:n.onTypeSelect}}))},n.getFormatSubMenuItems=function(){var e=n.state.selectedTag;return function(e){switch(e){case k.g.String:return[k.f.NotSpecified,k.f.Alphanumeric,k.f.NoWhiteSpaces];case k.g.Number:return[k.f.NotSpecified,k.f.Currency];case k.g.Integer:return[k.f.NotSpecified];case k.g.Date:return[k.f.NotSpecified,k.f.DMY,k.f.MDY,k.f.YMD];case k.g.Time:default:return[k.f.NotSpecified]}}(e.type).map((function(t){return{key:t,text:t,canCheck:!0,isChecked:t===e.format,onClick:n.onFormatSelect}}))},n.onTypeSelect=function(e,t){e.preventDefault();var a=t.text,r=n.state.selectedTag;if(a!==r.type){var o=Object(u.a)({},r,{type:a,format:k.f.NotSpecified});n.props.onTagChanged&&n.props.onTagChanged(r,o)}},n.onFormatSelect=function(e,t){e.preventDefault();var a=t.text,r=n.state.selectedTag;if(a!==r.format){var o=Object(u.a)({},r,{format:a});n.props.onTagChanged&&n.props.onTagChanged(r,o)}},n.onMenuItemClick=function(e,t){e.preventDefault();var a=n.state.selectedTag;if(a)switch(t.key){case Xt.MoveDown:n.onReOrder(a,1);break;case Xt.MoveUp:n.onReOrder(a,-1);break;case Xt.Rename:n.onRenameTag(a);break;case Xt.Delete:n.onDeleteTag(a)}},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){if(e.tags!==this.props.tags){var t=this.state.selectedTag;t&&(t=this.props.tags.find((function(e){return an(e.name,t.name)}))),this.setState({tags:this.props.tags,selectedTag:t})}e.selectedRegions!==this.props.selectedRegions&&this.props.selectedRegions.length>0&&this.setState({selectedTag:null})}},{key:"render",value:function(){var e=this,t={settings:{theme:Object(w.b)()},scopedSettings:{}},n=this.state,a=n.selectedTag,r=n.tagOperation,o=a?this.tagItemRefs.get(a.name).getTagNameRef():null;return c.a.createElement("div",{className:"tag-input"},c.a.createElement("div",{ref:this.headerRef,className:"tag-input-header p-2"},c.a.createElement("span",{className:"tag-input-title"},C.c.tags.title),c.a.createElement(tn,{selectedTag:this.state.selectedTag,onAddTags:function(){return e.setState({addTags:!e.state.addTags})},onSearchTags:function(){return e.setState({searchTags:!e.state.searchTags,searchQuery:""})},onRenameTag:this.onRenameTag,onLockTag:this.onLockTag,onDelete:this.onDeleteTag,onReorder:this.onReOrder})),c.a.createElement("div",{className:"tag-input-body-container"},c.a.createElement("div",{className:"tag-input-body"},this.state.searchTags&&c.a.createElement("div",{className:"tag-input-text-input-row search-input"},c.a.createElement("input",{className:"tag-search-box",type:"text",onKeyDown:this.onSearchKeyDown,onChange:function(t){return e.setState({searchQuery:t.target.value})},placeholder:"Search tags",autoFocus:!0}),c.a.createElement(E.a,{iconName:"Search"})),c.a.createElement("div",{className:"tag-input-items"},this.renderTagItems(),c.a.createElement(we.a,t,r===en.ContextualMenu&&o&&c.a.createElement(_t.a,{className:"tag-input-contextual-menu",items:this.getContextualMenuItems(),target:o,onDismiss:this.onHideContextualMenu})),this.getColorPickerPortal()),this.state.addTags&&c.a.createElement("div",{className:"tag-input-text-input-row new-tag-input"},c.a.createElement("input",{className:"tag-input-box",type:"text",onKeyDown:this.onAddTagKeyDown,onBlur:this.onAddTagWithBlur,placeholder:"Add new tag",autoFocus:!0,ref:this.inputRef}),c.a.createElement(E.a,{iconName:"Tag"})))))}},{key:"triggerNewTagBlur",value:function(){this.inputRef.current&&this.inputRef.current.blur()}}]),t}(c.a.Component),sn=function(){function e(){Object(g.a)(this,e)}return Object(m.a)(e,null,[{key:"setSingleTag",value:function(e,t){return[t]}},{key:"toggleTag",value:function(e,t){return-1===e.findIndex((function(e){return e===t}))?[].concat(Object(ne.a)(e),[t]):e.filter((function(e){return e!==t}))}}]),e}(),cn=n(567),ln=n(6),un=n(319),dn=n(298),pn=n(549),gn=n(260),mn=n(564),fn=n(181),hn=n(566),vn=n(262),bn=(n(1051),function(){function e(){Object(g.a)(this,e)}return Object(m.a)(e,null,[{key:"degreeToRadians",value:function(e){return e*Math.PI*2/360}}]),e}()),yn=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).map=void 0,n.imageLayer=void 0,n.textVectorLayer=void 0,n.tableBorderVectorLayer=void 0,n.tableIconVectorLayer=void 0,n.tableIconBorderVectorLayer=void 0,n.mapElement=null,n.imageExtent=void 0,n.countPointerDown=0,n.isSwiping=!1,n.TEXT_VECTOR_LAYER_NAME="textVectorLayer",n.TABLE_BORDER_VECTOR_LAYER_NAME="tableBorderVectorLayer",n.TABLE_ICON_VECTOR_LAYER_NAME="tableIconVectorLayer",n.TABLE_ICON_BORDER_VECTOR_LAYER_NAME="tableIconBorderVectorLayer",n.ignorePointerMoveEventCount=5,n.pointerMoveEventCount=0,n.textVectorLayerFilter={layerFilter:function(e){return e.get("name")===n.TEXT_VECTOR_LAYER_NAME}},n.tableIconBorderVectorLayerFilter={layerFilter:function(e){return e.get("name")===n.TABLE_ICON_BORDER_VECTOR_LAYER_NAME}},n.toggleTableFeatureVisibility=function(){n.tableBorderVectorLayer.setVisible(!n.tableBorderVectorLayer.getVisible()),n.tableIconVectorLayer.setVisible(!n.tableIconVectorLayer.getVisible()),n.tableIconBorderVectorLayer.setVisible(!n.tableIconBorderVectorLayer.getVisible())},n.getResolutionForZoom=function(e){return n.map.getView().getResolutionForZoom(e)},n.toggleTextFeatureVisibility=function(){n.textVectorLayer.setVisible(!n.textVectorLayer.getVisible())},n.addFeature=function(e){n.textVectorLayer.getSource().addFeature(e)},n.addTableBorderFeature=function(e){n.tableBorderVectorLayer.getSource().addFeature(e)},n.addTableIconFeature=function(e){n.tableIconVectorLayer.getSource().addFeature(e)},n.addTableIconBorderFeature=function(e){n.tableIconBorderVectorLayer.getSource().addFeature(e)},n.addFeatures=function(e){n.textVectorLayer.getSource().addFeatures(e)},n.addTableBorderFeatures=function(e){n.tableBorderVectorLayer.getSource().addFeatures(e)},n.addTableIconFeatures=function(e){n.tableIconVectorLayer.getSource().addFeatures(e)},n.addTableIconBorderFeatures=function(e){n.tableIconBorderVectorLayer.getSource().addFeatures(e)},n.addInteraction=function(e){n.map.addInteraction(e)},n.getAllFeatures=function(){return n.textVectorLayer.getSource().getFeatures()},n.getFeatureByID=function(e){return n.textVectorLayer.getSource().getFeatureById(e)},n.getTableBorderFeatureByID=function(e){return n.tableBorderVectorLayer.getSource().getFeatureById(e)},n.getTableIconFeatureByID=function(e){return n.tableIconVectorLayer.getSource().getFeatureById(e)},n.getTableIconBorderFeatureByID=function(e){return n.tableIconBorderVectorLayer.getSource().getFeatureById(e)},n.removeFeature=function(e){n.textVectorLayer.getSource().removeFeature(e)},n.removeAllFeatures=function(){n.props.handleTableToolTipChange&&n.props.handleTableToolTipChange("none",0,0,0,0,0,0,null),n.textVectorLayer.getSource().clear(),n.tableBorderVectorLayer.getSource().clear(),n.tableIconVectorLayer.getSource().clear(),n.tableIconBorderVectorLayer.getSource().clear()},n.removeInteraction=function(e){n.map.removeInteraction(e)},n.getImageExtent=function(){return n.imageExtent},n.getFeaturesInExtent=function(e){var t=[];return n.textVectorLayer.getSource().forEachFeatureInExtent(e,(function(e){t.push(e)})),t},n.zoomIn=function(){n.map.getView().setZoom(n.map.getView().getZoom()+.3)},n.zoomOut=function(){n.map.getView().setZoom(n.map.getView().getZoom()-.3)},n.resetZoom=function(){n.map.getView().setZoom(0)},n.initMap=function(){var e=n.createProjection(n.imageExtent);n.imageLayer=new pn.a({source:n.createImageSource(n.props.imageUri,e,n.imageExtent)});var t={};t.name=n.TEXT_VECTOR_LAYER_NAME,t.style=n.props.featureStyler,t.source=new vn.a,n.textVectorLayer=new gn.a(t);var a={};a.name=n.TABLE_BORDER_VECTOR_LAYER_NAME,a.style=n.props.tableBorderFeatureStyler,a.source=new vn.a,n.tableBorderVectorLayer=new gn.a(a);var r={};r.name=n.TABLE_ICON_VECTOR_LAYER_NAME,r.style=n.props.tableIconFeatureStyler,r.updateWhileAnimating=!0,r.updateWhileInteracting=!0,r.source=new vn.a,n.tableIconVectorLayer=new gn.a(r);var o={};o.name=n.TABLE_ICON_BORDER_VECTOR_LAYER_NAME,o.style=n.props.tableIconBorderFeatureStyler,o.source=new vn.a,n.tableIconBorderVectorLayer=new gn.a(o),n.map=new mn.a({controls:[],interactions:Object(un.a)({doubleClickZoom:!1,pinchRotate:!1}),target:"map",layers:[n.imageLayer,n.textVectorLayer,n.tableBorderVectorLayer,n.tableIconVectorLayer,n.tableIconBorderVectorLayer],view:n.createMapView(e,n.imageExtent)}),n.map.on("pointerdown",n.handlePointerDown),n.map.on("pointermove",n.handlePointerMove),n.map.on("pointermove",n.handlePointerMoveOnTableIcon),n.map.on("pointerup",n.handlePointerUp)},n.setImage=function(e,t){var a=n.createProjection(t);n.imageLayer.setSource(n.createImageSource(e,a,t));var r=n.createMapView(a,t);n.map.setView(r)},n.createProjection=function(e){return new fn.a({code:"xkcd-image",units:"pixels",extent:e})},n.createMapView=function(e,t){var a=n.getMinimumZoom(),r=n.props.imageAngle?bn.degreeToRadians((n.props.imageAngle+360)%360):0;return new cn.a({projection:e,center:Object(ln.w)(t),rotation:r,zoom:a,minZoom:a})},n.createImageSource=function(e,t,n){return new hn.a({url:e,projection:t,imageExtent:n})},n.getMinimumZoom=function(){var e=n.mapElement?n.mapElement.clientHeight/n.mapElement.clientWidth:1;return n.props.imageHeight/n.props.imageWidth>e?Math.LOG2E*Math.log(n.mapElement.clientHeight/256):Math.LOG2E*Math.log(n.mapElement.clientWidth/256)},n.handlePointerDown=function(e){if(n.props.enableFeatureSelection){if(n.countPointerDown+=1,n.countPointerDown>=2)return n.setDragPanInteraction(!0),void(n.isSwiping=!1);var t=n.map.getEventPixel(e.originalEvent),a=n.map.hasFeatureAtPixel(t,n.textVectorLayerFilter);a&&n.props.handleTextFeatureSelect&&n.map.forEachFeatureAtPixel(t,(function(e){n.props.handleTextFeatureSelect&&n.props.handleTextFeatureSelect(e,!0)}),n.textVectorLayerFilter),n.setDragPanInteraction(!a),n.isSwiping=a}},n.handlePointerMoveOnTableIcon=function(e){if(n.props.handleTableToolTipChange){var t=n.map.getEventPixel(e.originalEvent);if(n.map.hasFeatureAtPixel(t,n.tableIconBorderVectorLayerFilter)){var a=n.map.getFeaturesAtPixel(t,n.tableIconBorderVectorLayerFilter);if(a.length>0){var r=a[0];if(r&&n.props.hoveringFeature!==r.get("id")){var o=r.getGeometry().getCoordinates();if(o&&o.length>0){var i,s=[];s.push(n.map.getPixelFromCoordinate(o[0][0])),s.push(n.map.getPixelFromCoordinate(o[0][1])),s.push(n.map.getPixelFromCoordinate(o[0][2])),s.push(n.map.getPixelFromCoordinate(o[0][3]));var c=(i=[]).concat.apply(i,s),l=c.filter((function(e,t){return t%2===0})),u=c.filter((function(e,t){return t%2===1})),d=Math.min.apply(Math,Object(ne.a)(l)),p=Math.min.apply(Math,Object(ne.a)(u)),g=Math.max.apply(Math,Object(ne.a)(l))-d,m=Math.max.apply(Math,Object(ne.a)(u))-p;n.props.handleTableToolTipChange("block",g+2,m+2,p+43,d-1,r.get("rows"),r.get("columns"),r.get("id"))}}}}else null!==n.props.hoveringFeature&&n.props.handleTableToolTipChange("none",0,0,0,0,0,0,null)}},n.handlePointerMove=function(e){if(!n.shouldIgnorePointerMove()){e.preventDefault();var t=n.map.getEventPixel(e.originalEvent);n.map.forEachFeatureAtPixel(t,(function(e){n.props.handleTextFeatureSelect&&n.props.handleTextFeatureSelect(e,!1)}),n.textVectorLayerFilter)}},n.handlePointerUp=function(){n.props.enableFeatureSelection&&(n.countPointerDown-=1,0===n.countPointerDown&&(n.setDragPanInteraction(!0),n.isSwiping=!1,n.pointerMoveEventCount=0))},n.setDragPanInteraction=function(e){n.map.getInteractions().forEach((function(t){t instanceof dn.a&&t.setActive(e)}))},n.shouldIgnorePointerMove=function(){return!n.props.enableFeatureSelection||(!n.isSwiping||n.ignorePointerMoveEventCount>n.pointerMoveEventCount&&(++n.pointerMoveEventCount,!0))},n.imageExtent=[0,0,n.props.imageWidth,n.props.imageHeight],n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.initMap()}},{key:"componentDidUpdate",value:function(e){e.imageUri!==this.props.imageUri&&(this.imageExtent=[0,0,this.props.imageWidth,this.props.imageHeight],this.setImage(this.props.imageUri,this.imageExtent))}},{key:"render",value:function(){var e=this;return s.createElement("div",{className:"map-wrapper"},s.createElement("div",{id:"map",className:"map",ref:function(t){return e.mapElement=t}}))}}]),t}(s.Component),En=(n(1053),n(103)),Cn=n(408),wn=n(315),jn=n(102),Sn=n(112);!function(e){e[e.loadingFromAzureBlob=0]="loadingFromAzureBlob",e[e.runningOCR=1]="runningOCR",e[e.done=2]="done"}(rn||(rn={}));var On=function(){function e(t){var n=this;Object(g.a)(this,e),this.project=t,this.storageProviderInstance=void 0,this.readOcrFile=function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(n.storageProvider.readText(e,!0));case 2:if(null===(t=a.sent)){a.next=5;break}return a.abrupt("return",new Promise((function(e,n){e(JSON.parse(t))})));case 5:case"end":return a.stop()}}))},this.fetchOcrUriResult=function(e,t){var a,r,o;return p.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,a={"Content-Type":"application/json"},i.next=4,p.a.awrap(ut.postWithAutoRetry(n.project.apiUriBase+"/formrecognizer/v2.0-preview/layout/analyze",{url:e},{headers:a},n.project.apiKey));case 4:return r=i.sent,o=r.headers["operation-location"],i.abrupt("return",n.poll((function(){return ut.getWithAutoRetry(o,{headers:a},n.project.apiKey)}),12e4,1500).then((function(e){return n.save(t,e),e})));case 9:i.prev=9,i.t0=i.catch(0),ut.handleServiceError(i.t0);case 12:case"end":return i.stop()}}),null,null,[[0,9]])},this.poll=function(e,t,n){var a=Number(new Date)+(t||1e4);n=n||100;return new Promise((function t(r,o){e().then((function(e){e.data.status.toLowerCase()===x.a.statusCodeSucceeded?r(e.data):Number(new Date)<a?setTimeout(t,n,r,o):o(new Error("Timed out for getting OCR results"))}))}))},this.isValidOcrFormat=function(e){return e&&e.analyzeResult&&e.analyzeResult.readResults},T.a.null(t)}return Object(m.a)(e,[{key:"getRecognizedText",value:function(e,t,n){var a,r,o;return p.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return T.a.empty(e),T.a.empty(this.project.apiUriBase),a=function(e){return n&&n(e)},r=decodeURIComponent("".concat(t).concat(x.a.ocrFileExtension)),i.prev=4,a(rn.loadingFromAzureBlob),i.next=8,p.a.awrap(this.readOcrFile(r));case 8:if(o=i.sent,this.isValidOcrFormat(o)){i.next=13;break}return i.next=12,p.a.awrap(this.fetchOcrUriResult(e,r));case 12:o=i.sent;case 13:i.next=21;break;case 15:return i.prev=15,i.t0=i.catch(4),a(rn.runningOCR),i.next=20,p.a.awrap(this.fetchOcrUriResult(e,r));case 20:o=i.sent;case 21:return i.prev=21,a(rn.done),i.finish(21);case 24:return i.abrupt("return",o);case 25:case"end":return i.stop()}}),null,this,[[4,15,21,24]])}},{key:"save",value:function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return T.a.empty(e),T.a.null(t),n.next=4,p.a.awrap(this.storageProvider.writeText(e,JSON.stringify(t,null,4)));case 4:return n.abrupt("return",t);case 5:case"end":return n.stop()}}),null,this)}},{key:"storageProvider",get:function(){return this.storageProviderInstance||(this.storageProviderInstance=O.a.create(this.project.sourceConnection.providerType,this.project.sourceConnection.providerOptions)),this.storageProviderInstance}}]),e}(),kn=n(1143),Tn=n(126),xn=n(1145),An=function(e){var t={settings:{theme:Object(w.a)()},scopedSettings:{}},n=[{key:"layers",text:"Layers",iconProps:{iconName:"MapLayers"},subMenuProps:{items:[{key:"table",text:"Tables",canCheck:!0,iconProps:{iconName:"Table"},isChecked:e.layers.tables,onClick:function(){return e.handleLayerChange("tables")}},{key:"text",text:"Text",canCheck:!0,iconProps:{iconName:"TextField"},isChecked:e.layers.text,onClick:function(){return e.handleLayerChange("text")}}]}}],a=[{key:"zoomOut",text:"Zoom out",ariaLabel:"Zoom out",iconOnly:!0,iconProps:{iconName:"ZoomOut"},onClick:function(){return e.handleZoomOut()}},{key:"zoomIn",text:"Zoom in",ariaLabel:"Zoom in",iconOnly:!0,iconProps:{iconName:"ZoomIn"},onClick:function(){return e.handleZoomIn()}}];return s.createElement(we.a,t,s.createElement(xn.a,{items:n,farItems:a,ariaLabel:"Use left and right arrow keys to navigate between commands"}))},Pn=n(1146);Ft.GlobalWorkerOptions.workerSrc=x.a.pdfjsWorkerSrc(Ft.version);var Rn=x.a.pdfjsCMapUrl(Ft.version);var Fn=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={currentAsset:n.props.selectedAsset,imageUri:null,imageWidth:1024,imageHeight:768,numPages:1,currentPage:1,ocr:null,ocrForCurrentPage:{},pdfFile:null,tiffImages:[],isError:!1,errorMessage:void 0,ocrStatus:rn.done,layers:{text:!0,tables:!0},tableIconTooltip:{display:"none",width:0,height:0,top:0,left:0},hoveringFeature:null},n.imageMap=void 0,n.ocrService=void 0,n.selectedRegionIds=[],n.regionOrders=[],n.regionOrderById=[],n.lastKeyBoardRegionId=void 0,n.applyTagFlag=!1,n.pendingFlag=!1,n.componentDidMount=function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return n.ocrService=new On(n.props.project),e=n.state.currentAsset.asset,t.next=4,p.a.awrap(n.loadImage());case 4:return t.next=6,p.a.awrap(n.loadOcr());case 6:n.loadLabelData(e);case 7:case"end":return t.stop()}}))},n.componentDidUpdate=function(e,t){var a;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:n.props.selectedAsset.asset.name!==e.selectedAsset.asset.name||n.props.selectedAsset.asset.isRunningOCR!==e.selectedAsset.asset.isRunningOCR?(n.selectedRegionIds=[],n.imageMap.removeAllFeatures(),n.setState({currentAsset:n.props.selectedAsset,ocr:null,ocrForCurrentPage:{},numPages:1,currentPage:1,pdfFile:null,imageUri:null,tiffImages:[],layers:{tables:!0,text:!0}},(function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.state.currentAsset.asset,t.next=3,p.a.awrap(n.loadImage());case 3:return t.next=5,p.a.awrap(n.loadOcr());case 5:n.loadLabelData(e);case 6:case"end":return t.stop()}}))}))):n.isLabelDataChanged(n.props,e)&&(n.redrawFeatures(n.imageMap.getAllFeatures()),a=n.convertLabelDataToRegions(n.props.selectedAsset.labelData),n.updateAssetRegions(a)),n.props.hoveredLabel!==e.hoveredLabel&&n.imageMap.getAllFeatures().map(n.updateHighlightStatus);case 2:case"end":return t.stop()}}))},n.render=function(){var e={root:{position:"absolute",top:n.state.tableIconTooltip.top,left:n.state.tableIconTooltip.left,width:n.state.tableIconTooltip.width,height:n.state.tableIconTooltip.height,display:n.state.tableIconTooltip.display}};return c.a.createElement("div",{style:{width:"100%",height:"100%"}},c.a.createElement(Mt.a,{displayName:"Delete region",key:"Delete",keyEventType:Ut.a.KeyDown,accelerators:["Delete","Backspace","<",",",">",".","{","[","}","]","+","-","/","=","_","?"],handler:n.handleKeyDown}),c.a.createElement(An,{handleLayerChange:n.handleLayerChange,handleZoomIn:n.handleCanvasZoomIn,handleZoomOut:n.handleCanvasZoomOut,layers:n.state.layers}),c.a.createElement(yn,{ref:function(e){return n.imageMap=e},imageUri:n.state.imageUri,imageWidth:n.state.imageWidth,imageHeight:n.state.imageHeight,enableFeatureSelection:!0,handleTextFeatureSelect:n.handleTextFeatureSelect,featureStyler:n.featureStyler,tableBorderFeatureStyler:n.tableBorderFeatureStyler,tableIconFeatureStyler:n.tableIconFeatureStyler,tableIconBorderFeatureStyler:n.tableIconBorderFeatureStyler,onMapReady:n.noOp,handleTableToolTipChange:n.handleTableToolTipChange,hoveringFeature:n.state.hoveringFeature}),c.a.createElement(Pn.a,{content:"rows: "+n.state.tableIconTooltip.rows+" columns: "+n.state.tableIconTooltip.columns,id:"tableInfo",styles:e},c.a.createElement("div",{"aria-describedby":"tableInfo",className:"tooltip-container",onClick:n.handleTableIconFeatureSelect})),n.shouldShowPreviousPageButton()&&c.a.createElement(Ae.a,{className:"toolbar-btn prev",title:"Previous",iconProps:{iconName:"ChevronLeft"},onClick:n.prevPage}),n.shouldShowNextPageButton()&&c.a.createElement(Ae.a,{className:"toolbar-btn next",title:"Next",onClick:n.nextPage,iconProps:{iconName:"ChevronRight"}}),n.shouldShowMultiPageIndicator()&&c.a.createElement("p",{className:"page-number"},"Page ",n.state.currentPage," of ",n.state.numPages),n.state.ocrStatus!==rn.done&&c.a.createElement("div",{className:"canvas-ocr-loading"},c.a.createElement("div",{className:"canvas-ocr-loading-spinner"},c.a.createElement(Lt.a,{className:"p-0"}),c.a.createElement(ve.a,{size:be.a.large,label:"Running OCR...",ariaLive:"assertive",labelPosition:"right"}))),c.a.createElement(at.a,{show:n.state.isError,title:n.state.errorTitle||"Error",message:n.state.errorMessage,onClose:function(){return n.setState({isError:!1,errorTitle:void 0,errorMessage:void 0})}}))},n.applyTag=function(e){var t=n.getSelectedRegions(),a=!t||!t.length;if(e&&!a&&!n.showMultiPageFieldWarningIfNecessary(e,t)){var r=sn.setSingleTag,o=!0,i=!1,s=void 0;try{for(var c,l=t[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value;u.tags=r(u.tags,e)}}catch(d){i=!0,s=d}finally{try{o||null==l.return||l.return()}finally{if(i)throw s}}n.updateRegions(t),n.selectedRegionIds=[],n.props.onSelectedRegionsChanged&&n.props.onSelectedRegionsChanged([]),n.redrawFeatures(n.imageMap.getAllFeatures()),n.applyTagFlag=!0}},n.getSelectedRegions=function(){return n.state.currentAsset.regions.filter((function(e){return n.selectedRegionIds.find((function(t){return e.id===t}))}))},n.addRegions=function(e){n.addRegionsToAsset(e),n.addRegionsToImageMap(e.filter((function(e){return e.pageNumber===n.state.currentPage})))},n.addRegionsToAsset=function(e){var t=n.state.currentAsset.regions.filter((function(t){return-1===e.findIndex((function(e){return e.id===t.id}))}));n.updateAssetRegions(t.concat(e))},n.addRegionsToImageMap=function(e){if(null!=n.imageMap){var t=n.imageMap.getAllFeatures(),a=e.filter((function(e){return-1===t.findIndex((function(t){return t.get("id")===e.id}))})),r=n.imageMap.getImageExtent(),o=a.map((function(e){return n.convertRegionToFeature(e,r)}));n.imageMap.addFeatures(o)}},n.convertRegionToFeature=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=[],r=e.id.split(",").map(parseFloat),o=t[2]-t[0],i=t[3]-t[1],s=0;s<r.length;s+=2)a.push([Math.round(r[s]*o),Math.round((1-r[s+1])*i)]);var c=new kn.a({geometry:new Tn.a([a])});return c.setProperties({id:e.id,text:e.value,highlighted:!1,isOcrProposal:n}),c.setId(e.id),c},n.deleteRegions=function(e){n.deleteRegionsFromSelectedRegionIds(e),n.deleteRegionsFromAsset(e),n.deleteRegionsFromImageMap(e)},n.deleteRegionsFromSelectedRegionIds=function(e){e.forEach((function(e){var t=n.getIndexOfSelectedRegionIndex(e.id);t>=0&&n.selectedRegionIds.splice(t,1)}))},n.deleteRegionsFromAsset=function(e){var t=n.state.currentAsset.regions.filter((function(t){return-1===e.findIndex((function(e){return e.id===t.id}))}));n.updateAssetRegions(t)},n.deleteRegionsFromImageMap=function(e){null!=n.imageMap&&(n.imageMap.getAllFeatures().filter((function(e){return!e.get("isOcrProposal")})).filter((function(t){return-1!==e.findIndex((function(e){return e.id===t.get("id")}))})).map(n.imageMap.removeFeature),n.redrawFeatures(n.imageMap.getAllFeatures()))},n.updateAssetRegions=function(e){var t=n.convertRegionsToLabelData(e,n.state.currentAsset.asset.name),a=Object(u.a)({},n.state.currentAsset,{regions:e,labelData:t});n.setState({currentAsset:a},(function(){n.props.onAssetMetadataChanged(a)}))},n.onRegionDelete=function(e){var t=n.state.currentAsset.regions,a=t.findIndex((function(t){return t.id===e}));t.splice(a,1),n.updateAssetRegions(t)},n.onRegionSelected=function(e,t){var a=n.getSelectedRegions();n.props.onSelectedRegionsChanged&&n.props.onSelectedRegionsChanged(a)},n.updateRegions=function(e){var t=n.state.currentAsset.regions,a=[].concat(t),r=!0,o=!1,i=void 0;try{for(var s,c=function(){var e=s.value;t.find((function(t){return t.id===e.id}))||a.push(e)},l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)c()}catch(u){o=!0,i=u}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}a.sort(n.compareRegionOrder),n.updateAssetRegions(a)},n.createBoundingBoxVectorFeature=function(e,t,a,r,o){for(var i=[],s=[],c=a[2]-a[0],l=a[3]-a[1],u=r[2]-r[0],d=r[3]-r[1],p=0;p<t.length;p+=2)i.push([Math.round(t[p]/u*c),Math.round((1-t[p+1]/d)*l)]),s.push(t[p]/u),s.push(t[p+1]/d);var g=n.createRegionIdFromBoundingBox(s,o),m=new kn.a({geometry:new Tn.a([i])});return m.setProperties({id:g,text:e,boundingbox:t,highlighted:!1,isOcrProposal:!0}),m.setId(g),m},n.createBoundingBoxVectorTable=function(e,t,a,r,o,i){for(var s=[],c=[],l=t[2]-t[0],u=t[3]-t[1],d=a[2]-a[0],p=a[3]-a[1],g=0;g<e.length;g+=2)s.push([Math.round(e[g]/d*l),Math.round((1-e[g+1]/p)*u)]),c.push(e[g]/d),c.push(e[g+1]/p);var m=n.createRegionIdFromBoundingBox(c,r),f={};f.border=new kn.a({geometry:new Tn.a([s]),id:m,state:"rest",boundingbox:e}),f.icon=new kn.a({geometry:new wn.a([s[0][0]-6.5,s[0][1]-4.5]),id:m,state:"rest"});var h=[s[0][0]-5,s[0][1]],v=[h[0]-31.5,h[1]],b=[h[0],h[1]-29.5],y=[h[0]-31.5,h[1]-29.5];return f.iconBorder=new kn.a({geometry:new Tn.a([[h,v,y,b]]),id:m,rows:o,columns:i}),f.border.setId(m),f.icon.setId(m),f.iconBorder.setId(m),f},n.tableIconBorderFeatureStyler=function(e){return new En.b({stroke:new jn.a({width:0,color:"transparent"}),fill:new Sn.a({color:"rgba(217, 217, 217, 0)"})})},n.tableIconFeatureStyler=function(e,t){return"rest"===e.get("state")?new En.b({image:new Cn.a({opacity:.3,scale:n.imageMap.getResolutionForZoom(3)/t,anchor:[.95,.15],anchorXUnits:"fraction",anchorYUnits:"fraction",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAmCAYAAABZNrIjAAABhUlEQVRYR+1YQaqCUBQ9BYZOWkHQyEELSAJbQM7cQiMxmjTXkQtwEomjttAsF6AguoAGjQRX0CRRsI/yg/hlqV8w4b3xfe8ezn3nHN7rKYpy8zwP37o4jkNPkqSbaZrfihGSJHUQ5G63w2QyaZ3V0+mE1WqV43hi0rZt8DzfOkjHcTCfzzsMcr1eYzQatc5kGIbYbrevmWwd3QsA3VR3mXE/jiIT2WKxAEVRhUNIkgSWZSETQ7aq9qil7r/K03UdDMMUgrxer9hsNrgHRhkH+be6CcjfeRAmX13Mxu/k8XjEdDp9a5e+70MQhLxmuVxC0zTQNF24J4oiqKqK/X6f11Tt0U2fJIlTkwFi5nfiGld3ncgisVj3+UCyu0x2z2YzDIfDt2ZxuVzgum5eMx6PwbIs+v1+4Z40TXE+nxEEQV5TtQdJnJre/bTtickynwOPD3dRFCHLMgaDQSGmOI5hGAYOh0NeU7UHSRySOJ/+goiZlzHzqsprRd1NeVuT53Qncbrwsf8D9suXe5WWs/YAAAAASUVORK5CYII="})}):new En.b({image:new Cn.a({opacity:1,scale:n.imageMap.getResolutionForZoom(3)/t,anchor:[.95,.15],anchorXUnits:"fraction",anchorYUnits:"fraction",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAmCAYAAABZNrIjAAABhUlEQVRYR+1YQaqCUBQ9BYZOWkHQyEELSAJbQM7cQiMxmjTXkQtwEomjttAsF6AguoAGjQRX0CRRsI/yg/hlqV8w4b3xfe8ezn3nHN7rKYpy8zwP37o4jkNPkqSbaZrfihGSJHUQ5G63w2QyaZ3V0+mE1WqV43hi0rZt8DzfOkjHcTCfzzsMcr1eYzQatc5kGIbYbrevmWwd3QsA3VR3mXE/jiIT2WKxAEVRhUNIkgSWZSETQ7aq9qil7r/K03UdDMMUgrxer9hsNrgHRhkH+be6CcjfeRAmX13Mxu/k8XjEdDp9a5e+70MQhLxmuVxC0zTQNF24J4oiqKqK/X6f11Tt0U2fJIlTkwFi5nfiGld3ncgisVj3+UCyu0x2z2YzDIfDt2ZxuVzgum5eMx6PwbIs+v1+4Z40TXE+nxEEQV5TtQdJnJre/bTtickynwOPD3dRFCHLMgaDQSGmOI5hGAYOh0NeU7UHSRySOJ/+goiZlzHzqsprRd1NeVuT53Qncbrwsf8D9suXe5WWs/YAAAAASUVORK5CYII="})})},n.tableBorderFeatureStyler=function(e,t){return"rest"===e.get("state")?new En.b({stroke:new jn.a({color:"transparent"}),fill:new Sn.a({color:"transparent"})}):"hovering"===e.get("state")?new En.b({stroke:new jn.a({opacity:.75,color:"black",lineDash:[2,6],width:.75}),fill:new Sn.a({color:"rgba(217, 217, 217, 0.1)"})}):new En.b({stroke:new jn.a({color:"black",lineDash:[2,6],width:2}),fill:new Sn.a({color:"rgba(217, 217, 217, 0.1)"})})},n.featureStyler=function(e){var t=e.get("id"),a=n.getTagFromRegionId(t);if(n.isRegionSelected(t))return new En.b({stroke:new jn.a({color:"#6eff40",width:1}),fill:new Sn.a({color:"rgba(110, 255, 80, 0.4)"})});if(null!=a){var r=e.get("highlighted"),o="rgba(255, 255, 255, 0)";return r&&(o=function(e,t){var n=e.replace("#",""),a=255,r=255,o=255;return 3===n.length?(a=parseInt(n.slice(0,1).repeat(2),16),r=parseInt(n.slice(1,2).repeat(2),16),o=parseInt(n.slice(2,3).repeat(2),16)):6===n.length&&(a=parseInt(n.slice(0,2),16),r=parseInt(n.slice(2,4),16),o=parseInt(n.slice(4,6),16)),"rgba(".concat(a,", ").concat(r,", ").concat(o,", ").concat(t,")")}(a.color,.3)),new En.b({stroke:new jn.a({color:a.color,width:r?4:2}),fill:new Sn.a({color:o})})}return new En.b({stroke:new jn.a({color:"#fffc7f",width:1}),fill:new Sn.a({color:"rgba(255, 252, 127, 0.2)"})})},n.setFeatureProperty=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(a||e.get(t)!==n)&&e.set(t,n)},n.updateHighlightStatus=function(e){if(n.props.hoveredLabel){var t=n.props.hoveredLabel,a=e.get("id");t.value.find((function(e){return a===n.createRegionIdFromBoundingBox(e.boundingBoxes[0],e.page)}))&&n.setFeatureProperty(e,"highlighted",!0)}else e.get("highlighted")&&n.setFeatureProperty(e,"highlighted",!1)},n.handleTextFeatureSelect=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=e.get("id");if(t&&n.isRegionSelected(a))n.removeFromSelectedRegions(a);else{var r=a.split(",").map(parseFloat);n.addToSelectedRegions(a,e.get("text"),r)}n.redrawFeatures(n.imageMap.getAllFeatures())},n.handleTableIconFeatureSelect=function(){null!=n.state.hoveringFeature&&("hovering"===n.imageMap.getTableBorderFeatureByID(n.state.hoveringFeature).get("state")?(n.imageMap.getTableBorderFeatureByID(n.state.hoveringFeature).set("state","selected"),n.imageMap.getTableIconFeatureByID(n.state.hoveringFeature).set("state","selected")):(n.imageMap.getTableBorderFeatureByID(n.state.hoveringFeature).set("state","hovering"),n.imageMap.getTableIconFeatureByID(n.state.hoveringFeature).set("state","hovering")))},n.removeFromSelectedRegions=function(e){var t=n.getIndexOfSelectedRegionIndex(e);if(t>=0){var a=n.getSelectedRegions().find((function(t){return t.id===e}));a&&a.tags&&0===a.tags.length&&n.onRegionDelete(e),n.selectedRegionIds.splice(t,1),n.props.onSelectedRegionsChanged&&n.props.onSelectedRegionsChanged(n.getSelectedRegions())}},n.addToSelectedRegions=function(e,t,a){var r;if(!n.isRegionSelected(e)){if(-1!==n.getIndexOfCurrentRegions(e))(r=n.state.currentAsset.regions.find((function(t){return t.id===e}))).pageNumber=n.state.currentPage;else{var o=n.convertToRegionBoundingBox(a),i=n.convertToRegionPoints(a);r={id:e,type:k.h.Polygon,tags:[],boundingBox:o,points:i,value:t,pageNumber:n.state.currentPage},n.addRegions([r])}n.selectedRegionIds.push(e),n.onRegionSelected(e,!1)}},n.isRegionSelected=function(e){return-1!==n.getIndexOfSelectedRegionIndex(e)},n.getIndexOfSelectedRegionIndex=function(e){return n.selectedRegionIds.findIndex((function(t){return t===e}))},n.getIndexOfCurrentRegions=function(e){return n.state.currentAsset.regions.findIndex((function(t){return t.id===e}))},n.getTagFromRegionId=function(e){var t=n.getIndexOfCurrentRegions(e);if(t>=0){var a=n.state.currentAsset.regions[t].tags[0];return n.props.project.tags.find((function(e){return e.name===a}))}return null},n.loadImage=function(){var e,t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if((e=n.state.currentAsset.asset).type!==k.c.Image){a.next=8;break}return a.next=4,p.a.awrap(Object(A.f)(e.path));case 4:t=a.sent,n.setState({imageUri:t.toDataURL(x.a.convertedImageFormat,x.a.convertedImageQuality),imageWidth:t.width,imageHeight:t.height}),a.next=16;break;case 8:if(e.type!==k.c.TIFF){a.next=13;break}return a.next=11,p.a.awrap(n.loadTiffFile(e));case 11:a.next=16;break;case 13:if(e.type!==k.c.PDF){a.next=16;break}return a.next=16,p.a.awrap(n.loadPdfFile(e.id,e.path));case 16:case"end":return a.stop()}}))},n.setOCRStatus=function(e){n.setState({ocrStatus:e},(function(){n.props.onRunningOCRStatusChanged&&n.props.onRunningOCRStatusChanged(e===rn.runningOCR)}))},n.loadOcr=function(){var e,t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e=n.state.currentAsset.asset).isRunningOCR){a.next=3;break}return a.abrupt("return");case 3:return a.prev=3,a.next=6,p.a.awrap(n.ocrService.getRecognizedText(e.path,e.name,n.setOCRStatus));case 6:t=a.sent,e.id===n.state.currentAsset.asset.id&&n.setState({ocr:t,ocrForCurrentPage:n.getOcrResultForCurrentPage(t)},(function(){n.buildRegionOrders(),n.drawOcr()})),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(3),n.setState({isError:!0,errorTitle:a.t0.title,errorMessage:a.t0.message});case 13:case"end":return a.stop()}}),null,null,[[3,10]])},n.loadTiffFile=function(e){var t,a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.a.awrap(Pt.a.getAssetArray(e));case 2:t=r.sent,a=Object(A.g)(t),n.loadTiffPage(a,n.state.currentPage);case 5:case"end":return r.stop()}}))},n.loadTiffPage=function(e,t){var a=e[t-1],r=Object(A.j)(a);n.setState({imageUri:r.toDataURL(x.a.convertedImageFormat,x.a.convertedImageQuality),imageWidth:a.width,imageHeight:a.height,numPages:e.length,currentPage:t,tiffImages:e})},n.loadPdfFile=function(e,t){var a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,p.a.awrap(Ft.getDocument({url:t,cMapUrl:Rn,cMapPacked:!0}).promise);case 3:if(a=r.sent,e!==n.state.currentAsset.asset.id){r.next=7;break}return r.next=7,p.a.awrap(n.loadPdfPage(e,a,n.state.currentPage));case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.error(r.t0);case 12:case"end":return r.stop()}}),null,null,[[0,9]])},n.loadPdfPage=function(e,t,a){var r,o,i,s,c;return p.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,p.a.awrap(t.getPage(a));case 2:return r=l.sent,2,o=r.getViewport({scale:2}),i=document.createElement("canvas"),s=i.getContext("2d"),i.height=o.height,i.width=o.width,c={canvasContext:s,viewport:o},l.next=12,p.a.awrap(r.render(c).promise);case 12:e===n.state.currentAsset.asset.id&&n.setState({imageUri:i.toDataURL(x.a.convertedImageFormat,x.a.convertedImageQuality),imageWidth:i.width,imageHeight:i.height,numPages:t.numPages,currentPage:a,pdfFile:t});case 13:case"end":return l.stop()}}))},n.nextPage=function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n.state.pdfFile&&0===n.state.tiffImages.length||!(n.state.currentPage<n.state.numPages)){e.next=3;break}return e.next=3,p.a.awrap(n.goToPage(n.state.currentPage+1));case 3:case"end":return e.stop()}}))},n.prevPage=function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n.state.pdfFile&&0===n.state.tiffImages.length||!(n.state.currentPage>1)){e.next=3;break}return e.next=3,p.a.awrap(n.goToPage(n.state.currentPage-1));case 3:case"end":return e.stop()}}))},n.goToPage=function(e){var t,a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e<1||n.state.numPages,t=n.getSelectedRegions(),n.deleteRegionsFromSelectedRegionIds(t),a=t.filter((function(e){return 0===e.tags.length})),n.deleteRegionsFromAsset(a),n.deleteRegionsFromImageMap(a),r.next=8,p.a.awrap(n.switchToTargetPage(e));case 8:n.setState({ocrForCurrentPage:n.getOcrResultForCurrentPage(n.state.ocr)},(function(){n.imageMap.removeAllFeatures(),n.drawOcr(),n.loadLabelData(n.state.currentAsset.asset)}));case 9:case"end":return r.stop()}}))},n.convertLabelDataToRegions=function(e){var t=[];return e.labels&&e.labels.forEach((function(e){e.value&&e.value.forEach((function(a){a.boundingBoxes&&a.boundingBoxes.forEach((function(r,o){var i=n.getBoundingBoxTextFromRegion(a,o);t.push(n.createRegion(r,i,e.label,a.page))}))}))})),t},n.convertRegionsToLabelData=function(e,t){var n={document:decodeURIComponent(t).split("/").pop(),labels:[]};return Array.from(new Set(e.map((function(e){return e.tags[0]})))).filter((function(e){return void 0!==e})).forEach((function(t){var a={label:t,key:null,value:[]};e.filter((function(e){return-1!==e.tags.indexOf(t)})).forEach((function(e){var t=e.id.split(",").map(parseFloat);a.value.push({page:e.pageNumber,text:e.value,boundingBoxes:[t]})})),n.labels.push(a)})),n},n.convertToRegionBoundingBox=function(e){var t=e.filter((function(e,t){return t%2===0})),n=e.filter((function(e,t){return t%2===1})),a=Math.min.apply(Math,Object(ne.a)(t)),r=Math.min.apply(Math,Object(ne.a)(n)),o=Math.max.apply(Math,Object(ne.a)(t));return{height:Math.max.apply(Math,Object(ne.a)(n))-r,width:o-a,left:a,top:r}},n.getTableBoundingBox=function(e){var t,n=(t=[]).concat.apply(t,Object(ne.a)(e)),a=n.filter((function(e,t){return t%2===0})),r=n.filter((function(e,t){return t%2===1})),o=Math.min.apply(Math,Object(ne.a)(a)),i=Math.min.apply(Math,Object(ne.a)(r)),s=Math.max.apply(Math,Object(ne.a)(a)),c=Math.max.apply(Math,Object(ne.a)(r));return[o,i,s,i,s,c,o,c]},n.convertToRegionPoints=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push({x:e[n],y:e[n+1]});return t},n.handleKeyDown=function(e){switch(e.key){case"Delete":case"Backspace":n.deleteRegions(n.getSelectedRegions());break;case"<":case",":n.prevPage();break;case">":case".":n.nextPage();break;case"}":case"]":n.pendingFlag||(n.pendingFlag=!0,setTimeout((function(){n.getRegionWithKey(!0),n.pendingFlag=!1}),1));break;case"{":case"[":n.pendingFlag||(n.pendingFlag=!0,setTimeout((function(){n.getRegionWithKey(!1),n.pendingFlag=!1}),1));break;case"+":case"=":n.handleCanvasZoomIn();break;case"-":case"_":n.handleCanvasZoomOut();break;case"/":case"?":n.handleZoomReset()}},n.handleCanvasZoomIn=function(){n.imageMap.zoomIn()},n.handleCanvasZoomOut=function(){n.imageMap.zoomOut()},n.handleZoomReset=function(){n.imageMap.resetZoom()},n.getRegionWithKey=function(e){var t,a,r=n.getSelectedRegions(),o=n.state.currentPage;if(r.length||n.applyTagFlag)if(n.applyTagFlag)n.applyTagFlag&&(t=n.lastKeyBoardRegionId,e?a=n.getNextIdByOrder(t,o):e||(a=n.getPrevIdByOrder(t,o)),n.applyTagFlag=!1);else{t=r.find((function(e){return e.id===n.selectedRegionIds[n.selectedRegionIds.length-1]})).id,n.deleteRegionsFromSelectedRegionIds(r);var i=n.state.currentAsset.regions.filter((function(e){return 0===e.tags.length}));n.deleteRegionsFromAsset(i),e?a=n.getNextIdByOrder(t,o):e||(a=n.getPrevIdByOrder(t,o))}else a=n.regionOrderById[n.state.currentPage-1][0];var s=n.imageMap.getAllFeatures(),c=s.find((function(e){return e.get("id")===a})),l=a.split(",").map(parseFloat);n.addToSelectedRegions(a,c.get("text"),l),n.redrawFeatures(s),n.lastKeyBoardRegionId=a},n.getOcrResultForCurrentPage=function(e){if(!e||!n.state.imageUri)return{};if(e.analyzeResult&&e.analyzeResult.readResults){var t={};return e.analyzeResult.pageResults&&(t.pageResults=e.analyzeResult.pageResults[n.state.currentPage-1]),t.readResults=e.analyzeResult.readResults[n.state.currentPage-1],t}return{}},n.isLabelDataChanged=function(e,t){var n=nt.a.get(e,"selectedAsset.labelData.labels",[]),a=nt.a.get(t,"selectedAsset.labelData.labels",[]);if(n.length!==a.length)return!0;if(n.length>0){var r=n.map((function(e){return e.label})),o=a.map((function(e){return e.label}));return!nt.a.isEqual(r.sort(),o.sort())}return!1},n.getBoundingBoxTextFromRegion=function(e,t){var n=e.text.split(" ");return n&&n.length>t?n[t]:""},n.loadLabelData=function(e){if(e.id===n.state.currentAsset.asset.id&&null!=n.state.currentAsset.labelData){var t=n.convertLabelDataToRegions(n.state.currentAsset.labelData);t.length>0&&n.addRegions(t)}},n.showMultiPageFieldWarningIfNecessary=function(e,t){var a=n.state.currentAsset.regions.filter((function(t){return nt.a.get(t,"tags[0]","")===e})).concat(t),r=new Set(a.map((function(e){return e.pageNumber}))).size;return r>1&&(n.setState({isError:!0,errorMessage:"Sorry, we don't support cross-page regions with the same tag."+' You have regions with tag "'.concat(e,'" across ').concat(r," pages.")}),!0)},n.noOp=function(){},n.getRegionOrder=function(e){var t={page:1,order:0};return n.regionOrders.some((function(n,a){var r=n[e];return void 0!==r&&(t={page:a+1,order:r},!0)})),t},n.getNextIdByOrder=function(e,t){var a=n.regionOrderById[t-1],r=a.indexOf(e);return a[r===a.length-1?0:r+1]},n.getPrevIdByOrder=function(e,t){var a=n.regionOrderById[t-1],r=a.indexOf(e);return a[0===r?a.length-1:r-1]},n.compareRegionOrder=function(e,t){var a=n.getRegionOrder(e.id),r=n.getRegionOrder(t.id);return a.page===r.page?a.order>r.order?1:-1:a.page>r.page?1:-1},n.buildRegionOrders=function(){var e=n.state.ocr,t=e.recognitionResults||e.analyzeResult&&e.analyzeResult.readResults,a=n.imageMap.getImageExtent();t.map((function(e){var t=[0,0,e.width,e.height];n.regionOrders[e.page-1]={},n.regionOrderById[e.page-1]=[];var r=0;return e.lines&&e.lines.forEach((function(o){o.words&&o.words.forEach((function(o){if(n.shouldDisplayOcrWord(o.text)){var i=n.createBoundingBoxVectorFeature(o.text,o.boundingBox,a,t,e.page);n.regionOrders[e.page-1][i.getId()]=r++,n.regionOrderById[e.page-1].push(i.getId())}}))})),e}))},n.drawOcr=function(){var e=[],t=[],a=[],r=[],o=n.state.ocrForCurrentPage.readResults,i=n.state.ocrForCurrentPage.pageResults,s=n.imageMap.getImageExtent(),c=[0,0,o.width,o.height];o.lines&&o.lines.forEach((function(t){t.words&&t.words.forEach((function(t){n.shouldDisplayOcrWord(t.text)&&e.push(n.createBoundingBoxVectorFeature(t.text,t.boundingBox,s,c,o.page))}))})),i&&i.tables&&i.tables.forEach((function(e){if(e.cells&&e.columns&&e.rows){var o=n.getTableBoundingBox(e.cells.map((function(e){return e.boundingBox}))),l=n.createBoundingBoxVectorTable(o,s,c,i.page,e.rows,e.columns);t.push(l.border),a.push(l.icon),r.push(l.iconBorder)}})),t.length>0&&t.length===a.length&&t.length===r.length&&(n.imageMap.addTableBorderFeatures(t),n.imageMap.addTableIconFeatures(a),n.imageMap.addTableIconBorderFeatures(r)),e.length>0&&n.imageMap.addFeatures(e)},n.shouldDisplayOcrWord=function(e){var t=new RegExp(/^[_]+$/);return!e.match(t)},n.redrawFeatures=function(e){e.forEach((function(e){return e.changed()}))},n.switchToTargetPage=function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===n.state.pdfFile){t.next=5;break}return t.next=3,p.a.awrap(n.loadPdfPage(n.state.currentAsset.asset.id,n.state.pdfFile,e));case 3:t.next=6;break;case 5:0!==n.state.tiffImages.length&&n.loadTiffPage(n.state.tiffImages,e);case 6:case"end":return t.stop()}}))},n.shouldShowPreviousPageButton=function(){return(null!==n.state.pdfFile||0!==n.state.tiffImages.length)&&1!==n.state.currentPage},n.shouldShowNextPageButton=function(){return(null!==n.state.pdfFile||0!==n.state.tiffImages.length)&&n.state.currentPage!==n.state.numPages},n.shouldShowMultiPageIndicator=function(){return(null!==n.state.pdfFile||0!==n.state.tiffImages.length)&&n.state.numPages>1},n.createRegionIdFromBoundingBox=function(e,t){return e.join(",")+":"+t},n.handleLayerChange=function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=e,a.next="text"===a.t0?3:"tables"===a.t0?5:7;break;case 3:return n.imageMap.toggleTextFeatureVisibility(),a.abrupt("break",7);case 5:return n.imageMap.toggleTableFeatureVisibility(),a.abrupt("break",7);case 7:(t=Object.assign({},n.state.layers))[e]=!t[e],n.setState({layers:t});case 10:case"end":return a.stop()}}))},n.handleTableToolTipChange=function(e,t,a,r,o,i,s,c){var l;return p.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:null!==c&&"selected"!==n.imageMap.getTableBorderFeatureByID(c).get("state")?(n.imageMap.getTableBorderFeatureByID(c).set("state","hovering"),n.imageMap.getTableIconFeatureByID(c).set("state","hovering")):null===c&&n.state.hoveringFeature&&"selected"!==n.imageMap.getTableBorderFeatureByID(n.state.hoveringFeature).get("state")&&(n.imageMap.getTableBorderFeatureByID(n.state.hoveringFeature).set("state","rest"),n.imageMap.getTableIconFeatureByID(n.state.hoveringFeature).set("state","rest")),l={display:e,width:t,height:a,top:r,left:o,rows:i,columns:s},n.setState({tableIconTooltip:l,hoveringFeature:c});case 3:case"end":return u.stop()}}))},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"createRegion",value:function(e,t,n,a){for(var r=e.filter((function(e,t){return t%2===0})),o=e.filter((function(e,t){return t%2===1})),i=Math.min.apply(Math,Object(ne.a)(r)),s=Math.min.apply(Math,Object(ne.a)(o)),c=Math.max.apply(Math,Object(ne.a)(r)),l=Math.max.apply(Math,Object(ne.a)(o)),u=[],d=0;d<e.length;d+=2)u.push({x:e[d],y:e[d+1]});return{id:this.createRegionIdFromBoundingBox(e,a),type:k.h.Polygon,tags:[n],boundingBox:{height:l-s,width:c-i,left:i,top:s},points:u,value:t,pageNumber:a}}}]),t}(c.a.Component);Fn.defaultProps={editorMode:k.d.Select,selectedAsset:null,project:null,lockedTags:[],hoveredLabel:null};n(1054);var Nn,In=n(407),Dn=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={scrollToIndex:n.props.selectedAsset?n.props.assets.findIndex((function(e){return e.id===n.props.selectedAsset.id})):0},n.listRef=c.a.createRef(),n.getRowHeight=function(e){return e/(4/3)+16},n.selectAsset=function(e){var t=n.props.assets.findIndex((function(t){return t.id===e.id}));n.setState({scrollToIndex:t},(function(){n.listRef.current.forceUpdateGrid()}))},n.onAssetClicked=function(e){n.props.onBeforeAssetSelected&&!n.props.onBeforeAssetSelected()||(n.selectAsset(e),n.props.onAssetSelected(e))},n.rowRenderer=function(e){e.key;var t=e.index,a=e.style,r=n.props.assets[t],o=n.props.selectedAsset;return c.a.createElement("div",{key:r.id,style:a,role:"row",className:n.getAssetCssClassNames(r,o),onClick:function(){return n.onAssetClicked(r)}},c.a.createElement("div",{className:"asset-item-image",role:"gridcell"},n.renderBadges(r),c.a.createElement(Bt,{asset:r})),c.a.createElement("div",{className:"asset-item-metadata",role:"rowheader"},c.a.createElement("span",{className:"asset-filename",title:r.name},r.name.slice(r.name.lastIndexOf("/")+1,r.name.length)),r.size&&c.a.createElement("span",null,r.size.width," x ",r.size.height)))},n.renderBadges=function(e){switch(e.state){case k.b.Tagged:return c.a.createElement("span",{title:C.c.editorPage.tagged,className:"badge badge-tagged"},c.a.createElement(E.a,{iconName:"Tag"}));case k.b.Visited:return c.a.createElement("span",{title:C.c.editorPage.visited,className:"badge badge-visited"},c.a.createElement(E.a,{iconName:"View"}));default:return null}},n.getAssetCssClassNames=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=["asset-item"];return t&&t.id===e.id&&n.push("selected"),n.join(" ")},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"editor-page-sidebar-nav"},c.a.createElement(In.a,null,(function(t){var n=t.height,a=t.width;return c.a.createElement(In.b,{ref:e.listRef,className:"asset-list",height:n,width:a,rowCount:e.props.assets.length,rowHeight:function(){return e.getRowHeight(a)},rowRenderer:e.rowRenderer,overscanRowCount:10,scrollToIndex:e.state.scrollToIndex})})))}},{key:"componentDidUpdate",value:function(e){e.thumbnailSize!==this.props.thumbnailSize&&this.listRef.current.recomputeRowHeights(),(e.selectedAsset||this.props.selectedAsset)&&(!e.selectedAsset&&this.props.selectedAsset||e.selectedAsset.id!==this.props.selectedAsset.id)&&this.selectAsset(this.props.selectedAsset)}}]),t}(c.a.Component);var Ln,Bn=Object(b.b)((function(e){return{recentProjects:e.recentProjects,project:e.currentProject,appSettings:e.appSettings}}),(function(e){return{actions:Object(y.b)(a,e),applicationActions:Object(y.b)(r,e),appTitleActions:Object(y.b)(o,e)}}))(Nn=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).state={selectedTag:null,lockedTags:[],assets:[],editorMode:k.d.Select,thumbnailSize:{width:175,height:155},isValid:!0,showInvalidRegionWarning:!1,hoveredLabel:null},n.tagInputRef=void 0,n.loadingProjectAssets=!1,n.canvas=c.a.createRef(),n.renameTagConfirm=c.a.createRef(),n.renameCanceled=void 0,n.deleteTagConfirm=c.a.createRef(),n.isUnmount=!1,n.onPageContainerClick=function(){n.tagInputRef.current.triggerNewTagBlur()},n.onPageClick=function(){},n.onSideBarResize=function(e){n.setState({thumbnailSize:{width:e,height:e/(4/3)}})},n.onSideBarResizeComplete=function(){var e=Object(u.a)({},n.props.appSettings,{thumbnailSize:n.state.thumbnailSize});n.props.applicationActions.saveAppSettings(e)},n.onTagClicked=function(e){n.setState({selectedTag:e.name,lockedTags:[]},(function(){return n.canvas.current.applyTag(e.name)}))},n.confirmTagRename=function(e,t,a){n.renameCanceled=a,n.renameTagConfirm.current.open(e,t)},n.onTagRenamed=function(e,t){var a,r;return p.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n.renameCanceled=null,o.next=3,p.a.awrap(n.props.actions.updateProjectTag(n.props.project,e,t));case 3:a=o.sent,(r=a.find((function(e){return e.asset.id===n.state.selectedAsset.asset.id})))&&r&&n.setState({selectedAsset:r});case 6:case"end":return o.stop()}}))},n.onTagRenameCanceled=function(){n.renameCanceled&&(n.renameCanceled(),n.renameCanceled=null)},n.confirmTagDeleted=function(e){n.deleteTagConfirm.current.open(e)},n.onTagDeleted=function(e){var t,a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.a.awrap(n.props.actions.deleteProjectTag(n.props.project,e));case 2:t=r.sent,(a=t.find((function(e){return e.asset.id===n.state.selectedAsset.asset.id})))&&n.setState({selectedAsset:a});case 5:case"end":return r.stop()}}))},n.onCtrlTagClicked=function(e){var t=n.state.lockedTags;n.setState({selectedTag:e.name,lockedTags:sn.toggleTag(t,e.name)},(function(){return n.canvas.current.applyTag(e.name)}))},n.getTagFromKeyboardEvent=function(e){var t=$t.indexOf(e.key),a=n.props.project.tags;return t>=0&&t<a.length?a[t]:null},n.handleTagHotKey=function(e){var t=n.getTagFromKeyboardEvent(e);t&&n.onTagClicked(t)},n.isTaggableAssetType=function(e){return e.type!==k.c.Unknown},n.onAssetMetadataChanged=function(e){var t,a,r,o,i;return p.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.asset.state,a=Object(u.a)({},e.asset.parent||e.asset),n.isTaggableAssetType(e.asset)?e.asset.state=nt.a.get(e,"labelData.labels.length",0)>0?k.b.Tagged:k.b.Visited:e.asset.state===k.b.NotVisited&&(e.asset.state=k.b.Visited),a.id!==e.asset.id){s.next=7;break}a.state=e.asset.state,s.next=15;break;case 7:return s.next=9,p.a.awrap(n.props.actions.loadAssetMetadata(n.props.project,a));case 9:if((r=s.sent).asset.state===k.b.Tagged){s.next=14;break}return r.asset.state=e.asset.state,s.next=14,p.a.awrap(n.props.actions.saveAssetMetadata(n.props.project,r));case 14:a.state=r.asset.state;case 15:if(t===e.asset.state&&n.state.selectedAsset===e){s.next=19;break}return s.next=18,p.a.awrap(n.props.actions.saveAssetMetadata(n.props.project,e));case 18:n.props.project.lastVisitedAssetId===e.asset.id&&n.setState({selectedAsset:e});case 19:return s.next=21,p.a.awrap(n.props.actions.saveProject(n.props.project));case 21:o=Object(ne.a)(n.state.assets),(i=o.findIndex((function(e){return e.id===a.id})))>-1&&(o[i]=Object(u.a)({},a)),n.setState({assets:o,isValid:!0}),n.isUnmount||n.props.appTitleActions.setTitle("".concat(n.props.project.name," - [ ").concat(a.name," ]"));case 26:case"end":return s.stop()}}))},n.onCanvasRendered=function(e){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))},n.onSelectedRegionsChanged=function(e){n.setState({selectedRegions:e})},n.onTagsChanged=function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=Object(u.a)({},n.props.project,{tags:e}),a.next=3,p.a.awrap(n.props.actions.saveProject(t));case 3:case"end":return a.stop()}}))},n.onLockedTagsChanged=function(e){n.setState({lockedTags:e})},n.onBeforeAssetSelected=function(){return n.state.isValid||n.setState({showInvalidRegionWarning:!0}),n.state.isValid},n.selectAsset=function(e){var t,a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n.state.selectedAsset||n.state.selectedAsset.asset.id!==e.id){r.next=2;break}return r.abrupt("return");case 2:if(n.state.isValid){r.next=5;break}return n.setState({showInvalidRegionWarning:!0}),r.abrupt("return");case 5:return r.next=7,p.a.awrap(n.props.actions.loadAssetMetadata(n.props.project,e));case 7:if(t=r.sent,r.prev=8,t.asset.size){r.next=14;break}return r.next=12,p.a.awrap(Pt.a.readAssetAttributes(e));case 12:a=r.sent,t.asset.size={width:a.width,height:a.height};case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(8),console.warn("Error computing asset size");case 19:n.setState({selectedAsset:t},(function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.awrap(n.onAssetMetadataChanged(t));case 2:case"end":return e.stop()}}))}));case 20:case"end":return r.stop()}}),null,null,[[8,16]])},n.loadProjectAssets=function(){var e,t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n.loadingProjectAssets){a.next=2;break}return a.abrupt("return");case 2:return n.loadingProjectAssets=!0,a.t0=nt.a,a.next=6,p.a.awrap(n.props.actions.loadAssets(n.props.project));case 6:if(a.t1=a.sent,a.t2=function(e){return e.id},e=(0,a.t0)(a.t1).uniqBy(a.t2).value(),n.state.assets.length!==e.length||n.state.assets.map((function(e){return e.id})).join(",")!==e.map((function(e){return e.id})).join(",")){a.next=12;break}return n.loadingProjectAssets=!1,a.abrupt("return");case 12:t=e.find((function(e){return e.id===n.props.project.lastVisitedAssetId})),n.setState({assets:e},(function(){return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e.length>0)){a.next=3;break}return a.next=3,p.a.awrap(n.selectAsset(t||e[0]));case 3:n.loadingProjectAssets=!1;case 4:case"end":return a.stop()}}))}));case 14:case"end":return a.stop()}}))},n.loadAllOCRs=function(){var e,t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n.state.isRunningOCRs){a.next=2;break}return a.abrupt("return");case 2:if(e=n.props.project,t=new On(e),!n.state.assets){a.next=12;break}return n.setState({isRunningOCRs:!0}),a.prev=6,a.next=9,p.a.awrap(Object(A.k)(x.a.maxConcurrentServiceRequests,n.state.assets.filter((function(e){return e.state===k.b.NotVisited})).map((function(e){return e.id})),(function(e){var a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(a=n.state.assets.find((function(t){return t.id===e})))||a.state!==k.b.NotVisited){r.next=13;break}return r.prev=2,n.updateAssetState(a.id,!0),r.next=6,p.a.awrap(t.getRecognizedText(a.path,a.name));case 6:n.updateAssetState(a.id,!1,k.b.Visited),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(2),n.updateAssetState(a.id,!1),n.setState({isError:!0,errorTitle:r.t0.title,errorMessage:r.t0.message});case 13:case"end":return r.stop()}}),null,null,[[2,9]])})));case 9:return a.prev=9,n.setState({isRunningOCRs:!1}),a.finish(9);case 12:case"end":return a.stop()}}),null,null,[[6,,9,12]])},n.updateAssetState=function(e,t,a){n.setState((function(n){return{assets:n.assets.map((function(n){if(n.id===e){var r=Object(u.a)({},n,{isRunningOCR:t});return void 0!==a&&n.state===k.b.NotVisited&&(r.state=a),r}return n}))}}),(function(){if(n.state.selectedAsset&&e===n.state.selectedAsset.asset.id){var t=n.state.assets.find((function(t){return t.id===e}));t&&n.setState({selectedAsset:Object(u.a)({},n.state.selectedAsset,{asset:Object(u.a)({},t)})})}}))},n.updateRootAssets=function(){var e=Object(ne.a)(n.state.assets);e.forEach((function(e){var t=nt.a.get(n.props,"project.assets[asset.id]",null);t&&(e.state=t.state)})),n.setState({assets:e})},n.onLabelEnter=function(e){n.setState({hoveredLabel:e})},n.onLabelLeave=function(e){n.setState({hoveredLabel:null})},n.onCanvasRunningOCRStatusChanged=function(e){n.setState({isCanvasRunningOCR:e})},n.onFocused=function(){n.loadProjectAssets()},n.onTagChanged=function(e,t){var a,r;return p.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,p.a.awrap(n.props.actions.updateProjectTag(n.props.project,e,t));case 2:a=o.sent,(r=a.find((function(e){return e.asset.id===n.state.selectedAsset.asset.id})))&&r&&n.setState({selectedAsset:r});case 5:case"end":return o.stop()}}))},n.tagInputRef=c.a.createRef(),n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e,t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.addEventListener("focus",this.onFocused),this.isUnmount=!1,e=this.props.match.params.projectId,!this.props.project){n.next=9;break}return n.next=6,p.a.awrap(this.loadProjectAssets());case 6:this.props.appTitleActions.setTitle(this.props.project.name),n.next=14;break;case 9:if(!e){n.next=14;break}return t=this.props.recentProjects.find((function(t){return t.id===e})),n.next=13,p.a.awrap(this.props.actions.loadProject(t));case 13:this.props.appTitleActions.setTitle(t.name);case 14:document.title=C.c.editorPage.title+" - "+C.c.appName;case 15:case"end":return n.stop()}}),null,this)}},{key:"componentDidUpdate",value:function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.props.project||0!==this.state.assets.length){t.next=3;break}return t.next=3,p.a.awrap(this.loadProjectAssets());case 3:this.props.project&&e.project&&this.props.project.tags!==e.project.tags&&this.updateRootAssets();case 4:case"end":return t.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){this.isUnmount=!0,window.removeEventListener("focus",this.onFocused)}},{key:"render",value:function(){var e=this,t=this.props.project,n=this.state,a=n.assets,r=n.selectedAsset,o=n.isRunningOCRs,i=n.isCanvasRunningOCR,s=a.filter((function(e){return!e.parent})),l=r&&r.labelData&&r.labelData.labels||[],u=a.some((function(e){return e.state===k.b.NotVisited}));return t?c.a.createElement("div",{className:"editor-page",id:"pageEditor"},$t.map((function(t){return c.a.createElement(Mt.a,{displayName:C.c.editorPage.tags.hotKey.apply,key:t,keyEventType:Ut.a.KeyDown,accelerators:["".concat(t)],icon:"fa-tag",handler:e.handleTagHotKey})})),c.a.createElement(At.a,{split:"vertical",defaultSize:this.state.thumbnailSize.width,minSize:175,maxSize:175,paneStyle:{display:"flex"},onChange:this.onSideBarResize,onDragFinished:this.onSideBarResizeComplete},c.a.createElement("div",{className:"editor-page-sidebar bg-lighter-1"},u&&c.a.createElement("div",null,c.a.createElement(ke.a,{theme:Object(w.d)(),className:"editor-page-sidebar-run-ocr",type:"button",onClick:this.loadAllOCRs,disabled:this.state.isRunningOCRs},this.state.isRunningOCRs?c.a.createElement("div",null,c.a.createElement(ve.a,{size:be.a.small,label:"Running OCR",ariaLive:"off",labelPosition:"right"})):"Run OCR on all files")),c.a.createElement(Dn,{assets:s,selectedAsset:r?r.asset:null,onBeforeAssetSelected:this.onBeforeAssetSelected,onAssetSelected:this.selectAsset,thumbnailSize:this.state.thumbnailSize})),c.a.createElement("div",{className:"editor-page-content",onClick:this.onPageClick},c.a.createElement("div",{className:"editor-page-content-main"},c.a.createElement("div",{className:"editor-page-content-main-body",onClick:this.onPageContainerClick},r&&c.a.createElement(Fn,{ref:this.canvas,selectedAsset:this.state.selectedAsset,onAssetMetadataChanged:this.onAssetMetadataChanged,onCanvasRendered:this.onCanvasRendered,onSelectedRegionsChanged:this.onSelectedRegionsChanged,onRunningOCRStatusChanged:this.onCanvasRunningOCRStatusChanged,editorMode:this.state.editorMode,project:this.props.project,lockedTags:this.state.lockedTags,hoveredLabel:this.state.hoveredLabel},c.a.createElement(Bt,{controlsEnabled:this.state.isValid,onBeforeAssetChanged:this.onBeforeAssetSelected,asset:this.state.selectedAsset.asset})))),c.a.createElement("div",{className:"editor-page-right-sidebar"},c.a.createElement(on,{tags:this.props.project.tags,lockedTags:this.state.lockedTags,selectedRegions:this.state.selectedRegions,labels:l,onChange:this.onTagsChanged,onLockedTagsChange:this.onLockedTagsChanged,onTagClick:this.onTagClicked,onCtrlTagClick:this.onCtrlTagClicked,onTagRename:this.confirmTagRename,onTagDeleted:this.confirmTagDeleted,onLabelEnter:this.onLabelEnter,onLabelLeave:this.onLabelLeave,onTagChanged:this.onTagChanged,ref:this.tagInputRef})),c.a.createElement(xe,{title:C.c.editorPage.tags.rename.title,ref:this.renameTagConfirm,message:C.c.editorPage.tags.rename.confirmation,confirmButtonTheme:Object(w.f)(),onCancel:this.onTagRenameCanceled,onConfirm:this.onTagRenamed}),c.a.createElement(xe,{title:C.c.editorPage.tags.delete.title,ref:this.deleteTagConfirm,message:C.c.editorPage.tags.delete.confirmation,confirmButtonTheme:Object(w.f)(),onConfirm:this.onTagDeleted}))),c.a.createElement(at.a,{show:this.state.showInvalidRegionWarning,title:C.c.editorPage.messages.enforceTaggedRegions.title,message:C.c.editorPage.messages.enforceTaggedRegions.description,onClose:function(){return e.setState({showInvalidRegionWarning:!1})}}),c.a.createElement(at.a,{show:this.state.isError,title:this.state.errorTitle||"Error",message:this.state.errorMessage,onClose:function(){return e.setState({isError:!1,errorTitle:void 0,errorMessage:void 0})}}),c.a.createElement(it,{when:o||i,message:"An OCR operation is currently in progress, are you sure you want to leave?"}),c.a.createElement(Fe.a,{skipTo:"pageEditor"},C.c.common.skipToMainContent)):c.a.createElement("div",null,"Loading...")}}]),t}(c.a.Component))||Nn,Mn=(n(1082),n(1083),function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).renderItem=function(e,t){var a={background:n.getTagColor(e.fieldName)};return c.a.createElement("div",{key:t,onClick:function(){return n.onPredictionClick(e)},onMouseEnter:function(){return n.onPredictionMouseEnter(e)},onMouseLeave:function(){return n.onPredictionMouseLeave(e)}},c.a.createElement("li",{className:"predictiontag-item",style:a},c.a.createElement("div",{className:"predictiontag-color"},c.a.createElement("span",null,"P. ",e.page)),c.a.createElement("div",{className:"predictiontag-content"},n.getPredictionTagContent(e))),c.a.createElement("li",{className:"predictiontag-item-label"},e.text))},n.getTagColor=function(e){var t=n.props.tags.find((function(t){return t.name.toLocaleLowerCase()===e.toLocaleLowerCase()}));return t?t.color:"#999999"},n.getPredictionTagContent=function(e){return c.a.createElement("div",{className:"predictiontag-name-container"},c.a.createElement("div",{className:"predictiontag-name-body"},c.a.createElement("span",{title:e.fieldName,className:"predictiontag-name-text px-2"},e.fieldName)),c.a.createElement("div",{className:"predictiontag-confidence"},c.a.createElement("span",null,n.toPercentage(e.confidence))))},n.triggerDownload=function(){var e=window.URL.createObjectURL(new Blob([JSON.stringify(n.props.analyzeResult)])),t=document.createElement("a"),a="Result-"+n.props.downloadResultLabel.split(".")[0]+".json";t.href=e,t.setAttribute("download",a),document.body.appendChild(t),t.click()},n.toPercentage=function(e){return(100*e).toFixed(1)+"%"},n.onPredictionClick=function(e){n.props.onPredictionClick&&n.props.onPredictionClick(e)},n.onPredictionMouseEnter=function(e){n.props.onPredictionMouseEnter&&n.props.onPredictionMouseEnter(e)},n.onPredictionMouseLeave=function(e){n.props.onPredictionMouseLeave&&n.props.onPredictionMouseLeave(e)},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){for(var e=this,t=this.props,n=t.tags,a=t.predictions,r=n.map((function(e){return e.name})),o=0,i=Object.keys(a);o<i.length;o++){var s=i[o],l=a[s];null!=l&&(l.fieldName=s,l.displayOrder=r.indexOf(s))}var u=Object.values(a).filter(Boolean).sort((function(e,t){return e.displayOrder-t.displayOrder}));return c.a.createElement("div",null,c.a.createElement("div",{className:"prediction-header"},c.a.createElement("h5",{className:"prediction-header-result"},"Result:"),c.a.createElement(ke.a,{className:"prediction-header-download",theme:Object(w.d)(),type:"button",title:"Download JSON",onClick:this.triggerDownload},"Download result (JSON)")),c.a.createElement("div",{className:"prediction-field-header"},c.a.createElement("h6",{className:"prediction-field-header-field"}," Field "),c.a.createElement("h6",{className:"prediction-field-header-confidence"}," Confidence ")),c.a.createElement("div",{className:"prediction-header-clear"}),u.map((function(t,n){return e.renderItem(t,n)})))}}]),t}(c.a.Component)),Un=x.a.pdfjsCMapUrl(Nt.a.version);var Vn,_n=Object(b.b)((function(e){return{recentProjects:e.recentProjects,connections:e.connections,appSettings:e.appSettings,project:e.currentProject}}),(function(e){return{actions:Object(y.b)(a,e),applicationActions:Object(y.b)(r,e),appTitleActions:Object(y.b)(o,e)}}))(Ln=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={analyzeResult:{},fileLabel:"Browse for a file...",predictionLoaded:!0,currPage:void 0,imageUri:null,imageWidth:0,imageHeight:0,shouldShowAlert:!1,alertTitle:"",alertMessage:"",fileChanged:!1,predictRun:!1,isPredicting:!1,highlightedField:""},n.fileInput=c.a.createRef(),n.currPdf=void 0,n.tiffImages=void 0,n.imageMap=void 0,n.handleDummyInputClick=function(){document.getElementById("hiddenInputFile").click()},n.renderPrevPageButton=function(){if(!nt.a.get(Object(ue.a)(n),"fileInput.current.files[0]",null))return c.a.createElement("div",null);return n.state.currPage>1?c.a.createElement(Ae.a,{className:"toolbar-btn prev",title:"Previous",iconProps:{iconName:"ChevronLeft"},onClick:function(){n.setState((function(e){return{currPage:Math.max(1,e.currPage-1)}}))}}):c.a.createElement("div",null)},n.renderNextPageButton=function(){if(!nt.a.get(Object(ue.a)(n),"fileInput.current.files[0]",null))return c.a.createElement("div",null);var e=n.getPageCount();return n.state.currPage<e?c.a.createElement(Ae.a,{className:"toolbar-btn next",title:"Next",onClick:function(){n.setState((function(t){return{currPage:Math.min(t.currPage+1,e)}}))},iconProps:{iconName:"ChevronRight"}}):c.a.createElement("div",null)},n.renderImageMap=function(){return c.a.createElement(yn,{ref:function(e){return n.imageMap=e},imageUri:n.state.imageUri||"",imageWidth:n.state.imageWidth,imageHeight:n.state.imageHeight,featureStyler:n.featureStyler,onMapReady:n.noOp})},n.handleFileChange=function(){if(""!==n.fileInput.current.value){var e=n.fileInput.current.value.split("\\").pop();""!==e&&n.setState({fileLabel:e,currPage:1,analyzeResult:{},fileChanged:!0,file:n.fileInput.current.files[0],predictRun:!1},(function(){n.imageMap&&n.imageMap.removeAllFeatures()}))}},n.handleClick=function(){n.setState({predictionLoaded:!1,isPredicting:!0}),n.getPrediction().then((function(e){n.setState({analyzeResult:e,predictionLoaded:!0,predictRun:!0,isPredicting:!1},(function(){n.drawPredictionResult()}))})).catch((function(e){var t="";t=e.response?e.response.data:e.errorCode===k.e.PredictWithoutTrainForbidden?C.c.errors.predictWithoutTrainForbidden.message:e.errorCode===k.e.ModelNotFound?e.message:Object(C.b)(C.c.errors.endpointConnectionError.message,{endpoint:"form recognizer backend URL"}),n.setState({shouldShowAlert:!0,alertTitle:"Prediction Failed",alertMessage:t,isPredicting:!1})}))},n.loadFile=function(e){if(e)switch(e.type){case"image/jpeg":case"image/png":n.loadImageFile(e);break;case"image/tiff":n.loadTiffFile(e);break;case"application/pdf":n.loadPdfFile(e);break;default:n.setState({imageUri:"",shouldShowAlert:!0,alertTitle:"Not supported file type",alertMessage:"Sorry, we currently only support JPG/PNG/PDF files."})}},n.loadImageFile=function(e){var t,a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=n.createObjectURL(e),r.next=3,p.a.awrap(Object(A.f)(t));case 3:a=r.sent,n.setState({currPage:1,imageUri:a.toDataURL(x.a.convertedImageFormat,x.a.convertedImageQuality),imageWidth:a.width,imageHeight:a.height});case 5:case"end":return r.stop()}}))},n.loadTiffFile=function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(Pt.a.readFileAsArrayBuffer(e));case 2:t=a.sent,n.tiffImages=Object(A.g)(t),n.loadTiffPage(n.tiffImages,n.state.currPage);case 5:case"end":return a.stop()}}))},n.loadTiffPage=function(e,t){var a=e[t-1],r=Object(A.j)(a);n.setState({currPage:t,imageUri:r.toDataURL(x.a.convertedImageFormat,x.a.convertedImageQuality),imageWidth:a.width,imageHeight:a.height})},n.loadPdfFile=function(e){var t=new FileReader;t.onload=function(e){var t=new Uint8Array(e.target.result);Nt.a.getDocument({data:t,cMapUrl:Un,cMapPacked:!0}).promise.then((function(e){n.currPdf=e,n.loadPdfPage(e,n.state.currPage)}),(function(e){n.setState({shouldShowAlert:!0,alertTitle:"Failed loading PDF",alertMessage:e.toString()})}))},t.readAsArrayBuffer(e)},n.loadPdfPage=function(e,t){var a,r,o,i,s,c;return p.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,p.a.awrap(e.getPage(t));case 2:return a=l.sent,2,r=a.getViewport({scale:2}),o=document.createElement("canvas"),i=o.getContext("2d"),o.height=r.height,o.width=r.width,s={canvasContext:i,viewport:r},c=a.render(s),l.next=13,p.a.awrap(c.promise);case 13:n.setState({currPage:t,imageUri:o.toDataURL(x.a.convertedImageFormat,x.a.convertedImageQuality),imageWidth:o.width,imageHeight:o.height});case 14:case"end":return l.stop()}}))},n.createBoundingBoxVectorFeature=function(e,t,a,r){for(var o=[],i=a[2]-a[0],s=a[3]-a[1],c=r[2]-r[0],l=r[3]-r[1],u=0;u<t.length;u+=2)o.push([Math.round(t[u]/c*i),Math.round((1-t[u+1]/l)*s)]);var d=new kn.a({geometry:new Tn.a([o])}),p=n.props.project.tags.find((function(t){return t.name.toLocaleLowerCase()===e.toLocaleLowerCase()})),g=e.toLocaleLowerCase()===n.state.highlightedField.toLocaleLowerCase();return d.setProperties({color:nt.a.get(p,"color","#333333"),fieldName:e,isHighlighted:g}),d},n.featureStyler=function(e){return new En.b({stroke:new jn.a({color:e.get("color"),width:e.get("isHighlighted")?4:2}),fill:new Sn.a({color:"rgba(255, 255, 255, 0)"})})},n.drawPredictionResult=function(){for(var e=[],t=[0,0,n.state.imageWidth,n.state.imageHeight],a=n.getOcrFromAnalyzeResult(n.state.analyzeResult)[n.state.currPage-1],r=[0,0,a.width,a.height],o=n.getPredictionsFromAnalyzeResult(n.state.analyzeResult),i=0,s=Object.keys(o);i<s.length;i++){var c=s[i],l=o[c];if(nt.a.get(l,"page",null)===n.state.currPage){var u=c,d=nt.a.get(l,"boundingBox",[]),p=n.createBoundingBoxVectorFeature(u,d,t,r);e.push(p)}}n.imageMap.addFeatures(e)},n.poll=function(e,t,n){var a=Number(new Date)+(t||1e4);n=n||100;return new Promise((function t(r,o){e().then((function(e){e.data.status.toLowerCase()===x.a.statusCodeSucceeded?r(e.data):e.data.status.toLowerCase()===x.a.statusCodeFailed?o(nt.a.get(e,"data.analyzeResult.errors[0].errorMessage","Generic error during prediction")):Number(new Date)<a?setTimeout(t,n,r,o):o("Timed out, please try other file.")}))}))},n.createObjectURL=function(e){return window.URL?window.URL.createObjectURL(e):""},n.noOp=function(){},n.onPredictionClick=function(e){var t=e.page;Number.isInteger(t)&&t!==n.state.currPage&&n.setState({currPage:t,highlightedField:e.fieldName})},n.onPredictionMouseEnter=function(e){n.setState({highlightedField:e.fieldName})},n.onPredictionMouseLeave=function(e){n.setState({highlightedField:""})},n.setPredictedFieldHighlightStatus=function(e){var t=n.imageMap.getAllFeatures(),a=!0,r=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var c=i.value;c.get("fieldName").toLocaleLowerCase()===e.toLocaleLowerCase()?c.set("isHighlighted",!0):c.set("isHighlighted",!1)}}catch(l){r=!0,o=l}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e,t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e=this.props.match.params.projectId)){n.next=6;break}return t=this.props.recentProjects.find((function(t){return t.id===e})),n.next=5,p.a.awrap(this.props.actions.loadProject(t));case 5:this.props.appTitleActions.setTitle(t.name);case 6:document.title=C.c.predict.title+" - "+C.c.appName;case 7:case"end":return n.stop()}}),null,this)}},{key:"componentDidUpdate",value:function(e,t){this.state.file&&(this.state.fileChanged?(this.currPdf=null,this.tiffImages=[],this.loadFile(this.state.file),this.setState({fileChanged:!1})):t.currPage!==this.state.currPage?null!==this.currPdf?this.loadPdfPage(this.currPdf,this.state.currPage):0!==this.tiffImages.length&&this.loadTiffPage(this.tiffImages,this.state.currPage):this.getOcrFromAnalyzeResult(this.state.analyzeResult).length>0&&t.imageUri!==this.state.imageUri&&(this.imageMap.removeAllFeatures(),this.drawPredictionResult()),t.highlightedField!==this.state.highlightedField&&this.setPredictedFieldHighlightStatus(this.state.highlightedField))}},{key:"render",value:function(){var e=this,t=!this.state.predictionLoaded,n=!this.state.predictionLoaded||!this.state.file,a=this.getPredictionsFromAnalyzeResult(this.state.analyzeResult);return c.a.createElement("div",{className:"predict",id:"pagePredict"},c.a.createElement("div",{className:"predict-main"},this.state.file&&this.state.imageUri&&this.renderImageMap(),this.renderPrevPageButton(),this.renderNextPageButton()),c.a.createElement("div",{className:"predict-sidebar bg-lighter-1"},c.a.createElement("div",{className:"condensed-list"},c.a.createElement("h6",{className:"condensed-list-header bg-darker-2 p-2 flex-center"},c.a.createElement(E.a,{iconName:"Insights"}),c.a.createElement("span",{className:"condensed-list-title"},"Predict")),c.a.createElement("div",{className:"p-3"},c.a.createElement("h5",null,C.c.predict.uploadFile),c.a.createElement("div",{style:{display:"flex",marginBottom:"25px"}},c.a.createElement("input",{"aria-hidden":"true",type:"file",accept:"application/pdf, image/jpeg, image/png, image/tiff",id:"hiddenInputFile",ref:this.fileInput,onChange:this.handleFileChange,disabled:t}),c.a.createElement("input",{type:"text",id:"inputPredictFile",style:{cursor:t?"default":"pointer"},onClick:this.handleDummyInputClick,readOnly:!0,className:"dummyInputFile","aria-label":C.c.predict.uploadFile,value:this.state.fileLabel}),c.a.createElement("div",{className:"rlMargin10"},c.a.createElement(ke.a,{theme:Object(w.d)(),text:"Browse",allowDisabledFocus:!0,disabled:t,autoFocus:!0,onClick:this.handleDummyInputClick})),c.a.createElement(ke.a,{theme:Object(w.g)(),text:"Predict","aria-label":this.state.predictionLoaded?"":C.c.predict.inProgress,allowDisabledFocus:!0,disabled:n,onClick:this.handleClick})),!this.state.predictionLoaded&&c.a.createElement("div",{className:"loading-container"},c.a.createElement(ve.a,{label:C.c.predict.inProgress,ariaLive:"assertive",labelPosition:"right",size:be.a.large})),Object.keys(a).length>0&&c.a.createElement(Mn,{predictions:a,analyzeResult:this.state.analyzeResult,page:this.state.currPage,tags:this.props.project.tags,downloadResultLabel:this.state.fileLabel,onPredictionClick:this.onPredictionClick,onPredictionMouseEnter:this.onPredictionMouseEnter,onPredictionMouseLeave:this.onPredictionMouseLeave}),0===Object.keys(a).length&&this.state.predictRun&&c.a.createElement("div",null,"No field can be extracted.")))),c.a.createElement(at.a,{show:this.state.shouldShowAlert,title:this.state.alertTitle,message:this.state.alertMessage,onClose:function(){return e.setState({shouldShowAlert:!1,alertTitle:"",alertMessage:"",predictionLoaded:!0})}}),c.a.createElement(it,{when:this.state.isPredicting,message:"A prediction operation is currently in progress, are you sure you want to leave?"}),c.a.createElement(Fe.a,{skipTo:"pagePredict"},C.c.common.skipToMainContent))}},{key:"getPageCount",value:function(){return null!==this.currPdf?nt.a.get(this.currPdf,"numPages",1):0!==this.tiffImages.length?this.tiffImages.length:1}},{key:"getPrediction",value:function(){var e,t,n,a,r,o=this;return p.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e=nt.a.get(this.props.project,"trainRecord.modelInfo.modelId")){i.next=3;break}throw new k.a(k.e.PredictWithoutTrainForbidden,C.c.errors.predictWithoutTrainForbidden.message,C.c.errors.predictWithoutTrainForbidden.title);case 3:return t=ot.a.resolve(this.props.project.apiUriBase,"".concat(x.a.apiModelsPath,"/").concat(e,"/analyze?includeTextDetails=true")),n={"Content-Type":this.state.file.type,"cache-control":"no-cache"},i.prev=5,i.next=8,p.a.awrap(ut.postWithAutoRetry(t,this.state.file,{headers:n},this.props.project.apiKey));case 8:a=i.sent,i.next=14;break;case 11:i.prev=11,i.t0=i.catch(5),ut.handleServiceError(i.t0);case 14:return r=a.headers["operation-location"],i.abrupt("return",this.poll((function(){return ut.getWithAutoRetry(r,{headers:n},o.props.project.apiKey)}),12e4,500));case 16:case"end":return i.stop()}}),null,this,[[5,11]])}},{key:"getPredictionsFromAnalyzeResult",value:function(e){return nt.a.get(e,"analyzeResult.documentResults[0].fields",{})}},{key:"getOcrFromAnalyzeResult",value:function(e){return nt.a.get(e,"analyzeResult.readResults",[])}}]),t}(c.a.Component))||Ln,zn=function(e){function t(e,n){var a;return Object(g.a)(this,t),(a=Object(f.a)(this,Object(h.a)(t).call(this,e,n))).onChange=function(e){var t=a.props.connections.find((function(t){return t.id===e.target.value}))||{};a.setState({value:t},(function(){return a.props.onChange(t)}))},a.createConnection=function(){a.props.history.push("/connections/create")},a.state={value:a.props.value},a.onChange=a.onChange.bind(Object(ue.a)(a)),a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&this.setState({value:this.props.value||null})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.connections,a=this.state.value?this.state.value.id:"";return c.a.createElement("div",{className:"input-group"},c.a.createElement("select",{id:t,value:a,onChange:this.onChange,required:!0,className:"form-control"},c.a.createElement("option",null,"Select Connection"),n.map((function(e){return c.a.createElement("option",{className:"connection-option",key:e.id,value:e.id},e.name)}))),c.a.createElement("div",{className:"input-group-append"},c.a.createElement(Te.a,{className:"connection-picker-button",theme:Object(w.e)(),type:"button",onClick:this.createConnection},"Add Connection")))}}]),t}(c.a.Component),Kn=Object(l.h)(zn),Wn=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).onChange=n.onChange.bind(Object(ue.a)(n)),n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement("select",{id:this.props.id,className:"form-control",value:this.props.value,onChange:this.onChange},c.a.createElement("option",{value:""},"Generate New Security Token"),this.props.securityTokens.map((function(e){return c.a.createElement("option",{key:e.key,value:e.name},e.name)})))}},{key:"onChange",value:function(e){var t=e.target;this.props.onChange(t.value?t.value:void 0)}}]),t}(c.a.Component);n(1084);!function(e){e[e.Create=0]="Create",e[e.Update=1]="Update",e[e.Other=2]="Other"}(Vn||(Vn={}));var Hn,qn=Object(C.a)(n(1085)),Jn=Object(C.a)(n(1086)),Qn=Object(C.a)(n(1087)),Gn=function(e){function t(e,n){var a;return Object(g.a)(this,t),(a=Object(f.a)(this,Object(h.a)(t).call(this,e,n))).widgets={protectedInput:_e},a.onFormChange=function(e){a.props.onChange&&a.props.onChange(e.formData)},a.state={classNames:["needs-validation"],uiSchema:Object(u.a)({},Qn),formSchema:{},formData:Object(u.a)({},a.props.project)},a.onFormSubmit=a.onFormSubmit.bind(Object(ue.a)(a)),a.onFormCancel=a.onFormCancel.bind(Object(ue.a)(a)),a.onFormValidate=a.onFormValidate.bind(Object(ue.a)(a)),a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){if(e.project!==this.props.project&&this.setState({formData:Object(u.a)({},this.props.project)}),e.action!==this.props.action)switch(this.props.action){case Vn.Create:this.setState({formSchema:qn});break;case Vn.Update:this.setState({formSchema:Jn});break;default:this.setState({formSchema:{}})}}},{key:"render",value:function(){return c.a.createElement(De.a,{className:this.state.classNames.join(" "),showErrorList:!1,liveValidate:!0,noHtml5Validate:!0,FieldTemplate:Me,validate:this.onFormValidate,fields:this.fields(),widgets:this.widgets,schema:this.state.formSchema,uiSchema:this.state.uiSchema,formData:this.state.formData,onChange:this.onFormChange,onSubmit:this.onFormSubmit},c.a.createElement("div",null,c.a.createElement(ke.a,{theme:Object(w.d)(),className:"mr-2",type:"submit"},C.c.projectSettings.save),c.a.createElement(ke.a,{theme:Object(w.e)(),type:"button",onClick:this.onFormCancel},C.c.common.cancel)))}},{key:"fields",value:function(){var e=this;return{securityToken:ze(Wn,(function(t){return{id:t.idSchema.$id,schema:t.schema,value:t.formData,securityTokens:e.props.appSettings.securityTokens,onChange:t.onChange}})),sourceConnection:ze(Kn,(function(t){return{id:t.idSchema.$id,value:t.formData,connections:e.props.connections,onChange:t.onChange}})),targetConnection:ze(Kn,(function(t){var n=e.props.connections.filter((function(e){return O.a.isRegistered(e.providerType)}));return{id:t.idSchema.$id,value:t.formData,connections:n,onChange:t.onChange}}))}}},{key:"onFormValidate",value:function(e,t){return this.props.action===Vn.Create&&e.sourceConnection&&0===Object.keys(e.sourceConnection).length&&t.sourceConnection.addError("is a required property"),-1===this.state.classNames.indexOf("was-validated")&&this.setState({classNames:[].concat(Object(ne.a)(this.state.classNames),["was-validated"])}),t}},{key:"onFormSubmit",value:function(e){var t=Object(u.a)({},e.formData,{sourceConnection:e.formData.sourceConnection,folderPath:this.normalizeFolderPath(e.formData.folderPath)});t.name=t.name.replace(/\s+/g," ").trim(),this.props.onSubmit(t)}},{key:"onFormCancel",value:function(){this.props.onCancel&&this.props.onCancel()}},{key:"normalizeFolderPath",value:function(e){for(var t=e?e.trim():"";t.length>0&&0===t.indexOf("/");)t=t.substr(1,t.length-1);for(;t.length>0&&t.lastIndexOf("/")===t.length-1;)t=t.substr(0,t.length-1);return t}}]),t}(c.a.Component),Yn=(n(1088),n(142));var $n=Object(b.b)((function(e){return{project:e.currentProject,connections:e.connections,recentProjects:e.recentProjects,appSettings:e.appSettings}}),(function(e){return{projectActions:Object(y.b)(a,e),applicationActions:Object(y.b)(r,e),appTitleActions:Object(y.b)(o,e)}}))(Hn=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={project:n.props.project,action:null,isError:!1},n.getProjectSettingAction=function(e){return"/projects/create"===n.props.match.url?Vn.Create:e?Vn.Update:Vn.Other},n.newProjectSetting=function(){var e=Object(Yn.getStorageItem)(x.a.projectFormTempKey);e&&n.setState({project:JSON.parse(e)})},n.loadProjectSetting=function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t=n.props.recentProjects.find((function(t){return t.id===e})))){a.next=8;break}return a.next=4,p.a.awrap(n.props.applicationActions.ensureSecurityToken(t));case 4:return a.next=6,p.a.awrap(n.props.projectActions.loadProject(t));case 6:a.next=9;break;case 8:throw Error("There might be something wrong. We cannot find any project given the project ID.");case 9:case"end":return a.stop()}}))},n.onFormChange=function(e){n.isPartialProject(e)&&Object(Yn.setStorageItem)(x.a.projectFormTempKey,JSON.stringify(e))},n.onFormSubmit=function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=!e.id,a.next=3,p.a.awrap(n.isValidProjectName(e,t));case 3:if(!a.sent){a.next=6;break}return R.b.error(Object(C.b)(C.c.projectSettings.messages.projectExisted,{project:e})),a.abrupt("return");case 6:return a.next=8,p.a.awrap(n.deleteOldProjectWhenRenamed(e,t));case 8:return a.next=10,p.a.awrap(n.props.applicationActions.ensureSecurityToken(e));case 10:return a.next=12,p.a.awrap(n.props.projectActions.saveProject(e));case 12:Object(Yn.removeStorageItem)(x.a.projectFormTempKey),R.b.success(Object(C.b)(C.c.projectSettings.messages.saveSuccess,{project:e})),t?n.props.history.push("/projects/".concat(n.props.project.id,"/edit")):n.props.history.goBack();case 15:case"end":return a.stop()}}))},n.onFormCancel=function(){Object(Yn.removeStorageItem)(x.a.projectFormTempKey),n.props.history.goBack()},n.isPartialProject=function(e){return e&&!e.id&&(!!e.name||!!e.description||e.sourceConnection&&Object.keys(e.sourceConnection).length>0||e.tags&&e.tags.length>0)},n.deleteOldProjectWhenRenamed=function(e,t){var a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=null!==n.props.project&&n.props.project.name!==e.name,t||!a){r.next=4;break}return r.next=4,p.a.awrap(n.props.projectActions.deleteProject(n.props.project));case 4:case"end":return r.stop()}}))},n.isValidProjectName=function(e,t){var a,r;return p.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=null!==n.props.project&&n.props.project.name!==e.name,r=new N,o.t0=t||a,!o.t0){o.next=7;break}return o.next=6,p.a.awrap(r.isProjectNameAlreadyUsed(e));case 6:o.t0=o.sent;case 7:return o.abrupt("return",o.t0);case 8:case"end":return o.stop()}}))},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e,t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:e=this.props.match.params.projectId,n.prev=1,t=this.getProjectSettingAction(e),n.t0=t,n.next=n.t0===Vn.Create?6:n.t0===Vn.Update?9:14;break;case 6:return this.newProjectSetting(),this.setState({action:t}),n.abrupt("break",15);case 9:if(this.props.project){n.next=12;break}return n.next=12,p.a.awrap(this.loadProjectSetting(e));case 12:return this.setState({action:t}),n.abrupt("break",15);case 14:throw Error("Your action is neither new nor edit a project setting. Please check if you are loading the project correctly");case 15:n.next=21;break;case 17:n.prev=17,n.t1=n.catch(1),this.setState({isError:!0}),alert(n.t1);case 21:this.props.appTitleActions.setTitle(C.c.projectSettings.title),document.title=C.c.projectSettings.title+" - "+C.c.appName;case 23:case"end":return n.stop()}}),null,this,[[1,17]])}},{key:"componentDidUpdate",value:function(e){e.project!==this.props.project&&this.setState({project:this.props.project})}},{key:"render",value:function(){return c.a.createElement("div",{className:"project-settings-page",id:"pageProjectSettings"},c.a.createElement("div",{className:"project-settings-page-settings m-3"},c.a.createElement("h3",{className:"flex-center"},c.a.createElement(E.a,{iconName:"DocumentManagement"}),c.a.createElement("span",{className:"px-2"},C.c.projectSettings.title)),c.a.createElement("div",{className:"m-3"},c.a.createElement(Gn,{project:this.state.project,connections:this.props.connections,appSettings:this.props.appSettings,onChange:this.onFormChange,onSubmit:this.onFormSubmit,onCancel:this.onFormCancel,action:this.state.action}))),c.a.createElement(Fe.a,{skipTo:"pageProjectSettings"},C.c.common.skipToMainContent),this.state.isError&&c.a.createElement(l.b,{to:"/"}))}}]),t}(c.a.Component))||Hn;function Zn(){return c.a.createElement("div",{className:"app-content text-light"},c.a.createElement(l.e,null,c.a.createElement(l.c,{path:"/",exact:!0,component:Ne}),c.a.createElement(l.c,{path:"/settings",component:Qe}),c.a.createElement(l.c,{path:"/connections/:connectionId",component:xt}),c.a.createElement(l.c,{path:"/connections",exact:!0,component:xt}),c.a.createElement(l.c,{path:"/projects/:projectId/edit",component:Bn}),c.a.createElement(l.c,{path:"/projects/create",component:$n}),c.a.createElement(l.c,{path:"/projects/:projectId/train",component:dt}),c.a.createElement(l.c,{path:"/projects/:projectId/predict",component:_n}),c.a.createElement(l.c,{path:"/projects/:projectId/settings",component:$n}),c.a.createElement(l.c,{component:Ne})))}n.d(t,"a",(function(){return Zn}))},57:function(e,t,n){"use strict";n.d(t,"i",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return g})),n.d(t,"k",(function(){return b})),n.d(t,"b",(function(){return y})),n.d(t,"g",(function(){return E})),n.d(t,"j",(function(){return C})),n.d(t,"f",(function(){return w})),n.d(t,"e",(function(){return S})),n.d(t,"h",(function(){return O}));var a=n(4),r=n.n(a),o=n(16),i=(n(21),n(140)),s=n(322),c=n.n(s),l=n(155);function u(e,t){if(e>t)throw new Error("min (".concat(e,") can't be bigger than max (").concat(t,")"));return e===t?e:(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e)}function d(e,t){var n={"#":"%23","?":"%3F"},a="file:".concat(encodeURI(function(e){return e.replace(/\\/g,"/")}(e)));return t?a.replace(/(#|\?)/g,(function(e){return n[e]})):a}function p(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=Object(o.a)({},e,{sourceConnection:Object(o.a)({},e.sourceConnection)}),a.next=3,r.a.awrap(m(e.sourceConnection.providerOptions,t.key));case 3:return n.sourceConnection.providerOptions=a.sent,a.next=6,r.a.awrap(h(e.apiKey,t.key));case 6:return n.apiKey=a.sent,a.abrupt("return",n);case 8:case"end":return a.stop()}}))}function g(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=Object(o.a)({},e,{sourceConnection:Object(o.a)({},e.sourceConnection)}),a.next=3,r.a.awrap(f(n.sourceConnection.providerOptions,t.key));case 3:return n.sourceConnection.providerOptions=a.sent,a.next=6,r.a.awrap(v(e.apiKey,t.key));case 6:return n.apiKey=a.sent,a.abrupt("return",n);case 8:case"end":return a.stop()}}))}function m(e,t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",null);case 2:if(!e.encrypted){n.next=4;break}return n.abrupt("return",e);case 4:return n.next=6,r.a.awrap(Object(i.d)(e,t));case 6:return n.t0=n.sent,n.abrupt("return",{encrypted:n.t0});case 8:case"end":return n.stop()}}))}function f(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if((n=e)&&n.encrypted){a.next=3;break}return a.abrupt("return",e);case 3:return a.next=5,r.a.awrap(Object(i.b)(e.encrypted,t));case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}}))}function h(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt("return",void 0);case 2:if(!(n=e)||!n.encrypted){a.next=5;break}return a.abrupt("return",n);case 5:return a.next=7,r.a.awrap(Object(i.c)(e,t));case 7:return a.t0=a.sent,a.abrupt("return",{encrypted:a.t0});case 9:case"end":return a.stop()}}))}function v(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if((n=e)&&n.encrypted){a.next=3;break}return a.abrupt("return",e);case 3:return a.next=5,r.a.awrap(Object(i.a)(n.encrypted,t));case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}}))}function b(e,t,n){var a,o,i,s;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:a=[],o=[],i=0,s=function(){var s,c;return r.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(s=t[i],i++,(c=n(s)).then((function(e){return o.splice(o.indexOf(c),1),e})).catch((function(e){throw o.splice(o.indexOf(c),1),e})),o.push(c),a.push(c),!(o.length>=e)){l.next=9;break}return l.next=9,r.a.awrap(Promise.race(o).catch());case 9:case"end":return l.stop()}}))};case 4:if(!(i<t.length)){c.next=9;break}return c.next=7,r.a.awrap(s());case 7:c.next=4;break;case 9:return c.abrupt("return",Promise.all(a));case 10:case"end":return c.stop()}}))}function y(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))}function E(e){var t=c.a.decode(e),n=!0,a=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;c.a.decodeImage(e,s)}}catch(l){a=!0,r=l}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return t}function C(e){var t=new Uint8ClampedArray(c.a.toRGBA8(e).buffer),n=new ImageData(t,e.width,e.height),a=document.createElement("canvas"),r=a.getContext("2d");return a.height=e.height,a.width=e.width,r.putImageData(n,0,0),a}function w(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var a=document.createElement("img");a.onload=function(){var e,n;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.a.awrap(l.a.readImageOrientation(a));case 2:e=o.sent,n=j(a,e),t(n);case 5:case"end":return o.stop()}}))},a.crossOrigin="anonymous",a.onerror=n,a.src=e})));case 1:case"end":return t.stop()}}))}function j(e,t){var n=e.width,a=e.height,r=document.createElement("canvas");r.width=n,r.height=a,t>4&&(r.width=a,r.height=n);var o=r.getContext("2d");switch(t){case 2:o.translate(n,0),o.scale(-1,1);break;case 3:o.translate(n,a),o.rotate(Math.PI);break;case 4:o.translate(0,a),o.scale(1,-1);break;case 5:o.rotate(.5*Math.PI),o.scale(1,-1);break;case 6:o.rotate(.5*Math.PI),o.translate(0,-a);break;case 7:o.rotate(.5*Math.PI),o.translate(n,-a),o.scale(-1,1);break;case 8:o.rotate(-.5*Math.PI),o.translate(-n,0)}return o.drawImage(e,0,0,n,a),r}function S(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return(n&&n[0]&&n[0][0]===e?e:"")+n.join(e).split(e).filter((function(e){return e&&""!==e.trim()})).join(e)}function O(e,t,n,a){return e.map((function(e){var r=t.find((function(t){return t[n]===e[n]}));if(r){var i=Object(o.a)({},e);return a.forEach((function(e){return i[e]=r[e]})),i}return e}))}},574:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(91),i=n(171),s=n(570);function c(e){var t=e.to,n=e.disabled,a=Object(s.a)(e,["to","disabled"]);return n?r.a.createElement("span",{className:"disabled",title:a.title},a.children):r.a.createElement(o.c,{title:a.title,to:t,role:"button"},a.children)}var l=n(5);function u(e){var t=e.project,n=t?t.id:null;return r.a.createElement("div",{className:"bg-lighter-2 app-sidebar",id:"appSidebar"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(o.c,{title:"Home",to:"/",exact:!0,role:"button"},r.a.createElement(i.a,{iconName:"Home"}))),r.a.createElement("li",null,r.a.createElement(c,{disabled:!n,title:l.c.tags.editor,to:"/projects/".concat(n,"/edit")},r.a.createElement(i.a,{iconName:"Tag"}))),r.a.createElement("li",null,r.a.createElement(c,{disabled:!n,title:l.c.train.title,to:"/projects/".concat(n,"/train")},r.a.createElement(i.a,{iconName:"MachineLearning"}))),r.a.createElement("li",null,r.a.createElement(c,{disabled:!n,title:"Predict",to:"/projects/".concat(n,"/predict")},r.a.createElement(i.a,{iconName:"Insights"}))),r.a.createElement("li",null,r.a.createElement(c,{disabled:!n,title:l.c.projectSettings.title,to:"/projects/".concat(n,"/settings")},r.a.createElement(i.a,{iconName:"DocumentManagement"}))),r.a.createElement("li",null,r.a.createElement(o.c,{title:l.c.connections.title,to:"/connections",role:"button"},r.a.createElement(i.a,{iconName:"Plug"})))),r.a.createElement("div",{className:"app-sidebar-fill"}),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(o.c,{title:l.c.appSettings.title,to:"/settings",role:"button"},r.a.createElement(i.a,{iconName:"Settings"})))))}n.d(t,"a",(function(){return u}))},590:function(e,t,n){e.exports=n(1099)},601:function(e,t,n){},602:function(e,t,n){},605:function(e,t,n){},651:function(e,t,n){},652:function(e,t,n){},7:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return h})),n.d(t,"i",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"d",(function(){return g})),n.d(t,"g",(function(){return m})),n.d(t,"f",(function(){return f}));var a,r=n(9),o=n(14),i=n(12),s=n(13),c=n(321);!function(e){e.Unknown="unknown",e.GenericRenderError="genericRenderError",e.ProjectInvalidJson="projectInvalidJson",e.ProjectInvalidSecurityToken="projectInvalidSecurityToken",e.ProjectDuplicateName="projectDuplicateName",e.SecurityTokenNotFound="securityTokenNotFound",e.OverloadedKeyBinding="overloadedKeyBinding",e.BlobContainerIONotFound="blobContainerIONotFound",e.BlobContainerIOForbidden="blobContainerIOForbidden",e.PredictWithoutTrainForbidden="predictWithoutTrainForbidden",e.ModelNotFound="modelNotFound",e.ModelCountLimitExceeded="modelCountLimitExceeded",e.HttpStatusUnauthorized="unauthorized",e.HttpStatusNotFound="notFound",e.HttpStatusTooManyRequests="tooManyRequests"}(a||(a={}));var l,u,d,p,g,m,f,h=function(e){function t(e,n){var a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,n))).errorCode=void 0,a.message=void 0,a.title=void 0,a.errorCode=e,a.message=n,a.title=s,a}return Object(s.a)(t,e),t}(Object(c.a)(Error));!function(e){e.Local="local",e.Cloud="cloud",e.Other="other"}(l||(l={})),function(e){e[e.Unknown=0]="Unknown",e[e.Image=1]="Image",e[e.PDF=5]="PDF",e[e.TIFF=6]="TIFF"}(u||(u={})),function(e){e[e.NotVisited=0]="NotVisited",e[e.Visited=1]="Visited",e[e.Tagged=2]="Tagged"}(d||(d={})),function(e){e.Polyline="POLYLINE",e.Point="POINT",e.Rectangle="RECTANGLE",e.Polygon="POLYGON",e.Square="SQUARE"}(p||(p={})),function(e){e.Rectangle="RECT",e.Polygon="POLYGON",e.Polyline="POLYLINE",e.Point="POINT",e.Select="SELECT",e.CopyRect="COPYRECT",e.None="NONE"}(g||(g={})),function(e){e.String="string",e.Number="number",e.Date="date",e.Time="time",e.Integer="integer"}(m||(m={})),function(e){e.NotSpecified="not-specified",e.Currency="currency",e.Decimal="decimal",e.DecimalCommaSeparated="decimal-comma-seperated",e.NoWhiteSpaces="no-whitespaces",e.Alphanumeric="alphanumeric",e.DMY="dmy",e.MDY="mdy",e.YMD="ymd"}(f||(f={}))},72:function(e,t,n){"use strict";function a(e){return function(){return{type:e}}}function r(e){return function(t){return{type:e,payload:t}}}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));a(n(30).a.ANY_OTHER_ACTION)},78:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(16),r=n(9),o=n(10),i=n(21),s=n(139),c=function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,null,[{key:"register",value:function(t,n){i.a.null(t);var a=t;"string"===typeof t&&(i.a.null(n),a={name:t,displayName:t,factory:n}),a.platformSupport||(a.platformSupport=s.a.All),0!==(a.platformSupport&Object(s.c)().type)&&(e.providerRegistry[a.name]=a)}},{key:"createFromConnection",value:function(e){return this.create(e.providerType,e.providerOptions)}},{key:"create",value:function(t,n){i.a.empty(t);var a=e.providerRegistry[t];if(!a)throw new Error("No storage provider has been registered with name '".concat(t,"'"));return a.factory(n)}},{key:"isRegistered",value:function(e){return void 0!==this.providers[e]}},{key:"providers",get:function(){return Object(a.a)({},e.providerRegistry)}}]),e}();c.providerRegistry={}},874:function(e){e.exports=JSON.parse('{"type":"object","properties":{"securityTokens":{"title":"${strings.appSettings.securityTokens.title}","description":"${strings.appSettings.securityTokens.description}","type":"array","items":{"type":"object","required":["name","key"],"properties":{"name":{"type":"string","title":"${strings.appSettings.securityToken.name.title}","description":""},"key":{"type":"string","title":"${strings.appSettings.securityToken.key.title}","description":""}}}}}}')},875:function(e){e.exports=JSON.parse('{"securityTokens":{"ui:options":{"addable":true,"orderable":false,"removable":true},"items":{"key":{"ui:field":"securityToken"}}}}')},877:function(e,t,n){},915:function(e){e.exports=JSON.parse('{"required":["name"],"type":"object","properties":{"name":{"title":"${strings.common.displayName}","type":"string"},"description":{"title":"${strings.common.description}","type":"string"}}}')},916:function(e){e.exports=JSON.parse('{"description":{"ui:widget":"textarea"},"providerType":{"ui:widget":"connectionProviderPicker"}}')},917:function(e,t,n){var a={"./azureBlobStorage.json":918,"./azureBlobStorage.ui.json":498};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=917},918:function(e){e.exports=JSON.parse('{"title":"${strings.connections.providers.azureBlob.title}","description":"${strings.connections.providers.azureBlob.description}","required":["sas"],"type":"object","properties":{"sas":{"title":"${strings.connections.providers.azureBlob.sas.title}","description":"${strings.connections.providers.azureBlob.sas.description}","type":"string"}}}')},919:function(e,t,n){var a={"./azureBlobStorage.ui.json":498};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=919},92:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(9),r=n(10),o=n(14),i=n(12),s=n(13),c=n(0),l=n.n(c),u=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).skipToId=function(e){e.preventDefault();var t=document.getElementById(n.props.skipTo);if(t&&(t.focus(),t!==document.activeElement))for(var a=t.querySelectorAll("*"),r=0;r<a.length;++r){var o=a[r];if(o.focus(),o===document.activeElement)return}},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"skip-button"},l.a.createElement("a",{href:"#",onClick:this.skipToId},this.props.children))}}]),t}(l.a.Component)},920:function(e,t,n){},925:function(e,t){},927:function(e,t){},928:function(e,t){},929:function(e,t){},930:function(e,t){}},[[590,1,2]]]);
//# sourceMappingURL=main.b22c1a99.chunk.js.map